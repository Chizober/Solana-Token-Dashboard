let e,t,r;function n(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}function i(e){return e&&e.__esModule?e.default:e}var o,s,a,u,c,l,f,h,d,p,g,m,y,b,w,v=globalThis,x={},S={},B=v.parcelRequireb476;null==B&&((B=function(e){if(e in x)return x[e].exports;if(e in S){var t=S[e];delete S[e];var r={id:e,exports:{}};return x[e]=r,t.call(r.exports,r,r.exports),r.exports}var n=Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){S[e]=t},v.parcelRequireb476=B);var k=B.register;k("dEXSZ",function(e,t){!function(e,t){function r(e,t){if(!e)throw Error(t||"Assertion failed")}function n(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function i(e,t,r){if(i.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&(("le"===t||"be"===t)&&(r=t,t=10),this._init(e||0,t||10,r||"be"))}"object"==typeof e?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;try{l="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:B("kjyEk").Buffer}catch(e){}function o(e,t){var n=e.charCodeAt(t);return n>=48&&n<=57?n-48:n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:void r(!1,"Invalid character in "+e)}function s(e,t,r){var n=o(e,r);return r-1>=t&&(n|=o(e,r-1)<<4),n}function a(e,t,n,i){for(var o=0,s=0,a=Math.min(e.length,n),u=t;u<a;u++){var c=e.charCodeAt(u)-48;o*=i,s=c>=49?c-49+10:c>=17?c-17+10:c,r(c>=0&&s<i,"Invalid character"),o+=s}return o}function u(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}if(i.isBN=function(e){return e instanceof i||null!==e&&"object"==typeof e&&e.constructor.wordSize===i.wordSize&&Array.isArray(e.words)},i.max=function(e,t){return e.cmp(t)>0?e:t},i.min=function(e,t){return 0>e.cmp(t)?e:t},i.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,n):(this._parseBase(e,t,i),"le"===n&&this._initArray(this.toArray(),t,n)))},i.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<0x4000000?(this.words=[0x3ffffff&e],this.length=1):e<0x10000000000000?(this.words=[0x3ffffff&e,e/0x4000000&0x3ffffff],this.length=2):(r(e<0x20000000000000),this.words=[0x3ffffff&e,e/0x4000000&0x3ffffff,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},i.prototype._initArray=function(e,t,n){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=Array(this.length);for(var i,o,s=0;s<this.length;s++)this.words[s]=0;var a=0;if("be"===n)for(s=e.length-1,i=0;s>=0;s-=3)o=e[s]|e[s-1]<<8|e[s-2]<<16,this.words[i]|=o<<a&0x3ffffff,this.words[i+1]=o>>>26-a&0x3ffffff,(a+=24)>=26&&(a-=26,i++);else if("le"===n)for(s=0,i=0;s<e.length;s+=3)o=e[s]|e[s+1]<<8|e[s+2]<<16,this.words[i]|=o<<a&0x3ffffff,this.words[i+1]=o>>>26-a&0x3ffffff,(a+=24)>=26&&(a-=26,i++);return this._strip()},i.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=Array(this.length);for(var n,i=0;i<this.length;i++)this.words[i]=0;var o=0,a=0;if("be"===r)for(i=e.length-1;i>=t;i-=2)n=s(e,t,i)<<o,this.words[a]|=0x3ffffff&n,o>=18?(o-=18,a+=1,this.words[a]|=n>>>26):o+=8;else for(i=(e.length-t)%2==0?t+1:t;i<e.length;i+=2)n=s(e,t,i)<<o,this.words[a]|=0x3ffffff&n,o>=18?(o-=18,a+=1,this.words[a]|=n>>>26):o+=8;this._strip()},i.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=0x3ffffff;i*=t)n++;n--,i=i/t|0;for(var o=e.length-r,s=o%n,u=Math.min(o,o-s)+r,c=0,l=r;l<u;l+=n)c=a(e,l,l+n,t),this.imuln(i),this.words[0]+c<0x4000000?this.words[0]+=c:this._iaddn(c);if(0!==s){var f=1;for(c=a(e,l,e.length,t),l=0;l<s;l++)f*=t;this.imuln(f),this.words[0]+c<0x4000000?this.words[0]+=c:this._iaddn(c)}this._strip()},i.prototype.copy=function(e){e.words=Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},i.prototype._move=function(e){u(e,this)},i.prototype.clone=function(){var e=new i(null);return this.copy(e),e},i.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=c}catch(e){i.prototype.inspect=c}else i.prototype.inspect=c;function c(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var l,f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,0x2000000,0x290d741,0x1000000,0x2e90edd,0x39aa400,0x267bf47,0x1000000,0x290d741,1e7,0x12959c3,0x222c000,0x3bd7765,7529536,0xadcea1,0x1000000,0x1704f61,0x206fc40,0x2cddcf9,64e6,4084101,5153632,6436343,7962624,9765625,0xb54ba0,0xdaf26b,0x1069c00,0x138f9ad,243e5,0x1b4d89f,0x2000000,0x25528a1,0x2b54a20,0x3216b93,0x39aa400];function p(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var i=0|e.words[0],o=0|t.words[0],s=i*o,a=0x3ffffff&s,u=s/0x4000000|0;r.words[0]=a;for(var c=1;c<n;c++){for(var l=u>>>26,f=0x3ffffff&u,h=Math.min(c,t.length-1),d=Math.max(0,c-e.length+1);d<=h;d++){var p=c-d|0;l+=(s=(i=0|e.words[p])*(o=0|t.words[d])+f)/0x4000000|0,f=0x3ffffff&s}r.words[c]=0|f,u=0|l}return 0!==u?r.words[c]=0|u:r.length--,r._strip()}i.prototype.toString=function(e,t){if(t=0|t||1,16===(e=e||10)||"hex"===e){for(var n="",i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],u=((a<<i|o)&0xffffff).toString(16);o=a>>>24-i&0xffffff,(i+=2)>=26&&(i-=26,s--),n=0!==o||s!==this.length-1?f[6-u.length]+u+n:u+n}for(0!==o&&(n=o.toString(16)+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var c=h[e],l=d[e];n="";var p=this.clone();for(p.negative=0;!p.isZero();){var g=p.modrn(l).toString(e);n=(p=p.idivn(l)).isZero()?g+n:f[c-g.length]+g+n}for(this.isZero()&&(n="0"+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=0x4000000*this.words[1]:3===this.length&&1===this.words[2]?e+=0x10000000000000+0x4000000*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},i.prototype.toJSON=function(){return this.toString(16,2)},l&&(i.prototype.toBuffer=function(e,t){return this.toArrayLike(l,e,t)}),i.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},i.prototype.toArrayLike=function(e,t,n){this._strip();var i=this.byteLength(),o=n||Math.max(1,i);r(i<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0");var s=e.allocUnsafe?e.allocUnsafe(o):new e(o);return this["_toArrayLike"+("le"===t?"LE":"BE")](s,i),s},i.prototype._toArrayLikeLE=function(e,t){for(var r=0,n=0,i=0,o=0;i<this.length;i++){var s=this.words[i]<<o|n;e[r++]=255&s,r<e.length&&(e[r++]=s>>8&255),r<e.length&&(e[r++]=s>>16&255),6===o?(r<e.length&&(e[r++]=s>>24&255),n=0,o=0):(n=s>>>24,o+=2)}if(r<e.length)for(e[r++]=n;r<e.length;)e[r++]=0},i.prototype._toArrayLikeBE=function(e,t){for(var r=e.length-1,n=0,i=0,o=0;i<this.length;i++){var s=this.words[i]<<o|n;e[r--]=255&s,r>=0&&(e[r--]=s>>8&255),r>=0&&(e[r--]=s>>16&255),6===o?(r>=0&&(e[r--]=s>>24&255),n=0,o=0):(n=s>>>24,o+=2)}if(r>=0)for(e[r--]=n;r>=0;)e[r--]=0},Math.clz32?i.prototype._countBits=function(e){return 32-Math.clz32(e)}:i.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},i.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return(8191&t)==0&&(r+=13,t>>>=13),(127&t)==0&&(r+=7,t>>>=7),(15&t)==0&&(r+=4,t>>>=4),(3&t)==0&&(r+=2,t>>>=2),(1&t)==0&&r++,r},i.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return(this.length-1)*26+t},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},i.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return 0!==this.negative},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},i.prototype.ior=function(e){return r((this.negative|e.negative)==0),this.iuor(e)},i.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},i.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},i.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this._strip()},i.prototype.iand=function(e){return r((this.negative|e.negative)==0),this.iuand(e)},i.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},i.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},i.prototype.iuxor=function(e){this.length>e.length?(t=this,r=e):(t=e,r=this);for(var t,r,n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this._strip()},i.prototype.ixor=function(e){return r((this.negative|e.negative)==0),this.iuxor(e)},i.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},i.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},i.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var i=0;i<t;i++)this.words[i]=0x3ffffff&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&0x3ffffff>>26-n),this._strip()},i.prototype.notn=function(e){return this.clone().inotn(e)},i.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var n=e/26|0,i=e%26;return this._expand(n+1),t?this.words[n]=this.words[n]|1<<i:this.words[n]=this.words[n]&~(1<<i),this._strip()},i.prototype.iadd=function(e){if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var t,r,n,i=0,o=0;o<n.length;o++)t=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=0x3ffffff&t,i=t>>>26;for(;0!==i&&o<r.length;o++)t=(0|r.words[o])+i,this.words[o]=0x3ffffff&t,i=t>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},i.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},i.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t,r,n=this.iadd(e);return e.negative=1,n._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(t=this,r=e):(t=e,r=this);for(var o=0,s=0;s<r.length;s++)o=(n=(0|t.words[s])-(0|r.words[s])+o)>>26,this.words[s]=0x3ffffff&n;for(;0!==o&&s<t.length;s++)o=(n=(0|t.words[s])+o)>>26,this.words[s]=0x3ffffff&n;if(0===o&&s<t.length&&t!==this)for(;s<t.length;s++)this.words[s]=t.words[s];return this.length=Math.max(this.length,s),t!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(e){return this.clone().isub(e)};var g=function(e,t,r){var n,i,o,s=e.words,a=t.words,u=r.words,c=0,l=0|s[0],f=8191&l,h=l>>>13,d=0|s[1],p=8191&d,g=d>>>13,m=0|s[2],y=8191&m,b=m>>>13,w=0|s[3],v=8191&w,x=w>>>13,S=0|s[4],B=8191&S,k=S>>>13,E=0|s[5],A=8191&E,I=E>>>13,_=0|s[6],M=8191&_,T=_>>>13,O=0|s[7],P=8191&O,L=O>>>13,R=0|s[8],C=8191&R,U=R>>>13,N=0|s[9],z=8191&N,H=N>>>13,F=0|a[0],q=8191&F,D=F>>>13,W=0|a[1],j=8191&W,K=W>>>13,V=0|a[2],$=8191&V,Z=V>>>13,G=0|a[3],X=8191&G,Y=G>>>13,J=0|a[4],Q=8191&J,ee=J>>>13,et=0|a[5],er=8191&et,en=et>>>13,ei=0|a[6],eo=8191&ei,es=ei>>>13,ea=0|a[7],eu=8191&ea,ec=ea>>>13,el=0|a[8],ef=8191&el,eh=el>>>13,ed=0|a[9],ep=8191&ed,eg=ed>>>13;r.negative=e.negative^t.negative,r.length=19,n=Math.imul(f,q);var em=(c+n|0)+((8191&(i=(i=Math.imul(f,D))+Math.imul(h,q)|0))<<13)|0;c=((o=Math.imul(h,D))+(i>>>13)|0)+(em>>>26)|0,em&=0x3ffffff,n=Math.imul(p,q),i=(i=Math.imul(p,D))+Math.imul(g,q)|0,o=Math.imul(g,D),n=n+Math.imul(f,j)|0;var ey=(c+n|0)+((8191&(i=(i=i+Math.imul(f,K)|0)+Math.imul(h,j)|0))<<13)|0;c=((o=o+Math.imul(h,K)|0)+(i>>>13)|0)+(ey>>>26)|0,ey&=0x3ffffff,n=Math.imul(y,q),i=(i=Math.imul(y,D))+Math.imul(b,q)|0,o=Math.imul(b,D),n=n+Math.imul(p,j)|0,i=(i=i+Math.imul(p,K)|0)+Math.imul(g,j)|0,o=o+Math.imul(g,K)|0,n=n+Math.imul(f,$)|0;var eb=(c+n|0)+((8191&(i=(i=i+Math.imul(f,Z)|0)+Math.imul(h,$)|0))<<13)|0;c=((o=o+Math.imul(h,Z)|0)+(i>>>13)|0)+(eb>>>26)|0,eb&=0x3ffffff,n=Math.imul(v,q),i=(i=Math.imul(v,D))+Math.imul(x,q)|0,o=Math.imul(x,D),n=n+Math.imul(y,j)|0,i=(i=i+Math.imul(y,K)|0)+Math.imul(b,j)|0,o=o+Math.imul(b,K)|0,n=n+Math.imul(p,$)|0,i=(i=i+Math.imul(p,Z)|0)+Math.imul(g,$)|0,o=o+Math.imul(g,Z)|0,n=n+Math.imul(f,X)|0;var ew=(c+n|0)+((8191&(i=(i=i+Math.imul(f,Y)|0)+Math.imul(h,X)|0))<<13)|0;c=((o=o+Math.imul(h,Y)|0)+(i>>>13)|0)+(ew>>>26)|0,ew&=0x3ffffff,n=Math.imul(B,q),i=(i=Math.imul(B,D))+Math.imul(k,q)|0,o=Math.imul(k,D),n=n+Math.imul(v,j)|0,i=(i=i+Math.imul(v,K)|0)+Math.imul(x,j)|0,o=o+Math.imul(x,K)|0,n=n+Math.imul(y,$)|0,i=(i=i+Math.imul(y,Z)|0)+Math.imul(b,$)|0,o=o+Math.imul(b,Z)|0,n=n+Math.imul(p,X)|0,i=(i=i+Math.imul(p,Y)|0)+Math.imul(g,X)|0,o=o+Math.imul(g,Y)|0,n=n+Math.imul(f,Q)|0;var ev=(c+n|0)+((8191&(i=(i=i+Math.imul(f,ee)|0)+Math.imul(h,Q)|0))<<13)|0;c=((o=o+Math.imul(h,ee)|0)+(i>>>13)|0)+(ev>>>26)|0,ev&=0x3ffffff,n=Math.imul(A,q),i=(i=Math.imul(A,D))+Math.imul(I,q)|0,o=Math.imul(I,D),n=n+Math.imul(B,j)|0,i=(i=i+Math.imul(B,K)|0)+Math.imul(k,j)|0,o=o+Math.imul(k,K)|0,n=n+Math.imul(v,$)|0,i=(i=i+Math.imul(v,Z)|0)+Math.imul(x,$)|0,o=o+Math.imul(x,Z)|0,n=n+Math.imul(y,X)|0,i=(i=i+Math.imul(y,Y)|0)+Math.imul(b,X)|0,o=o+Math.imul(b,Y)|0,n=n+Math.imul(p,Q)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(g,Q)|0,o=o+Math.imul(g,ee)|0,n=n+Math.imul(f,er)|0;var ex=(c+n|0)+((8191&(i=(i=i+Math.imul(f,en)|0)+Math.imul(h,er)|0))<<13)|0;c=((o=o+Math.imul(h,en)|0)+(i>>>13)|0)+(ex>>>26)|0,ex&=0x3ffffff,n=Math.imul(M,q),i=(i=Math.imul(M,D))+Math.imul(T,q)|0,o=Math.imul(T,D),n=n+Math.imul(A,j)|0,i=(i=i+Math.imul(A,K)|0)+Math.imul(I,j)|0,o=o+Math.imul(I,K)|0,n=n+Math.imul(B,$)|0,i=(i=i+Math.imul(B,Z)|0)+Math.imul(k,$)|0,o=o+Math.imul(k,Z)|0,n=n+Math.imul(v,X)|0,i=(i=i+Math.imul(v,Y)|0)+Math.imul(x,X)|0,o=o+Math.imul(x,Y)|0,n=n+Math.imul(y,Q)|0,i=(i=i+Math.imul(y,ee)|0)+Math.imul(b,Q)|0,o=o+Math.imul(b,ee)|0,n=n+Math.imul(p,er)|0,i=(i=i+Math.imul(p,en)|0)+Math.imul(g,er)|0,o=o+Math.imul(g,en)|0,n=n+Math.imul(f,eo)|0;var eS=(c+n|0)+((8191&(i=(i=i+Math.imul(f,es)|0)+Math.imul(h,eo)|0))<<13)|0;c=((o=o+Math.imul(h,es)|0)+(i>>>13)|0)+(eS>>>26)|0,eS&=0x3ffffff,n=Math.imul(P,q),i=(i=Math.imul(P,D))+Math.imul(L,q)|0,o=Math.imul(L,D),n=n+Math.imul(M,j)|0,i=(i=i+Math.imul(M,K)|0)+Math.imul(T,j)|0,o=o+Math.imul(T,K)|0,n=n+Math.imul(A,$)|0,i=(i=i+Math.imul(A,Z)|0)+Math.imul(I,$)|0,o=o+Math.imul(I,Z)|0,n=n+Math.imul(B,X)|0,i=(i=i+Math.imul(B,Y)|0)+Math.imul(k,X)|0,o=o+Math.imul(k,Y)|0,n=n+Math.imul(v,Q)|0,i=(i=i+Math.imul(v,ee)|0)+Math.imul(x,Q)|0,o=o+Math.imul(x,ee)|0,n=n+Math.imul(y,er)|0,i=(i=i+Math.imul(y,en)|0)+Math.imul(b,er)|0,o=o+Math.imul(b,en)|0,n=n+Math.imul(p,eo)|0,i=(i=i+Math.imul(p,es)|0)+Math.imul(g,eo)|0,o=o+Math.imul(g,es)|0,n=n+Math.imul(f,eu)|0;var eB=(c+n|0)+((8191&(i=(i=i+Math.imul(f,ec)|0)+Math.imul(h,eu)|0))<<13)|0;c=((o=o+Math.imul(h,ec)|0)+(i>>>13)|0)+(eB>>>26)|0,eB&=0x3ffffff,n=Math.imul(C,q),i=(i=Math.imul(C,D))+Math.imul(U,q)|0,o=Math.imul(U,D),n=n+Math.imul(P,j)|0,i=(i=i+Math.imul(P,K)|0)+Math.imul(L,j)|0,o=o+Math.imul(L,K)|0,n=n+Math.imul(M,$)|0,i=(i=i+Math.imul(M,Z)|0)+Math.imul(T,$)|0,o=o+Math.imul(T,Z)|0,n=n+Math.imul(A,X)|0,i=(i=i+Math.imul(A,Y)|0)+Math.imul(I,X)|0,o=o+Math.imul(I,Y)|0,n=n+Math.imul(B,Q)|0,i=(i=i+Math.imul(B,ee)|0)+Math.imul(k,Q)|0,o=o+Math.imul(k,ee)|0,n=n+Math.imul(v,er)|0,i=(i=i+Math.imul(v,en)|0)+Math.imul(x,er)|0,o=o+Math.imul(x,en)|0,n=n+Math.imul(y,eo)|0,i=(i=i+Math.imul(y,es)|0)+Math.imul(b,eo)|0,o=o+Math.imul(b,es)|0,n=n+Math.imul(p,eu)|0,i=(i=i+Math.imul(p,ec)|0)+Math.imul(g,eu)|0,o=o+Math.imul(g,ec)|0,n=n+Math.imul(f,ef)|0;var ek=(c+n|0)+((8191&(i=(i=i+Math.imul(f,eh)|0)+Math.imul(h,ef)|0))<<13)|0;c=((o=o+Math.imul(h,eh)|0)+(i>>>13)|0)+(ek>>>26)|0,ek&=0x3ffffff,n=Math.imul(z,q),i=(i=Math.imul(z,D))+Math.imul(H,q)|0,o=Math.imul(H,D),n=n+Math.imul(C,j)|0,i=(i=i+Math.imul(C,K)|0)+Math.imul(U,j)|0,o=o+Math.imul(U,K)|0,n=n+Math.imul(P,$)|0,i=(i=i+Math.imul(P,Z)|0)+Math.imul(L,$)|0,o=o+Math.imul(L,Z)|0,n=n+Math.imul(M,X)|0,i=(i=i+Math.imul(M,Y)|0)+Math.imul(T,X)|0,o=o+Math.imul(T,Y)|0,n=n+Math.imul(A,Q)|0,i=(i=i+Math.imul(A,ee)|0)+Math.imul(I,Q)|0,o=o+Math.imul(I,ee)|0,n=n+Math.imul(B,er)|0,i=(i=i+Math.imul(B,en)|0)+Math.imul(k,er)|0,o=o+Math.imul(k,en)|0,n=n+Math.imul(v,eo)|0,i=(i=i+Math.imul(v,es)|0)+Math.imul(x,eo)|0,o=o+Math.imul(x,es)|0,n=n+Math.imul(y,eu)|0,i=(i=i+Math.imul(y,ec)|0)+Math.imul(b,eu)|0,o=o+Math.imul(b,ec)|0,n=n+Math.imul(p,ef)|0,i=(i=i+Math.imul(p,eh)|0)+Math.imul(g,ef)|0,o=o+Math.imul(g,eh)|0,n=n+Math.imul(f,ep)|0;var eE=(c+n|0)+((8191&(i=(i=i+Math.imul(f,eg)|0)+Math.imul(h,ep)|0))<<13)|0;c=((o=o+Math.imul(h,eg)|0)+(i>>>13)|0)+(eE>>>26)|0,eE&=0x3ffffff,n=Math.imul(z,j),i=(i=Math.imul(z,K))+Math.imul(H,j)|0,o=Math.imul(H,K),n=n+Math.imul(C,$)|0,i=(i=i+Math.imul(C,Z)|0)+Math.imul(U,$)|0,o=o+Math.imul(U,Z)|0,n=n+Math.imul(P,X)|0,i=(i=i+Math.imul(P,Y)|0)+Math.imul(L,X)|0,o=o+Math.imul(L,Y)|0,n=n+Math.imul(M,Q)|0,i=(i=i+Math.imul(M,ee)|0)+Math.imul(T,Q)|0,o=o+Math.imul(T,ee)|0,n=n+Math.imul(A,er)|0,i=(i=i+Math.imul(A,en)|0)+Math.imul(I,er)|0,o=o+Math.imul(I,en)|0,n=n+Math.imul(B,eo)|0,i=(i=i+Math.imul(B,es)|0)+Math.imul(k,eo)|0,o=o+Math.imul(k,es)|0,n=n+Math.imul(v,eu)|0,i=(i=i+Math.imul(v,ec)|0)+Math.imul(x,eu)|0,o=o+Math.imul(x,ec)|0,n=n+Math.imul(y,ef)|0,i=(i=i+Math.imul(y,eh)|0)+Math.imul(b,ef)|0,o=o+Math.imul(b,eh)|0,n=n+Math.imul(p,ep)|0;var eA=(c+n|0)+((8191&(i=(i=i+Math.imul(p,eg)|0)+Math.imul(g,ep)|0))<<13)|0;c=((o=o+Math.imul(g,eg)|0)+(i>>>13)|0)+(eA>>>26)|0,eA&=0x3ffffff,n=Math.imul(z,$),i=(i=Math.imul(z,Z))+Math.imul(H,$)|0,o=Math.imul(H,Z),n=n+Math.imul(C,X)|0,i=(i=i+Math.imul(C,Y)|0)+Math.imul(U,X)|0,o=o+Math.imul(U,Y)|0,n=n+Math.imul(P,Q)|0,i=(i=i+Math.imul(P,ee)|0)+Math.imul(L,Q)|0,o=o+Math.imul(L,ee)|0,n=n+Math.imul(M,er)|0,i=(i=i+Math.imul(M,en)|0)+Math.imul(T,er)|0,o=o+Math.imul(T,en)|0,n=n+Math.imul(A,eo)|0,i=(i=i+Math.imul(A,es)|0)+Math.imul(I,eo)|0,o=o+Math.imul(I,es)|0,n=n+Math.imul(B,eu)|0,i=(i=i+Math.imul(B,ec)|0)+Math.imul(k,eu)|0,o=o+Math.imul(k,ec)|0,n=n+Math.imul(v,ef)|0,i=(i=i+Math.imul(v,eh)|0)+Math.imul(x,ef)|0,o=o+Math.imul(x,eh)|0,n=n+Math.imul(y,ep)|0;var eI=(c+n|0)+((8191&(i=(i=i+Math.imul(y,eg)|0)+Math.imul(b,ep)|0))<<13)|0;c=((o=o+Math.imul(b,eg)|0)+(i>>>13)|0)+(eI>>>26)|0,eI&=0x3ffffff,n=Math.imul(z,X),i=(i=Math.imul(z,Y))+Math.imul(H,X)|0,o=Math.imul(H,Y),n=n+Math.imul(C,Q)|0,i=(i=i+Math.imul(C,ee)|0)+Math.imul(U,Q)|0,o=o+Math.imul(U,ee)|0,n=n+Math.imul(P,er)|0,i=(i=i+Math.imul(P,en)|0)+Math.imul(L,er)|0,o=o+Math.imul(L,en)|0,n=n+Math.imul(M,eo)|0,i=(i=i+Math.imul(M,es)|0)+Math.imul(T,eo)|0,o=o+Math.imul(T,es)|0,n=n+Math.imul(A,eu)|0,i=(i=i+Math.imul(A,ec)|0)+Math.imul(I,eu)|0,o=o+Math.imul(I,ec)|0,n=n+Math.imul(B,ef)|0,i=(i=i+Math.imul(B,eh)|0)+Math.imul(k,ef)|0,o=o+Math.imul(k,eh)|0,n=n+Math.imul(v,ep)|0;var e_=(c+n|0)+((8191&(i=(i=i+Math.imul(v,eg)|0)+Math.imul(x,ep)|0))<<13)|0;c=((o=o+Math.imul(x,eg)|0)+(i>>>13)|0)+(e_>>>26)|0,e_&=0x3ffffff,n=Math.imul(z,Q),i=(i=Math.imul(z,ee))+Math.imul(H,Q)|0,o=Math.imul(H,ee),n=n+Math.imul(C,er)|0,i=(i=i+Math.imul(C,en)|0)+Math.imul(U,er)|0,o=o+Math.imul(U,en)|0,n=n+Math.imul(P,eo)|0,i=(i=i+Math.imul(P,es)|0)+Math.imul(L,eo)|0,o=o+Math.imul(L,es)|0,n=n+Math.imul(M,eu)|0,i=(i=i+Math.imul(M,ec)|0)+Math.imul(T,eu)|0,o=o+Math.imul(T,ec)|0,n=n+Math.imul(A,ef)|0,i=(i=i+Math.imul(A,eh)|0)+Math.imul(I,ef)|0,o=o+Math.imul(I,eh)|0,n=n+Math.imul(B,ep)|0;var eM=(c+n|0)+((8191&(i=(i=i+Math.imul(B,eg)|0)+Math.imul(k,ep)|0))<<13)|0;c=((o=o+Math.imul(k,eg)|0)+(i>>>13)|0)+(eM>>>26)|0,eM&=0x3ffffff,n=Math.imul(z,er),i=(i=Math.imul(z,en))+Math.imul(H,er)|0,o=Math.imul(H,en),n=n+Math.imul(C,eo)|0,i=(i=i+Math.imul(C,es)|0)+Math.imul(U,eo)|0,o=o+Math.imul(U,es)|0,n=n+Math.imul(P,eu)|0,i=(i=i+Math.imul(P,ec)|0)+Math.imul(L,eu)|0,o=o+Math.imul(L,ec)|0,n=n+Math.imul(M,ef)|0,i=(i=i+Math.imul(M,eh)|0)+Math.imul(T,ef)|0,o=o+Math.imul(T,eh)|0,n=n+Math.imul(A,ep)|0;var eT=(c+n|0)+((8191&(i=(i=i+Math.imul(A,eg)|0)+Math.imul(I,ep)|0))<<13)|0;c=((o=o+Math.imul(I,eg)|0)+(i>>>13)|0)+(eT>>>26)|0,eT&=0x3ffffff,n=Math.imul(z,eo),i=(i=Math.imul(z,es))+Math.imul(H,eo)|0,o=Math.imul(H,es),n=n+Math.imul(C,eu)|0,i=(i=i+Math.imul(C,ec)|0)+Math.imul(U,eu)|0,o=o+Math.imul(U,ec)|0,n=n+Math.imul(P,ef)|0,i=(i=i+Math.imul(P,eh)|0)+Math.imul(L,ef)|0,o=o+Math.imul(L,eh)|0,n=n+Math.imul(M,ep)|0;var eO=(c+n|0)+((8191&(i=(i=i+Math.imul(M,eg)|0)+Math.imul(T,ep)|0))<<13)|0;c=((o=o+Math.imul(T,eg)|0)+(i>>>13)|0)+(eO>>>26)|0,eO&=0x3ffffff,n=Math.imul(z,eu),i=(i=Math.imul(z,ec))+Math.imul(H,eu)|0,o=Math.imul(H,ec),n=n+Math.imul(C,ef)|0,i=(i=i+Math.imul(C,eh)|0)+Math.imul(U,ef)|0,o=o+Math.imul(U,eh)|0,n=n+Math.imul(P,ep)|0;var eP=(c+n|0)+((8191&(i=(i=i+Math.imul(P,eg)|0)+Math.imul(L,ep)|0))<<13)|0;c=((o=o+Math.imul(L,eg)|0)+(i>>>13)|0)+(eP>>>26)|0,eP&=0x3ffffff,n=Math.imul(z,ef),i=(i=Math.imul(z,eh))+Math.imul(H,ef)|0,o=Math.imul(H,eh),n=n+Math.imul(C,ep)|0;var eL=(c+n|0)+((8191&(i=(i=i+Math.imul(C,eg)|0)+Math.imul(U,ep)|0))<<13)|0;c=((o=o+Math.imul(U,eg)|0)+(i>>>13)|0)+(eL>>>26)|0,eL&=0x3ffffff,n=Math.imul(z,ep);var eR=(c+n|0)+((8191&(i=(i=Math.imul(z,eg))+Math.imul(H,ep)|0))<<13)|0;return c=((o=Math.imul(H,eg))+(i>>>13)|0)+(eR>>>26)|0,eR&=0x3ffffff,u[0]=em,u[1]=ey,u[2]=eb,u[3]=ew,u[4]=ev,u[5]=ex,u[6]=eS,u[7]=eB,u[8]=ek,u[9]=eE,u[10]=eA,u[11]=eI,u[12]=e_,u[13]=eM,u[14]=eT,u[15]=eO,u[16]=eP,u[17]=eL,u[18]=eR,0!==c&&(u[19]=c,r.length++),r};function m(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=0x3ffffff&n,u=Math.min(o,t.length-1),c=Math.max(0,o-e.length+1);c<=u;c++){var l=o-c,f=(0|e.words[l])*(0|t.words[c]),h=0x3ffffff&f;s=s+(f/0x4000000|0)|0,a=0x3ffffff&(h=h+a|0),i+=(s=s+(h>>>26)|0)>>>26,s&=0x3ffffff}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r._strip()}function y(e,t){this.x=e,this.y=t}Math.imul||(g=p),i.prototype.mulTo=function(e,t){var r,n=this.length+e.length;return 10===this.length&&10===e.length?r=g(this,e,t):n<63?r=p(this,e,t):r=m(this,e,t),r},y.prototype.makeRBT=function(e){for(var t=Array(e),r=i.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},y.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,i=0;i<t;i++)n|=(1&e)<<t-i-1,e>>=1;return n},y.prototype.permute=function(e,t,r,n,i,o){for(var s=0;s<o;s++)n[s]=t[e[s]],i[s]=r[e[s]]},y.prototype.transform=function(e,t,r,n,i,o){this.permute(o,e,t,r,n,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,u=Math.cos(2*Math.PI/a),c=Math.sin(2*Math.PI/a),l=0;l<i;l+=a)for(var f=u,h=c,d=0;d<s;d++){var p=r[l+d],g=n[l+d],m=r[l+d+s],y=n[l+d+s],b=f*m-h*y;y=f*y+h*m,m=b,r[l+d]=p+m,n[l+d]=g+y,r[l+d+s]=p-m,n[l+d+s]=g-y,d!==a&&(b=u*f-c*h,h=u*h+c*f,f=b)}},y.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},y.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=e[n];e[n]=e[r-n-1],e[r-n-1]=i,i=t[n],t[n]=-t[r-n-1],t[r-n-1]=-i}},y.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var i=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=0x3ffffff&i,r=i<0x4000000?0:i/0x4000000|0}return e},y.prototype.convert13b=function(e,t,n,i){for(var o=0,s=0;s<t;s++)o+=0|e[s],n[2*s]=8191&o,o>>>=13,n[2*s+1]=8191&o,o>>>=13;for(s=2*t;s<i;++s)n[s]=0;r(0===o),r((-8192&o)==0)},y.prototype.stub=function(e){for(var t=Array(e),r=0;r<e;r++)t[r]=0;return t},y.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(n),o=this.stub(n),s=Array(n),a=Array(n),u=Array(n),c=Array(n),l=Array(n),f=Array(n),h=r.words;h.length=n,this.convert13b(e.words,e.length,s,n),this.convert13b(t.words,t.length,c,n),this.transform(s,o,a,u,n,i),this.transform(c,o,l,f,n,i);for(var d=0;d<n;d++){var p=a[d]*l[d]-u[d]*f[d];u[d]=a[d]*f[d]+u[d]*l[d],a[d]=p}return this.conjugate(a,u,n),this.transform(a,u,h,o,n,i),this.conjugate(h,o,n),this.normalize13b(h,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r._strip()},i.prototype.mul=function(e){var t=new i(null);return t.words=Array(this.length+e.length),this.mulTo(e,t)},i.prototype.mulf=function(e){var t=new i(null);return t.words=Array(this.length+e.length),m(this,e,t)},i.prototype.imul=function(e){return this.clone().mulTo(e,this)},i.prototype.imuln=function(e){var t=e<0;t&&(e=-e),r("number"==typeof e),r(e<0x4000000);for(var n=0,i=0;i<this.length;i++){var o=(0|this.words[i])*e,s=(0x3ffffff&o)+(0x3ffffff&n);n>>=26,n+=(o/0x4000000|0)+(s>>>26),this.words[i]=0x3ffffff&s}return 0!==n&&(this.words[i]=n,this.length++),this.length=0===e?1:this.length,t?this.ineg():this},i.prototype.muln=function(e){return this.clone().imuln(e)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(e){var t=function(e){for(var t=Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,i=r%26;t[r]=e.words[n]>>>i&1}return t}(e);if(0===t.length)return new i(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var o=r.sqr();n<t.length;n++,o=o.sqr())0!==t[n]&&(r=r.mul(o));return r},i.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,n=e%26,i=(e-n)/26,o=0x3ffffff>>>26-n<<26-n;if(0!==n){var s=0;for(t=0;t<this.length;t++){var a=this.words[t]&o,u=(0|this.words[t])-a<<n;this.words[t]=u|s,s=a>>>26-n}s&&(this.words[t]=s,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this._strip()},i.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},i.prototype.iushrn=function(e,t,n){r("number"==typeof e&&e>=0);var i=t?(t-t%26)/26:0,o=e%26,s=Math.min((e-o)/26,this.length),a=0x3ffffff^0x3ffffff>>>o<<o;if(i-=s,i=Math.max(0,i),n){for(var u=0;u<s;u++)n.words[u]=this.words[u];n.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var c=0;for(u=this.length-1;u>=0&&(0!==c||u>=i);u--){var l=0|this.words[u];this.words[u]=c<<26-o|l>>>o,c=l&a}return n&&0!==c&&(n.words[n.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(e,t,n){return r(0===this.negative),this.iushrn(e,t,n)},i.prototype.shln=function(e){return this.clone().ishln(e)},i.prototype.ushln=function(e){return this.clone().iushln(e)},i.prototype.shrn=function(e){return this.clone().ishrn(e)},i.prototype.ushrn=function(e){return this.clone().iushrn(e)},i.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;return!(this.length<=n)&&!!(this.words[n]&1<<t)},i.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;return(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)?this:(0!==t&&n++,this.length=Math.min(n,this.length),0!==t&&(this.words[this.length-1]&=0x3ffffff^0x3ffffff>>>t<<t),this._strip())},i.prototype.maskn=function(e){return this.clone().imaskn(e)},i.prototype.iaddn=function(e){return(r("number"==typeof e),r(e<0x4000000),e<0)?this.isubn(-e):0!==this.negative?(1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0):(this.negative=0,this.isubn(e),this.negative=1),this):this._iaddn(e)},i.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=0x4000000;t++)this.words[t]-=0x4000000,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},i.prototype.isubn=function(e){if(r("number"==typeof e),r(e<0x4000000),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=0x4000000,this.words[t+1]-=1;return this._strip()},i.prototype.addn=function(e){return this.clone().iaddn(e)},i.prototype.subn=function(e){return this.clone().isubn(e)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(e,t,n){var i,o,s=e.length+n;this._expand(s);var a=0;for(i=0;i<e.length;i++){o=(0|this.words[i+n])+a;var u=(0|e.words[i])*t;o-=0x3ffffff&u,a=(o>>26)-(u/0x4000000|0),this.words[i+n]=0x3ffffff&o}for(;i<this.length-n;i++)a=(o=(0|this.words[i+n])+a)>>26,this.words[i+n]=0x3ffffff&o;if(0===a)return this._strip();for(r(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=0x3ffffff&o;return this.negative=1,this._strip()},i.prototype._wordDiv=function(e,t){var r,n=this.length-e.length,o=this.clone(),s=e,a=0|s.words[s.length-1];0!=(n=26-this._countBits(a))&&(s=s.ushln(n),o.iushln(n),a=0|s.words[s.length-1]);var u=o.length-s.length;if("mod"!==t){(r=new i(null)).length=u+1,r.words=Array(r.length);for(var c=0;c<r.length;c++)r.words[c]=0}var l=o.clone()._ishlnsubmul(s,1,u);0===l.negative&&(o=l,r&&(r.words[u]=1));for(var f=u-1;f>=0;f--){var h=(0|o.words[s.length+f])*0x4000000+(0|o.words[s.length+f-1]);for(h=Math.min(h/a|0,0x3ffffff),o._ishlnsubmul(s,h,f);0!==o.negative;)h--,o.negative=0,o._ishlnsubmul(s,1,f),o.isZero()||(o.negative^=1);r&&(r.words[f]=h)}return r&&r._strip(),o._strip(),"div"!==t&&0!==n&&o.iushrn(n),{div:r||null,mod:o}},i.prototype.divmod=function(e,t,n){var o,s,a;return(r(!e.isZero()),this.isZero())?{div:new i(0),mod:new i(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(o=a.div.neg()),"div"!==t&&(s=a.mod.neg(),n&&0!==s.negative&&s.iadd(e)),{div:o,mod:s}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(o=a.div.neg()),{div:o,mod:a.mod}):(this.negative&e.negative)!=0?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(s=a.mod.neg(),n&&0!==s.negative&&s.isub(e)),{div:a.div,mod:s}):e.length>this.length||0>this.cmp(e)?{div:new i(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new i(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new i(this.modrn(e.words[0]))}:this._wordDiv(e,t)},i.prototype.div=function(e){return this.divmod(e,"div",!1).div},i.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},i.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},i.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),i=e.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},i.prototype.modrn=function(e){var t=e<0;t&&(e=-e),r(e<=0x3ffffff);for(var n=0x4000000%e,i=0,o=this.length-1;o>=0;o--)i=(n*i+(0|this.words[o]))%e;return t?-i:i},i.prototype.modn=function(e){return this.modrn(e)},i.prototype.idivn=function(e){var t=e<0;t&&(e=-e),r(e<=0x3ffffff);for(var n=0,i=this.length-1;i>=0;i--){var o=(0|this.words[i])+0x4000000*n;this.words[i]=o/e|0,n=o%e}return this._strip(),t?this.ineg():this},i.prototype.divn=function(e){return this.clone().idivn(e)},i.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var o=new i(1),s=new i(0),a=new i(0),u=new i(1),c=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++c;for(var l=n.clone(),f=t.clone();!t.isZero();){for(var h=0,d=1;(t.words[0]&d)==0&&h<26;++h,d<<=1);if(h>0)for(t.iushrn(h);h-- >0;)(o.isOdd()||s.isOdd())&&(o.iadd(l),s.isub(f)),o.iushrn(1),s.iushrn(1);for(var p=0,g=1;(n.words[0]&g)==0&&p<26;++p,g<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(a.isOdd()||u.isOdd())&&(a.iadd(l),u.isub(f)),a.iushrn(1),u.iushrn(1);t.cmp(n)>=0?(t.isub(n),o.isub(a),s.isub(u)):(n.isub(t),a.isub(o),u.isub(s))}return{a:a,b:u,gcd:n.iushln(c)}},i.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t,n=this,o=e.clone();n=0!==n.negative?n.umod(e):n.clone();for(var s=new i(1),a=new i(0),u=o.clone();n.cmpn(1)>0&&o.cmpn(1)>0;){for(var c=0,l=1;(n.words[0]&l)==0&&c<26;++c,l<<=1);if(c>0)for(n.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);for(var f=0,h=1;(o.words[0]&h)==0&&f<26;++f,h<<=1);if(f>0)for(o.iushrn(f);f-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);n.cmp(o)>=0?(n.isub(o),s.isub(a)):(o.isub(n),a.isub(s))}return 0>(t=0===n.cmpn(1)?s:a).cmpn(0)&&t.iadd(e),t},i.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=t.cmp(r);if(i<0){var o=t;t=r,r=o}else if(0===i||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},i.prototype.invm=function(e){return this.egcd(e).a.umod(e)},i.prototype.isEven=function(){return(1&this.words[0])==0},i.prototype.isOdd=function(){return(1&this.words[0])==1},i.prototype.andln=function(e){return this.words[0]&e},i.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,n=(e-t)/26,i=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var o=i,s=n;0!==o&&s<this.length;s++){var a=0|this.words[s];a+=o,o=a>>>26,a&=0x3ffffff,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},i.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},i.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return -1;if(0===this.negative&&n)return 1;if(this._strip(),this.length>1)t=1;else{n&&(e=-e),r(e<=0x3ffffff,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},i.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return -1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},i.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return -1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|e.words[r];if(n!==i){n<i?t=-1:n>i&&(t=1);break}}return t},i.prototype.gtn=function(e){return 1===this.cmpn(e)},i.prototype.gt=function(e){return 1===this.cmp(e)},i.prototype.gten=function(e){return this.cmpn(e)>=0},i.prototype.gte=function(e){return this.cmp(e)>=0},i.prototype.ltn=function(e){return -1===this.cmpn(e)},i.prototype.lt=function(e){return -1===this.cmp(e)},i.prototype.lten=function(e){return 0>=this.cmpn(e)},i.prototype.lte=function(e){return 0>=this.cmp(e)},i.prototype.eqn=function(e){return 0===this.cmpn(e)},i.prototype.eq=function(e){return 0===this.cmp(e)},i.red=function(e){return new E(e)},i.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(e){return this.red=e,this},i.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},i.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},i.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},i.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},i.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},i.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},i.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},i.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var b={k256:null,p224:null,p192:null,p25519:null};function w(e,t){this.name=e,this.p=new i(t,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function x(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function S(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function k(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function E(e){if("string"==typeof e){var t=i._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function A(e){E.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}w.prototype._tmp=function(){var e=new i(null);return e.words=Array(Math.ceil(this.n/13)),e},w.prototype.ireduce=function(e){var t,r=e;do this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength();while(t>this.n)var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},w.prototype.split=function(e,t){e.iushrn(this.n,0,t)},w.prototype.imulK=function(e){return e.imul(this.k)},n(v,w),v.prototype.split=function(e,t){for(var r=Math.min(e.length,9),n=0;n<r;n++)t.words[n]=e.words[n];if(t.length=r,e.length<=9){e.words[0]=0,e.length=1;return}var i=e.words[9];for(n=10,t.words[t.length++]=4194303&i;n<e.length;n++){var o=0|e.words[n];e.words[n-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,e.words[n-10]=i,0===i&&e.length>10?e.length-=10:e.length-=9},v.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=0x3ffffff&t,t=64*n+(t/0x4000000|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},n(x,w),n(S,w),n(k,w),k.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=(0|e.words[r])*19+t,i=0x3ffffff&n;n>>>=26,e.words[r]=i,t=n}return 0!==t&&(e.words[e.length++]=t),e},i._prime=function(e){var t;if(b[e])return b[e];if("k256"===e)t=new v;else if("p224"===e)t=new x;else if("p192"===e)t=new S;else if("p25519"===e)t=new k;else throw Error("Unknown prime "+e);return b[e]=t,t},E.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},E.prototype._verify2=function(e,t){r((e.negative|t.negative)==0,"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},E.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(u(e,e.umod(this.m)._forceRed(this)),e)},E.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},E.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},E.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},E.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return 0>r.cmpn(0)&&r.iadd(this.m),r._forceRed(this)},E.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return 0>r.cmpn(0)&&r.iadd(this.m),r},E.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},E.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},E.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},E.prototype.isqr=function(e){return this.imul(e,e.clone())},E.prototype.sqr=function(e){return this.mul(e,e)},E.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var n=this.m.add(new i(1)).iushrn(2);return this.pow(e,n)}for(var o=this.m.subn(1),s=0;!o.isZero()&&0===o.andln(1);)s++,o.iushrn(1);r(!o.isZero());var a=new i(1).toRed(this),u=a.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new i(2*l*l).toRed(this);0!==this.pow(l,c).cmp(u);)l.redIAdd(u);for(var f=this.pow(l,o),h=this.pow(e,o.addn(1).iushrn(1)),d=this.pow(e,o),p=s;0!==d.cmp(a);){for(var g=d,m=0;0!==g.cmp(a);m++)g=g.redSqr();r(m<p);var y=this.pow(f,new i(1).iushln(p-m-1));h=h.redMul(y),f=y.redSqr(),d=d.redMul(f),p=m}return h},E.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},E.prototype.pow=function(e,t){if(t.isZero())return new i(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=Array(16);r[0]=new i(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var o=r[0],s=0,a=0,u=t.bitLength()%26;for(0===u&&(u=26),n=t.length-1;n>=0;n--){for(var c=t.words[n],l=u-1;l>=0;l--){var f=c>>l&1;if(o!==r[0]&&(o=this.sqr(o)),0===f&&0===s){a=0;continue}s<<=1,s|=f,(4==++a||0===n&&0===l)&&(o=this.mul(o,r[s]),a=0,s=0)}u=26}return o},E.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},E.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},i.mont=function(e){return new A(e)},n(A,E),A.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},A.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},A.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):0>i.cmpn(0)&&(o=i.iadd(this.m)),o._forceRed(this)},A.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new i(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(n).iushrn(this.shift),s=o;return o.cmp(this.m)>=0?s=o.isub(this.m):0>o.cmpn(0)&&(s=o.iadd(this.m)),s._forceRed(this)},A.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,this)}),k("kjyEk",function(e,t){}),k("bYkMz",function(e,t){e.exports=B("0DhcF")("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")}),k("0DhcF",function(e,t){var r=B("1U9GM").Buffer;e.exports=function(e){if(e.length>=255)throw TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),s=o.charCodeAt(0);if(255!==t[s])throw TypeError(o+" is ambiguous");t[s]=i}var a=e.length,u=e.charAt(0),c=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function f(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return r.alloc(0);for(var n=0,i=0,o=0;e[n]===u;)i++,n++;for(var s=(e.length-n)*c+1>>>0,l=new Uint8Array(s);n<e.length;){var f=e.charCodeAt(n);if(f>255)return;var h=t[f];if(255===h)return;for(var d=0,p=s-1;(0!==h||d<o)&&-1!==p;p--,d++)h+=a*l[p]>>>0,l[p]=h%256>>>0,h=h/256>>>0;if(0!==h)throw Error("Non-zero carry");o=d,n++}for(var g=s-o;g!==s&&0===l[g];)g++;var m=r.allocUnsafe(i+(s-g));m.fill(0,0,i);for(var y=i;g!==s;)m[y++]=l[g++];return m}return{encode:function(t){if((Array.isArray(t)||t instanceof Uint8Array)&&(t=r.from(t)),!r.isBuffer(t))throw TypeError("Expected Buffer");if(0===t.length)return"";for(var n=0,i=0,o=0,s=t.length;o!==s&&0===t[o];)o++,n++;for(var c=(s-o)*l+1>>>0,f=new Uint8Array(c);o!==s;){for(var h=t[o],d=0,p=c-1;(0!==h||d<i)&&-1!==p;p--,d++)h+=256*f[p]>>>0,f[p]=h%a>>>0,h=h/a>>>0;if(0!==h)throw Error("Non-zero carry");i=d,o++}for(var g=c-i;g!==c&&0===f[g];)g++;for(var m=u.repeat(n);g<c;++g)m+=e.charAt(f[g]);return m},decodeUnsafe:f,decode:function(e){var t=f(e);if(t)return t;throw Error("Non-base"+a+" character")}}}}),k("1U9GM",function(e,t){var r=B("6ZWSX"),n=r.Buffer;function i(e,t){for(var r in e)t[r]=e[r]}function o(e,t,r){return n(e,t,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=r:(i(r,e.exports),e.exports.Buffer=o),o.prototype=Object.create(n.prototype),i(n,o),o.from=function(e,t,r){if("number"==typeof e)throw TypeError("Argument must not be a number");return n(e,t,r)},o.alloc=function(e,t,r){if("number"!=typeof e)throw TypeError("Argument must be a number");var i=n(e);return void 0!==t?"string"==typeof r?i.fill(t,r):i.fill(t):i.fill(0),i},o.allocUnsafe=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return n(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return r.SlowBuffer(e)}}),k("6ZWSX",function(e,t){n(e.exports,"Buffer",()=>r,e=>r=e),n(e.exports,"SlowBuffer",()=>i,e=>i=e),n(e.exports,"INSPECT_MAX_BYTES",()=>o,e=>o=e),n(e.exports,"kMaxLength",()=>s,e=>s=e);var r,i,o,s,a=B("kuxul"),u=B("9NvM5");let c="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function l(e){if(e>0x7fffffff)throw RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,f.prototype),t}function f(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return p(e)}return h(e,t,r)}function h(e,t,r){if("string"==typeof e){var n=e,i=t;if(("string"!=typeof i||""===i)&&(i="utf8"),!f.isEncoding(i))throw TypeError("Unknown encoding: "+i);let r=0|b(n,i),o=l(r),s=o.write(n,i);return s!==r&&(o=o.slice(0,s)),o}if(ArrayBuffer.isView(e)){var o=e;if(D(o,Uint8Array)){let e=new Uint8Array(o);return m(e.buffer,e.byteOffset,e.byteLength)}return g(o)}if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(D(e,ArrayBuffer)||e&&D(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(D(e,SharedArrayBuffer)||e&&D(e.buffer,SharedArrayBuffer)))return m(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');let s=e.valueOf&&e.valueOf();if(null!=s&&s!==e)return f.from(s,t,r);let a=function(e){if(f.isBuffer(e)){let t=0|y(e.length),r=l(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||function(e){return e!=e}(e.length)?l(0):g(e):"Buffer"===e.type&&Array.isArray(e.data)?g(e.data):void 0}(e);if(a)return a;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return f.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function d(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function p(e){return d(e),l(e<0?0:0|y(e))}function g(e){let t=e.length<0?0:0|y(e.length),r=l(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function m(e,t,r){let n;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),f.prototype),n}function y(e){if(e>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function b(e,t){if(f.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||D(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return H(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return F(e).length;default:if(i)return n?-1:H(e).length;t=(""+t).toLowerCase(),i=!0}}function w(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){let n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=t;n<r;++n)i+=W[e[n]];return i}(this,t,r);case"utf8":case"utf-8":return k(this,t,r);case"ascii":return function(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}(this,t,r);case"latin1":case"binary":return function(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}(this,t,r);case"base64":var i,o,s;return i=this,o=t,s=r,0===o&&s===i.length?a.fromByteArray(i):a.fromByteArray(i.slice(o,s));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){let n=e.slice(t,r),i="";for(let e=0;e<n.length-1;e+=2)i+=String.fromCharCode(n[e]+256*n[e+1]);return i}(this,t,r);default:if(n)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function v(e,t,r){let n=e[t];e[t]=e[r],e[r]=n}function x(e,t,r,n,i){var o;if(0===e.length)return -1;if("string"==typeof r?(n=r,r=0):r>0x7fffffff?r=0x7fffffff:r<-0x80000000&&(r=-0x80000000),(o=r*=1)!=o&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length)if(i)return -1;else r=e.length-1;else if(r<0)if(!i)return -1;else r=0;if("string"==typeof t&&(t=f.from(t,n)),f.isBuffer(t))return 0===t.length?-1:S(e,t,r,n,i);if("number"==typeof t){if(t&=255,"function"==typeof Uint8Array.prototype.indexOf)if(i)return Uint8Array.prototype.indexOf.call(e,t,r);else return Uint8Array.prototype.lastIndexOf.call(e,t,r);return S(e,[t],r,n,i)}throw TypeError("val must be string, number or Buffer")}function S(e,t,r,n,i){let o,s=1,a=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return -1;s=2,a/=2,u/=2,r/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){let n=-1;for(o=r;o<a;o++)if(c(e,o)===c(t,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===u)return n*s}else -1!==n&&(o-=o-n),n=-1}else for(r+u>a&&(r=a-u),o=r;o>=0;o--){let r=!0;for(let n=0;n<u;n++)if(c(e,o+n)!==c(t,n)){r=!1;break}if(r)return o}return -1}function k(e,t,r){r=Math.min(e.length,r);let n=[],i=t;for(;i<r;){let t=e[i],o=null,s=t>239?4:t>223?3:t>191?2:1;if(i+s<=r){let r,n,a,u;switch(s){case 1:t<128&&(o=t);break;case 2:(192&(r=e[i+1]))==128&&(u=(31&t)<<6|63&r)>127&&(o=u);break;case 3:r=e[i+1],n=e[i+2],(192&r)==128&&(192&n)==128&&(u=(15&t)<<12|(63&r)<<6|63&n)>2047&&(u<55296||u>57343)&&(o=u);break;case 4:r=e[i+1],n=e[i+2],a=e[i+3],(192&r)==128&&(192&n)==128&&(192&a)==128&&(u=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&a)>65535&&u<1114112&&(o=u)}}null===o?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=s}var o=n;let s=o.length;if(s<=4096)return String.fromCharCode.apply(String,o);let a="",u=0;for(;u<s;)a+=String.fromCharCode.apply(String,o.slice(u,u+=4096));return a}function E(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function A(e,t,r,n,i,o){if(!f.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw RangeError('"value" argument is out of bounds');if(r+n>e.length)throw RangeError("Index out of range")}function I(e,t,r,n,i){C(t,n,i,e,r,7);let o=Number(t&BigInt(0xffffffff));e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o;let s=Number(t>>BigInt(32)&BigInt(0xffffffff));return e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,r}function _(e,t,r,n,i){C(t,n,i,e,r,7);let o=Number(t&BigInt(0xffffffff));e[r+7]=o,o>>=8,e[r+6]=o,o>>=8,e[r+5]=o,o>>=8,e[r+4]=o;let s=Number(t>>BigInt(32)&BigInt(0xffffffff));return e[r+3]=s,s>>=8,e[r+2]=s,s>>=8,e[r+1]=s,s>>=8,e[r]=s,r+8}function M(e,t,r,n,i,o){if(r+n>e.length||r<0)throw RangeError("Index out of range")}function T(e,t,r,n,i){return t*=1,r>>>=0,i||M(e,t,r,4,34028234663852886e22,-34028234663852886e22),u.write(e,t,r,n,23,4),r+4}function O(e,t,r,n,i){return t*=1,r>>>=0,i||M(e,t,r,8,17976931348623157e292,-17976931348623157e292),u.write(e,t,r,n,52,8),r+8}r=f,i=function(e){return+e!=e&&(e=0),f.alloc(+e)},o=50,s=0x7fffffff,f.TYPED_ARRAY_SUPPORT=function(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),f.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}}),f.poolSize=8192,f.from=function(e,t,r){return h(e,t,r)},Object.setPrototypeOf(f.prototype,Uint8Array.prototype),Object.setPrototypeOf(f,Uint8Array),f.alloc=function(e,t,r){return(d(e),e<=0)?l(e):void 0!==t?"string"==typeof r?l(e).fill(t,r):l(e).fill(t):l(e)},f.allocUnsafe=function(e){return p(e)},f.allocUnsafeSlow=function(e){return p(e)},f.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==f.prototype},f.compare=function(e,t){if(D(e,Uint8Array)&&(e=f.from(e,e.offset,e.byteLength)),D(t,Uint8Array)&&(t=f.from(t,t.offset,t.byteLength)),!f.isBuffer(e)||!f.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:+(n<r)},f.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(e,t){let r;if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return f.alloc(0);if(void 0===t)for(r=0,t=0;r<e.length;++r)t+=e[r].length;let n=f.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){let t=e[r];if(D(t,Uint8Array))i+t.length>n.length?(f.isBuffer(t)||(t=f.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else if(f.isBuffer(t))t.copy(n,i);else throw TypeError('"list" argument must be an Array of Buffers');i+=t.length}return n},f.byteLength=b,f.prototype._isBuffer=!0,f.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)v(this,t,t+1);return this},f.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},f.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},f.prototype.toString=function(){let e=this.length;return 0===e?"":0==arguments.length?k(this,0,e):w.apply(this,arguments)},f.prototype.toLocaleString=f.prototype.toString,f.prototype.equals=function(e){if(!f.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===f.compare(this,e)},f.prototype.inspect=function(){let e="",t=o;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},c&&(f.prototype[c]=f.prototype.inspect),f.prototype.compare=function(e,t,r,n,i){if(D(e,Uint8Array)&&(e=f.from(e,e.offset,e.byteLength)),!f.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;let o=i-n,s=r-t,a=Math.min(o,s),u=this.slice(n,i),c=e.slice(t,r);for(let e=0;e<a;++e)if(u[e]!==c[e]){o=u[e],s=c[e];break}return o<s?-1:+(s<o)},f.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},f.prototype.indexOf=function(e,t,r){return x(this,e,t,r,!0)},f.prototype.lastIndexOf=function(e,t,r){return x(this,e,t,r,!1)},f.prototype.write=function(e,t,r,n){var i,o,s,a,u,c,l,f;if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let h=this.length-t;if((void 0===r||r>h)&&(r=h),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let d=!1;for(;;)switch(n){case"hex":return function(e,t,r,n){let i;r=Number(r)||0;let o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;let s=t.length;for(n>s/2&&(n=s/2),i=0;i<n;++i){var a;let n=parseInt(t.substr(2*i,2),16);if((a=n)!=a)break;e[r+i]=n}return i}(this,e,t,r);case"utf8":case"utf-8":return i=t,o=r,q(H(e,this.length-i),this,i,o);case"ascii":case"latin1":case"binary":return s=t,a=r,q(function(e){let t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(e),this,s,a);case"base64":return u=t,c=r,q(F(e),this,u,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l=t,f=r,q(function(e,t){let r,n,i=[];for(let o=0;o<e.length&&!((t-=2)<0);++o)n=(r=e.charCodeAt(o))>>8,i.push(r%256),i.push(n);return i}(e,this.length-l),this,l,f);default:if(d)throw TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),d=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},f.prototype.slice=function(e,t){let r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);let n=this.subarray(e,t);return Object.setPrototypeOf(n,f.prototype),n},f.prototype.readUintLE=f.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||E(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return n},f.prototype.readUintBE=f.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||E(e,t,this.length);let n=this[e+--t],i=1;for(;t>0&&(i*=256);)n+=this[e+--t]*i;return n},f.prototype.readUint8=f.prototype.readUInt8=function(e,t){return e>>>=0,t||E(e,1,this.length),this[e]},f.prototype.readUint16LE=f.prototype.readUInt16LE=function(e,t){return e>>>=0,t||E(e,2,this.length),this[e]|this[e+1]<<8},f.prototype.readUint16BE=f.prototype.readUInt16BE=function(e,t){return e>>>=0,t||E(e,2,this.length),this[e]<<8|this[e+1]},f.prototype.readUint32LE=f.prototype.readUInt32LE=function(e,t){return e>>>=0,t||E(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+0x1000000*this[e+3]},f.prototype.readUint32BE=f.prototype.readUInt32BE=function(e,t){return e>>>=0,t||E(e,4,this.length),0x1000000*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},f.prototype.readBigUInt64LE=j(function(e){U(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&N(e,this.length-8);let n=t+256*this[++e]+65536*this[++e]+0x1000000*this[++e],i=this[++e]+256*this[++e]+65536*this[++e]+0x1000000*r;return BigInt(n)+(BigInt(i)<<BigInt(32))}),f.prototype.readBigUInt64BE=j(function(e){U(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&N(e,this.length-8);let n=0x1000000*t+65536*this[++e]+256*this[++e]+this[++e],i=0x1000000*this[++e]+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)}),f.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||E(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},f.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||E(e,t,this.length);let n=t,i=1,o=this[e+--n];for(;n>0&&(i*=256);)o+=this[e+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},f.prototype.readInt8=function(e,t){return(e>>>=0,t||E(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},f.prototype.readInt16LE=function(e,t){e>>>=0,t||E(e,2,this.length);let r=this[e]|this[e+1]<<8;return 32768&r?0xffff0000|r:r},f.prototype.readInt16BE=function(e,t){e>>>=0,t||E(e,2,this.length);let r=this[e+1]|this[e]<<8;return 32768&r?0xffff0000|r:r},f.prototype.readInt32LE=function(e,t){return e>>>=0,t||E(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},f.prototype.readInt32BE=function(e,t){return e>>>=0,t||E(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},f.prototype.readBigInt64LE=j(function(e){U(e>>>=0,"offset");let t=this[e],r=this[e+7];return(void 0===t||void 0===r)&&N(e,this.length-8),(BigInt(this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24))<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+0x1000000*this[++e])}),f.prototype.readBigInt64BE=j(function(e){U(e>>>=0,"offset");let t=this[e],r=this[e+7];return(void 0===t||void 0===r)&&N(e,this.length-8),(BigInt((t<<24)+65536*this[++e]+256*this[++e]+this[++e])<<BigInt(32))+BigInt(0x1000000*this[++e]+65536*this[++e]+256*this[++e]+r)}),f.prototype.readFloatLE=function(e,t){return e>>>=0,t||E(e,4,this.length),u.read(this,e,!0,23,4)},f.prototype.readFloatBE=function(e,t){return e>>>=0,t||E(e,4,this.length),u.read(this,e,!1,23,4)},f.prototype.readDoubleLE=function(e,t){return e>>>=0,t||E(e,8,this.length),u.read(this,e,!0,52,8)},f.prototype.readDoubleBE=function(e,t){return e>>>=0,t||E(e,8,this.length),u.read(this,e,!1,52,8)},f.prototype.writeUintLE=f.prototype.writeUIntLE=function(e,t,r,n){if(e*=1,t>>>=0,r>>>=0,!n){let n=Math.pow(2,8*r)-1;A(this,e,t,r,n,0)}let i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},f.prototype.writeUintBE=f.prototype.writeUIntBE=function(e,t,r,n){if(e*=1,t>>>=0,r>>>=0,!n){let n=Math.pow(2,8*r)-1;A(this,e,t,r,n,0)}let i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},f.prototype.writeUint8=f.prototype.writeUInt8=function(e,t,r){return e*=1,t>>>=0,r||A(this,e,t,1,255,0),this[t]=255&e,t+1},f.prototype.writeUint16LE=f.prototype.writeUInt16LE=function(e,t,r){return e*=1,t>>>=0,r||A(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},f.prototype.writeUint16BE=f.prototype.writeUInt16BE=function(e,t,r){return e*=1,t>>>=0,r||A(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},f.prototype.writeUint32LE=f.prototype.writeUInt32LE=function(e,t,r){return e*=1,t>>>=0,r||A(this,e,t,4,0xffffffff,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},f.prototype.writeUint32BE=f.prototype.writeUInt32BE=function(e,t,r){return e*=1,t>>>=0,r||A(this,e,t,4,0xffffffff,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},f.prototype.writeBigUInt64LE=j(function(e,t=0){return I(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeBigUInt64BE=j(function(e,t=0){return _(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeIntLE=function(e,t,r,n){if(e*=1,t>>>=0,!n){let n=Math.pow(2,8*r-1);A(this,e,t,r,n-1,-n)}let i=0,o=1,s=0;for(this[t]=255&e;++i<r&&(o*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/o|0)-s&255;return t+r},f.prototype.writeIntBE=function(e,t,r,n){if(e*=1,t>>>=0,!n){let n=Math.pow(2,8*r-1);A(this,e,t,r,n-1,-n)}let i=r-1,o=1,s=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/o|0)-s&255;return t+r},f.prototype.writeInt8=function(e,t,r){return e*=1,t>>>=0,r||A(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},f.prototype.writeInt16LE=function(e,t,r){return e*=1,t>>>=0,r||A(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},f.prototype.writeInt16BE=function(e,t,r){return e*=1,t>>>=0,r||A(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},f.prototype.writeInt32LE=function(e,t,r){return e*=1,t>>>=0,r||A(this,e,t,4,0x7fffffff,-0x80000000),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},f.prototype.writeInt32BE=function(e,t,r){return e*=1,t>>>=0,r||A(this,e,t,4,0x7fffffff,-0x80000000),e<0&&(e=0xffffffff+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},f.prototype.writeBigInt64LE=j(function(e,t=0){return I(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),f.prototype.writeBigInt64BE=j(function(e,t=0){return _(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),f.prototype.writeFloatLE=function(e,t,r){return T(this,e,t,!0,r)},f.prototype.writeFloatBE=function(e,t,r){return T(this,e,t,!1,r)},f.prototype.writeDoubleLE=function(e,t,r){return O(this,e,t,!0,r)},f.prototype.writeDoubleBE=function(e,t,r){return O(this,e,t,!1,r)},f.prototype.copy=function(e,t,r,n){if(!f.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(n<0)throw RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);let i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},f.prototype.fill=function(e,t,r,n){let i;if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw TypeError("encoding must be a string");if("string"==typeof n&&!f.isEncoding(n))throw TypeError("Unknown encoding: "+n);if(1===e.length){let t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{let o=f.isBuffer(e)?e:f.from(e,n),s=o.length;if(0===s)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=o[i%s]}return this};let P={};function L(e,t,r){P[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function R(e){let t="",r=e.length,n=+("-"===e[0]);for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function C(e,t,r,n,i,o){if(e>r||e<t){let n,i="bigint"==typeof t?"n":"";throw n=o>3?0===t||t===BigInt(0)?`>= 0${i} and < 2${i} ** ${(o+1)*8}${i}`:`>= -(2${i} ** ${(o+1)*8-1}${i}) and < 2 ** ${(o+1)*8-1}${i}`:`>= ${t}${i} and <= ${r}${i}`,new P.ERR_OUT_OF_RANGE("value",n,e)}U(i,"offset"),(void 0===n[i]||void 0===n[i+o])&&N(i,n.length-(o+1))}function U(e,t){if("number"!=typeof e)throw new P.ERR_INVALID_ARG_TYPE(t,"number",e)}function N(e,t,r){if(Math.floor(e)!==e)throw U(e,r),new P.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new P.ERR_BUFFER_OUT_OF_BOUNDS;throw new P.ERR_OUT_OF_RANGE(r||"offset",`>= ${+!!r} and <= ${t}`,e)}L("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),L("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),L("ERR_OUT_OF_RANGE",function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>0x100000000?i=R(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=R(i)),i+="n"),n+=` It must be ${t}. Received ${i}`},RangeError);let z=/[^+/0-9A-Za-z-_]/g;function H(e,t){let r;t=t||1/0;let n=e.length,i=null,o=[];for(let s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319||s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return o}function F(e){return a.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(z,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function q(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length)&&!(i>=e.length);++i)t[i+r]=e[i];return i}function D(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}let W=function(){let e="0123456789abcdef",t=Array(256);for(let r=0;r<16;++r){let n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function j(e){return"undefined"==typeof BigInt?K:e}function K(){throw Error("BigInt not supported")}}),k("kuxul",function(e,t){n(e.exports,"toByteArray",()=>r,e=>r=e),n(e.exports,"fromByteArray",()=>i,e=>i=e);for(var r=function(e){var t,r,n=function(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var n=r===t?0:4-r%4;return[r,n]}(e),i=n[0],o=n[1],u=new a((i+o)*3/4-o),c=0,l=o>0?i-4:i;for(r=0;r<l;r+=4)t=s[e.charCodeAt(r)]<<18|s[e.charCodeAt(r+1)]<<12|s[e.charCodeAt(r+2)]<<6|s[e.charCodeAt(r+3)],u[c++]=t>>16&255,u[c++]=t>>8&255,u[c++]=255&t;return 2===o&&(t=s[e.charCodeAt(r)]<<2|s[e.charCodeAt(r+1)]>>4,u[c++]=255&t),1===o&&(t=s[e.charCodeAt(r)]<<10|s[e.charCodeAt(r+1)]<<4|s[e.charCodeAt(r+2)]>>2,u[c++]=t>>8&255,u[c++]=255&t),u},i=function(e){for(var t,r=e.length,n=r%3,i=[],s=0,a=r-n;s<a;s+=16383)i.push(function(e,t,r){for(var n,i=[],s=t;s<r;s+=3)n=(e[s]<<16&0xff0000)+(e[s+1]<<8&65280)+(255&e[s+2]),i.push(o[n>>18&63]+o[n>>12&63]+o[n>>6&63]+o[63&n]);return i.join("")}(e,s,s+16383>a?a:s+16383));return 1===n?i.push(o[(t=e[r-1])>>2]+o[t<<4&63]+"=="):2===n&&i.push(o[(t=(e[r-2]<<8)+e[r-1])>>10]+o[t>>4&63]+o[t<<2&63]+"="),i.join("")},o=[],s=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,l=u.length;c<l;++c)o[c]=u[c],s[u.charCodeAt(c)]=c;s[45]=62,s[95]=63}),k("9NvM5",function(e,t){var r,i;n(e.exports,"read",()=>r,e=>r=e),n(e.exports,"write",()=>i,e=>i=e),r=function(e,t,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,c=u>>1,l=-7,f=r?i-1:0,h=r?-1:1,d=e[t+f];for(f+=h,o=d&(1<<-l)-1,d>>=-l,l+=a;l>0;o=256*o+e[t+f],f+=h,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=n;l>0;s=256*s+e[t+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,n),o-=c}return(d?-1:1)*s*Math.pow(2,o-n)},i=function(e,t,r,n,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=5960464477539062e-23*(23===i),d=n?0:o-1,p=n?1:-1,g=+(t<0||0===t&&1/t<0);for(isNaN(t=Math.abs(t))||t===1/0?(a=+!!isNaN(t),s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),s+f>=1?t+=h/u:t+=h*Math.pow(2,1-f),t*u>=2&&(s++,u/=2),s+f>=l?(a=0,s=l):s+f>=1?(a=(t*u-1)*Math.pow(2,i),s+=f):(a=t*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;e[r+d]=255&a,d+=p,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;e[r+d]=255&s,d+=p,s/=256,c-=8);e[r+d-p]|=128*g}}),k("kOaA4",function(e,t){function r(e,t,r){return t<=e&&e<=r}function i(e){if(void 0===e)return{};if(e===Object(e))return e;throw TypeError("Could not convert argument to dictionary")}function o(e){this.tokens=[].slice.call(e)}function s(e,t){if(e)throw TypeError("Decoder error");return t||65533}n(e.exports,"TextEncoder",()=>a,e=>a=e),n(e.exports,"TextDecoder",()=>u,e=>u=e),o.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():-1},prepend:function(e){if(Array.isArray(e))for(;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(e)},push:function(e){if(Array.isArray(e))for(;e.length;)this.tokens.push(e.shift());else this.tokens.push(e)}};var a,u,c="utf-8";function l(e,t){if(!(this instanceof l))return new l(e,t);if((e=void 0!==e?String(e).toLowerCase():c)!==c)throw Error("Encoding not supported. Only utf-8 is supported");t=i(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function f(e,t){if(!(this instanceof f))return new f(e,t);if((e=void 0!==e?String(e).toLowerCase():c)!==c)throw Error("Encoding not supported. Only utf-8 is supported");t=i(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}function h(e){var t=e.fatal,n=0,i=0,o=0,a=128,u=191;this.handler=function(e,c){if(-1===c&&0!==o)return o=0,s(t);if(-1===c)return -1;if(0===o){if(r(c,0,127))return c;if(r(c,194,223))o=1,n=c-192;else if(r(c,224,239))224===c&&(a=160),237===c&&(u=159),o=2,n=c-224;else{if(!r(c,240,244))return s(t);240===c&&(a=144),244===c&&(u=143),o=3,n=c-240}return n<<=6*o,null}if(!r(c,a,u))return n=o=i=0,a=128,u=191,e.prepend(c),s(t);if(a=128,u=191,i+=1,n+=c-128<<6*(o-i),i!==o)return null;var l=n;return n=o=i=0,l}}function d(e){e.fatal,this.handler=function(e,t){if(-1===t)return -1;if(r(t,0,127))return t;r(t,128,2047)?(n=1,i=192):r(t,2048,65535)?(n=2,i=224):r(t,65536,1114111)&&(n=3,i=240);for(var n,i,o=[(t>>6*n)+i];n>0;){var s=t>>6*(n-1);o.push(128|63&s),n-=1}return o}}l.prototype={decode:function(e,t){r="object"==typeof e&&e instanceof ArrayBuffer?new Uint8Array(e):"object"==typeof e&&"buffer"in e&&e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(0),t=i(t),this._streaming||(this._decoder=new h({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!t.stream;for(var r,n,s=new o(r),a=[];!s.endOfStream()&&-1!==(n=this._decoder.handler(s,s.read()));)null!==n&&(Array.isArray(n)?a.push.apply(a,n):a.push(n));if(!this._streaming){do{if(-1===(n=this._decoder.handler(s,s.read())))break;if(null===n)continue;Array.isArray(n)?a.push.apply(a,n):a.push(n)}while(!s.endOfStream())this._decoder=null}!a.length||-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===a[0]?(this._BOMseen=!0,a.shift()):this._BOMseen=!0);for(var u="",c=0;c<a.length;++c){var l=a[c];l<=65535?u+=String.fromCharCode(l):(l-=65536,u+=String.fromCharCode((l>>10)+55296,(1023&l)+56320))}return u}},f.prototype={encode:function(e,t){e=e?String(e):"",t=i(t),this._streaming||(this._encoder=new d(this._options)),this._streaming=!!t.stream;for(var r,n=[],s=new o(function(e){for(var t=String(e),r=t.length,n=0,i=[];n<r;){var o=t.charCodeAt(n);if(o<55296||o>57343)i.push(o);else if(56320<=o&&o<=57343)i.push(65533);else if(55296<=o&&o<=56319)if(n===r-1)i.push(65533);else{var s=e.charCodeAt(n+1);if(56320<=s&&s<=57343){var a=1023&o,u=1023&s;i.push(65536+(a<<10)+u),n+=1}else i.push(65533)}n+=1}return i}(e));!s.endOfStream()&&-1!==(r=this._encoder.handler(s,s.read()));)Array.isArray(r)?n.push.apply(n,r):n.push(r);if(!this._streaming){for(;-1!==(r=this._encoder.handler(s,s.read()));)Array.isArray(r)?n.push.apply(n,r):n.push(r);this._encoder=null}return new Uint8Array(n)}},a=f,u=l});var E=B("6ZWSX"),A={};Object.defineProperty(A,"__esModule",{value:!0}),A.hash_to_ristretto255=A.hashToRistretto255=A.encodeToCurve=A.hashToCurve=A.RistrettoPoint=A.edwardsToMontgomery=A.ED25519_TORSION_SUBGROUP=A.ristretto255_hasher=A.ristretto255=A.ed25519_hasher=A.x25519=A.ed25519ph=A.ed25519ctx=A.ed25519=void 0,A.edwardsToMontgomeryPub=rn,A.edwardsToMontgomeryPriv=function(e){return A.ed25519.utils.toMontgomerySecret((0,eC.ensureBytes)("pub",e))};var I={};Object.defineProperty(I,"__esModule",{value:!0}),I.sha512_224=I.sha512_256=I.sha384=I.sha512=I.sha224=I.sha256=I.SHA512_256=I.SHA512_224=I.SHA384=I.SHA512=I.SHA224=I.SHA256=void 0;var _={};Object.defineProperty(_,"__esModule",{value:!0}),_.SHA512_IV=_.SHA384_IV=_.SHA224_IV=_.SHA256_IV=_.HashMD=void 0,_.setBigUint64=V,_.Chi=function(e,t,r){return e&t^~e&r},_.Maj=function(e,t,r){return e&t^e&r^t&r};var M={};Object.defineProperty(M,"__esModule",{value:!0}),M.wrapXOFConstructorWithOpts=M.wrapConstructorWithOpts=M.wrapConstructor=M.Hash=M.nextTick=M.swap32IfBE=M.byteSwapIfBE=M.swap8IfBE=M.isLE=void 0,M.isBytes=O,M.anumber=P,M.abytes=L,M.ahash=function(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.createHasher");P(e.outputLen),P(e.blockLen)},M.aexists=function(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")},M.aoutput=function(e,t){L(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)},M.u8=function(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)},M.u32=function(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))},M.clean=function(...e){for(let t=0;t<e.length;t++)e[t].fill(0)},M.createView=function(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)},M.rotr=function(e,t){return e<<32-t|e>>>t},M.rotl=function(e,t){return e<<t|e>>>32-t>>>0},M.byteSwap=R,M.byteSwap32=C,M.bytesToHex=function(e){if(L(e),U)return e.toHex();let t="";for(let r=0;r<e.length;r++)t+=N[e[r]];return t},M.hexToBytes=function(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);if(U)return Uint8Array.fromHex(e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){let r=z(e.charCodeAt(i)),o=z(e.charCodeAt(i+1));if(void 0===r||void 0===o)throw Error('hex string expected, got non-hex character "'+(e[i]+e[i+1])+'" at index '+i);n[t]=16*r+o}return n},M.asyncLoop=F,M.utf8ToBytes=q,M.bytesToUtf8=function(e){return new TextDecoder().decode(e)},M.toBytes=D,M.kdfInputToBytes=function(e){return"string"==typeof e&&(e=q(e)),L(e),e},M.concatBytes=function(...e){let t=0;for(let r=0;r<e.length;r++){let n=e[r];L(n),t+=n.length}let r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){let i=e[t];r.set(i,n),n+=i.length}return r},M.checkOpts=function(e,t){if(void 0!==t&&"[object Object]"!==({}).toString.call(t))throw Error("options should be object or undefined");return Object.assign(e,t)},M.createHasher=W,M.createOptHasher=j,M.createXOFer=K,M.randomBytes=function(e=32){if(T.crypto&&"function"==typeof T.crypto.getRandomValues)return T.crypto.getRandomValues(new Uint8Array(e));if(T.crypto&&"function"==typeof T.crypto.randomBytes)return Uint8Array.from(T.crypto.randomBytes(e));throw Error("crypto.getRandomValues must be defined")};var T={};function O(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function P(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function L(e,...t){if(!O(e))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function R(e){return e<<24&0xff000000|e<<8&0xff0000|e>>>8&65280|e>>>24&255}function C(e){for(let t=0;t<e.length;t++)e[t]=R(e[t]);return e}Object.defineProperty(T,"__esModule",{value:!0}),T.crypto=void 0,T.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,M.isLE=68===new Uint8Array(new Uint32Array([0x11223344]).buffer)[0],M.swap8IfBE=M.isLE?e=>e:e=>R(e),M.byteSwapIfBE=M.swap8IfBE,M.swap32IfBE=M.isLE?e=>e:C;let U="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex,N=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function z(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:void 0}let H=async()=>{};async function F(e,t,r){let n=Date.now();for(let i=0;i<e;i++){r(i);let e=Date.now()-n;e>=0&&e<t||(await (0,M.nextTick)(),n+=e)}}function q(e){if("string"!=typeof e)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function D(e){return"string"==typeof e&&(e=q(e)),L(e),e}function W(e){let t=t=>e().update(D(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function j(e){let t=(t,r)=>e(r).update(D(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t}function K(e){let t=(t,r)=>e(r).update(D(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t}function V(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(0xffffffff),s=Number(r>>i&o),a=Number(r&o),u=4*!!n,c=4*!n;e.setUint32(t+u,s,n),e.setUint32(t+c,a,n)}M.nextTick=H,M.Hash=class{},M.wrapConstructor=W,M.wrapConstructorWithOpts=j,M.wrapXOFConstructorWithOpts=K;class $ extends M.Hash{constructor(e,t,r,n){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.buffer=new Uint8Array(e),this.view=(0,M.createView)(this.buffer)}update(e){(0,M.aexists)(this),e=(0,M.toBytes)(e),(0,M.abytes)(e);let{view:t,buffer:r,blockLen:n}=this,i=e.length;for(let o=0;o<i;){let s=Math.min(n-this.pos,i-o);if(s===n){let t=(0,M.createView)(e);for(;n<=i-o;o+=n)this.process(t,o);continue}r.set(e.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===n&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,M.aexists)(this),(0,M.aoutput)(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:n,isLE:i}=this,{pos:o}=this;t[o++]=128,(0,M.clean)(this.buffer.subarray(o)),this.padOffset>n-o&&(this.process(r,0),o=0);for(let e=o;e<n;e++)t[e]=0;V(r,n-8,BigInt(8*this.length),i),this.process(r,0);let s=(0,M.createView)(e),a=this.outputLen;if(a%4)throw Error("_sha2: outputLen should be aligned to 32bit");let u=a/4,c=this.get();if(u>c.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<u;e++)s.setUint32(4*e,c[e],i)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:n,finished:i,destroyed:o,pos:s}=this;return e.destroyed=o,e.finished=i,e.length=n,e.pos=s,n%t&&e.buffer.set(r),e}clone(){return this._cloneInto()}}_.HashMD=$,_.SHA256_IV=Uint32Array.from([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),_.SHA224_IV=Uint32Array.from([0xc1059ed8,0x367cd507,0x3070dd17,0xf70e5939,0xffc00b31,0x68581511,0x64f98fa7,0xbefa4fa4]),_.SHA384_IV=Uint32Array.from([0xcbbb9d5d,0xc1059ed8,0x629a292a,0x367cd507,0x9159015a,0x3070dd17,0x152fecd8,0xf70e5939,0x67332667,0xffc00b31,0x8eb44a87,0x68581511,0xdb0c2e0d,0x64f98fa7,0x47b5481d,0xbefa4fa4]),_.SHA512_IV=Uint32Array.from([0x6a09e667,0xf3bcc908,0xbb67ae85,0x84caa73b,0x3c6ef372,0xfe94f82b,0xa54ff53a,0x5f1d36f1,0x510e527f,0xade682d1,0x9b05688c,0x2b3e6c1f,0x1f83d9ab,0xfb41bd6b,0x5be0cd19,0x137e2179]);var Z={};Object.defineProperty(Z,"__esModule",{value:!0}),Z.toBig=Z.shrSL=Z.shrSH=Z.rotrSL=Z.rotrSH=Z.rotrBL=Z.rotrBH=Z.rotr32L=Z.rotr32H=Z.rotlSL=Z.rotlSH=Z.rotlBL=Z.rotlBH=Z.add5L=Z.add5H=Z.add4L=Z.add4H=Z.add3L=Z.add3H=void 0,Z.add=eh,Z.fromBig=Y,Z.split=J;let G=BigInt(0x100000000-1),X=BigInt(32);function Y(e,t=!1){return t?{h:Number(e&G),l:Number(e>>X&G)}:{h:0|Number(e>>X&G),l:0|Number(e&G)}}function J(e,t=!1){let r=e.length,n=new Uint32Array(r),i=new Uint32Array(r);for(let o=0;o<r;o++){let{h:r,l:s}=Y(e[o],t);[n[o],i[o]]=[r,s]}return[n,i]}let Q=(e,t)=>BigInt(e>>>0)<<X|BigInt(t>>>0);Z.toBig=Q;let ee=(e,t,r)=>e>>>r;Z.shrSH=ee;let et=(e,t,r)=>e<<32-r|t>>>r;Z.shrSL=et;let er=(e,t,r)=>e>>>r|t<<32-r;Z.rotrSH=er;let en=(e,t,r)=>e<<32-r|t>>>r;Z.rotrSL=en;let ei=(e,t,r)=>e<<64-r|t>>>r-32;Z.rotrBH=ei;let eo=(e,t,r)=>e>>>r-32|t<<64-r;Z.rotrBL=eo;let es=(e,t)=>t;Z.rotr32H=es;let ea=(e,t)=>e;Z.rotr32L=ea;let eu=(e,t,r)=>e<<r|t>>>32-r;Z.rotlSH=eu;let ec=(e,t,r)=>t<<r|e>>>32-r;Z.rotlSL=ec;let el=(e,t,r)=>t<<r-32|e>>>64-r;Z.rotlBH=el;let ef=(e,t,r)=>e<<r-32|t>>>64-r;function eh(e,t,r,n){let i=(t>>>0)+(n>>>0);return{h:e+r+(i/0x100000000|0)|0,l:0|i}}Z.rotlBL=ef;let ed=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0);Z.add3L=ed;let ep=(e,t,r,n)=>t+r+n+(e/0x100000000|0)|0;Z.add3H=ep;let eg=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0);Z.add4L=eg;let em=(e,t,r,n,i)=>t+r+n+i+(e/0x100000000|0)|0;Z.add4H=em;let ey=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0);Z.add5L=ey;let eb=(e,t,r,n,i,o)=>t+r+n+i+o+(e/0x100000000|0)|0;Z.add5H=eb,Z.default={fromBig:Y,split:J,toBig:Q,shrSH:ee,shrSL:et,rotrSH:er,rotrSL:en,rotrBH:ei,rotrBL:eo,rotr32H:es,rotr32L:ea,rotlSH:eu,rotlSL:ec,rotlBH:el,rotlBL:ef,add:eh,add3L:ed,add3H:ep,add4L:eg,add4H:em,add5H:eb,add5L:ey};let ew=Uint32Array.from([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),ev=new Uint32Array(64);class ex extends _.HashMD{constructor(e=32){super(64,e,8,!1),this.A=0|_.SHA256_IV[0],this.B=0|_.SHA256_IV[1],this.C=0|_.SHA256_IV[2],this.D=0|_.SHA256_IV[3],this.E=0|_.SHA256_IV[4],this.F=0|_.SHA256_IV[5],this.G=0|_.SHA256_IV[6],this.H=0|_.SHA256_IV[7]}get(){let{A:e,B:t,C:r,D:n,E:i,F:o,G:s,H:a}=this;return[e,t,r,n,i,o,s,a]}set(e,t,r,n,i,o,s,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)ev[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=ev[e-15],r=ev[e-2],n=(0,M.rotr)(t,7)^(0,M.rotr)(t,18)^t>>>3,i=(0,M.rotr)(r,17)^(0,M.rotr)(r,19)^r>>>10;ev[e]=i+ev[e-7]+n+ev[e-16]|0}let{A:r,B:n,C:i,D:o,E:s,F:a,G:u,H:c}=this;for(let e=0;e<64;e++){let t=c+((0,M.rotr)(s,6)^(0,M.rotr)(s,11)^(0,M.rotr)(s,25))+(0,_.Chi)(s,a,u)+ew[e]+ev[e]|0,l=((0,M.rotr)(r,2)^(0,M.rotr)(r,13)^(0,M.rotr)(r,22))+(0,_.Maj)(r,n,i)|0;c=u,u=a,a=s,s=o+t|0,o=i,i=n,n=r,r=t+l|0}r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,o=o+this.D|0,s=s+this.E|0,a=a+this.F|0,u=u+this.G|0,c=c+this.H|0,this.set(r,n,i,o,s,a,u,c)}roundClean(){(0,M.clean)(ev)}destroy(){this.set(0,0,0,0,0,0,0,0),(0,M.clean)(this.buffer)}}I.SHA256=ex;class eS extends ex{constructor(){super(28),this.A=0|_.SHA224_IV[0],this.B=0|_.SHA224_IV[1],this.C=0|_.SHA224_IV[2],this.D=0|_.SHA224_IV[3],this.E=0|_.SHA224_IV[4],this.F=0|_.SHA224_IV[5],this.G=0|_.SHA224_IV[6],this.H=0|_.SHA224_IV[7]}}I.SHA224=eS;let eB=Z.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),ek=eB[0],eE=eB[1],eA=new Uint32Array(80),eI=new Uint32Array(80);class e_ extends _.HashMD{constructor(e=64){super(128,e,16,!1),this.Ah=0|_.SHA512_IV[0],this.Al=0|_.SHA512_IV[1],this.Bh=0|_.SHA512_IV[2],this.Bl=0|_.SHA512_IV[3],this.Ch=0|_.SHA512_IV[4],this.Cl=0|_.SHA512_IV[5],this.Dh=0|_.SHA512_IV[6],this.Dl=0|_.SHA512_IV[7],this.Eh=0|_.SHA512_IV[8],this.El=0|_.SHA512_IV[9],this.Fh=0|_.SHA512_IV[10],this.Fl=0|_.SHA512_IV[11],this.Gh=0|_.SHA512_IV[12],this.Gl=0|_.SHA512_IV[13],this.Hh=0|_.SHA512_IV[14],this.Hl=0|_.SHA512_IV[15]}get(){let{Ah:e,Al:t,Bh:r,Bl:n,Ch:i,Cl:o,Dh:s,Dl:a,Eh:u,El:c,Fh:l,Fl:f,Gh:h,Gl:d,Hh:p,Hl:g}=this;return[e,t,r,n,i,o,s,a,u,c,l,f,h,d,p,g]}set(e,t,r,n,i,o,s,a,u,c,l,f,h,d,p,g){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|n,this.Ch=0|i,this.Cl=0|o,this.Dh=0|s,this.Dl=0|a,this.Eh=0|u,this.El=0|c,this.Fh=0|l,this.Fl=0|f,this.Gh=0|h,this.Gl=0|d,this.Hh=0|p,this.Hl=0|g}process(e,t){for(let r=0;r<16;r++,t+=4)eA[r]=e.getUint32(t),eI[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){let t=0|eA[e-15],r=0|eI[e-15],n=Z.rotrSH(t,r,1)^Z.rotrSH(t,r,8)^Z.shrSH(t,r,7),i=Z.rotrSL(t,r,1)^Z.rotrSL(t,r,8)^Z.shrSL(t,r,7),o=0|eA[e-2],s=0|eI[e-2],a=Z.rotrSH(o,s,19)^Z.rotrBH(o,s,61)^Z.shrSH(o,s,6),u=Z.rotrSL(o,s,19)^Z.rotrBL(o,s,61)^Z.shrSL(o,s,6),c=Z.add4L(i,u,eI[e-7],eI[e-16]),l=Z.add4H(c,n,a,eA[e-7],eA[e-16]);eA[e]=0|l,eI[e]=0|c}let{Ah:r,Al:n,Bh:i,Bl:o,Ch:s,Cl:a,Dh:u,Dl:c,Eh:l,El:f,Fh:h,Fl:d,Gh:p,Gl:g,Hh:m,Hl:y}=this;for(let e=0;e<80;e++){let t=Z.rotrSH(l,f,14)^Z.rotrSH(l,f,18)^Z.rotrBH(l,f,41),b=Z.rotrSL(l,f,14)^Z.rotrSL(l,f,18)^Z.rotrBL(l,f,41),w=l&h^~l&p,v=f&d^~f&g,x=Z.add5L(y,b,v,eE[e],eI[e]),S=Z.add5H(x,m,t,w,ek[e],eA[e]),B=0|x,k=Z.rotrSH(r,n,28)^Z.rotrBH(r,n,34)^Z.rotrBH(r,n,39),E=Z.rotrSL(r,n,28)^Z.rotrBL(r,n,34)^Z.rotrBL(r,n,39),A=r&i^r&s^i&s,I=n&o^n&a^o&a;m=0|p,y=0|g,p=0|h,g=0|d,h=0|l,d=0|f,({h:l,l:f}=Z.add(0|u,0|c,0|S,0|B)),u=0|s,c=0|a,s=0|i,a=0|o,i=0|r,o=0|n;let _=Z.add3L(B,E,I);r=Z.add3H(_,S,k,A),n=0|_}({h:r,l:n}=Z.add(0|this.Ah,0|this.Al,0|r,0|n)),({h:i,l:o}=Z.add(0|this.Bh,0|this.Bl,0|i,0|o)),({h:s,l:a}=Z.add(0|this.Ch,0|this.Cl,0|s,0|a)),({h:u,l:c}=Z.add(0|this.Dh,0|this.Dl,0|u,0|c)),({h:l,l:f}=Z.add(0|this.Eh,0|this.El,0|l,0|f)),({h:h,l:d}=Z.add(0|this.Fh,0|this.Fl,0|h,0|d)),({h:p,l:g}=Z.add(0|this.Gh,0|this.Gl,0|p,0|g)),({h:m,l:y}=Z.add(0|this.Hh,0|this.Hl,0|m,0|y)),this.set(r,n,i,o,s,a,u,c,l,f,h,d,p,g,m,y)}roundClean(){(0,M.clean)(eA,eI)}destroy(){(0,M.clean)(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}I.SHA512=e_;class eM extends e_{constructor(){super(48),this.Ah=0|_.SHA384_IV[0],this.Al=0|_.SHA384_IV[1],this.Bh=0|_.SHA384_IV[2],this.Bl=0|_.SHA384_IV[3],this.Ch=0|_.SHA384_IV[4],this.Cl=0|_.SHA384_IV[5],this.Dh=0|_.SHA384_IV[6],this.Dl=0|_.SHA384_IV[7],this.Eh=0|_.SHA384_IV[8],this.El=0|_.SHA384_IV[9],this.Fh=0|_.SHA384_IV[10],this.Fl=0|_.SHA384_IV[11],this.Gh=0|_.SHA384_IV[12],this.Gl=0|_.SHA384_IV[13],this.Hh=0|_.SHA384_IV[14],this.Hl=0|_.SHA384_IV[15]}}I.SHA384=eM;let eT=Uint32Array.from([0x8c3d37c8,0x19544da2,0x73e19966,0x89dcd4d6,0x1dfab7ae,0x32ff9c82,0x679dd514,0x582f9fcf,0xf6d2b69,0x7bd44da8,0x77e36f73,0x4c48942,0x3f9d85a8,0x6a1d36c8,0x1112e6ad,0x91d692a1]),eO=Uint32Array.from([0x22312194,0xfc2bf72c,0x9f555fa3,0xc84c64c2,0x2393b86b,0x6f53b151,0x96387719,0x5940eabd,0x96283ee2,0xa88effe3,0xbe5e1e25,0x53863992,0x2b0199fc,0x2c85b8aa,0xeb72ddc,0x81c52ca2]);class eP extends e_{constructor(){super(28),this.Ah=0|eT[0],this.Al=0|eT[1],this.Bh=0|eT[2],this.Bl=0|eT[3],this.Ch=0|eT[4],this.Cl=0|eT[5],this.Dh=0|eT[6],this.Dl=0|eT[7],this.Eh=0|eT[8],this.El=0|eT[9],this.Fh=0|eT[10],this.Fl=0|eT[11],this.Gh=0|eT[12],this.Gl=0|eT[13],this.Hh=0|eT[14],this.Hl=0|eT[15]}}I.SHA512_224=eP;class eL extends e_{constructor(){super(32),this.Ah=0|eO[0],this.Al=0|eO[1],this.Bh=0|eO[2],this.Bl=0|eO[3],this.Ch=0|eO[4],this.Cl=0|eO[5],this.Dh=0|eO[6],this.Dl=0|eO[7],this.Eh=0|eO[8],this.El=0|eO[9],this.Fh=0|eO[10],this.Fl=0|eO[11],this.Gh=0|eO[12],this.Gl=0|eO[13],this.Hh=0|eO[14],this.Hl=0|eO[15]}}I.SHA512_256=eL,I.sha256=(0,M.createHasher)(()=>new ex),I.sha224=(0,M.createHasher)(()=>new eS),I.sha512=(0,M.createHasher)(()=>new e_),I.sha384=(0,M.createHasher)(()=>new eM),I.sha512_256=(0,M.createHasher)(()=>new eL),I.sha512_224=(0,M.createHasher)(()=>new eP);var eR={};Object.defineProperty(eR,"__esModule",{value:!0}),eR.wNAF=void 0,eR.negateCt=tu,eR.normalizeZ=function(e,t){let r=(0,ej.FpInvertBatch)(e.Fp,t.map(e=>e.Z));return t.map((t,n)=>e.fromAffine(t.toAffine(r[n])))},eR.mulEndoUnsafe=function(e,t,r,n){let i=t,o=e.ZERO,s=e.ZERO;for(;r>ts||n>ts;)r&ta&&(o=o.add(i)),n&ta&&(s=s.add(i)),i=i.double(),r>>=ta,n>>=ta;return{p1:o,p2:s}},eR.pippenger=function(e,t,r,n){th(r,e),td(n,t);let i=r.length,o=n.length;if(i!==o)throw Error("arrays of points and scalars must have equal length");let s=e.ZERO,a=(0,eC.bitLen)(BigInt(i)),u=1;a>12?u=a-3:a>4?u=a-2:a>0&&(u=2);let c=(0,eC.bitMask)(u),l=Array(Number(c)+1).fill(s),f=Math.floor((t.BITS-1)/u)*u,h=s;for(let e=f;e>=0;e-=u){l.fill(s);for(let t=0;t<o;t++){let i=Number(n[t]>>BigInt(e)&c);l[i]=l[i].add(r[t])}let t=s;for(let e=l.length-1,r=s;e>0;e--)r=r.add(l[e]),t=t.add(r);if(h=h.add(t),0!==e)for(let e=0;e<u;e++)h=h.double()}return h},eR.precomputeMSMUnsafe=function(e,t,r,n){tc(n,t.BITS),th(r,e);let i=e.ZERO,o=2**n-1,s=Math.ceil(t.BITS/n),a=(0,eC.bitMask)(n),u=r.map(e=>{let t=[];for(let r=0,n=e;r<o;r++)t.push(n),n=n.add(e);return t});return e=>{if(td(e,t),e.length>r.length)throw Error("array of scalars must be smaller than array of points");let o=i;for(let t=0;t<s;t++){if(o!==i)for(let e=0;e<n;e++)o=o.double();let r=BigInt(s*n-(t+1)*n);for(let t=0;t<e.length;t++){let n=Number(e[t]>>r&a);n&&(o=o.add(u[t][n-1]))}}return o}},eR.validateBasic=function(e){return(0,ej.validateField)(e.Fp),(0,eC.validateObject)(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,ej.nLength)(e.n,e.nBitLength),...e,p:e.Fp.ORDER})},eR._createCurveFields=function(e,t,r={},n){if(void 0===n&&(n="edwards"===e),!t||"object"!=typeof t)throw Error(`expected valid ${e} CURVE object`);for(let e of["p","n","h"]){let r=t[e];if(!("bigint"==typeof r&&r>ts))throw Error(`CURVE.${e} must be positive bigint`)}let i=tb(t.p,r.Fp,n),o=tb(t.n,r.Fn,n);for(let r of["Gx","Gy","a","weierstrass"===e?"b":"d"])if(!i.isValid(t[r]))throw Error(`CURVE.${r} must be valid field element of CURVE.Fp`);return{CURVE:t=Object.freeze(Object.assign({},t)),Fp:i,Fn:o}};var eC={};Object.defineProperty(eC,"__esModule",{value:!0}),eC.notImplemented=eC.bitMask=eC.utf8ToBytes=eC.randomBytes=eC.isBytes=eC.hexToBytes=eC.concatBytes=eC.bytesToUtf8=eC.bytesToHex=eC.anumber=eC.abytes=void 0,eC.abool=function(e,t){if("boolean"!=typeof t)throw Error(e+" boolean expected, got "+t)},eC._abool2=function(e,t=""){if("boolean"!=typeof e)throw Error((t&&`"${t}"`)+"expected boolean, got type="+typeof e);return e},eC._abytes2=function(e,t,r=""){let n=(0,M.isBytes)(e),i=e?.length,o=void 0!==t;if(!n||o&&i!==t)throw Error((r&&`"${r}" `)+"expected Uint8Array"+(o?` of length ${t}`:"")+", got "+(n?`length=${i}`:`type=${typeof e}`));return e},eC.numberToHexUnpadded=ez,eC.hexToNumber=eH,eC.bytesToNumberBE=function(e){return eH((0,M.bytesToHex)(e))},eC.bytesToNumberLE=function(e){return(0,M.abytes)(e),eH((0,M.bytesToHex)(Uint8Array.from(e).reverse()))},eC.numberToBytesBE=eF,eC.numberToBytesLE=function(e,t){return eF(e,t).reverse()},eC.numberToVarBytesBE=function(e){return(0,M.hexToBytes)(ez(e))},eC.ensureBytes=function(e,t,r){let n;if("string"==typeof t)try{n=(0,M.hexToBytes)(t)}catch(t){throw Error(e+" must be hex string or Uint8Array, cause: "+t)}else if((0,M.isBytes)(t))n=Uint8Array.from(t);else throw Error(e+" must be hex string or Uint8Array");let i=n.length;if("number"==typeof r&&i!==r)throw Error(e+" of length "+r+" expected, got "+i);return n},eC.equalBytes=function(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r},eC.copyBytes=function(e){return Uint8Array.from(e)},eC.asciiToBytes=function(e){return Uint8Array.from(e,(t,r)=>{let n=t.charCodeAt(0);if(1!==t.length||n>127)throw Error(`string contains non-ASCII character "${e[r]}" with code ${n} at position ${r}`);return n})},eC.inRange=eD,eC.aInRange=function(e,t,r,n){if(!eD(t,r,n))throw Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)},eC.bitLen=function(e){let t;for(t=0;e>eU;e>>=eN,t+=1);return t},eC.bitGet=function(e,t){return e>>BigInt(t)&eN},eC.bitSet=function(e,t,r){return e|(r?eN:eU)<<BigInt(t)},eC.createHmacDrbg=function(e,t,r){if("number"!=typeof e||e<2)throw Error("hashLen must be a number");if("number"!=typeof t||t<2)throw Error("qByteLen must be a number");if("function"!=typeof r)throw Error("hmacFn must be a function");let n=e=>new Uint8Array(e),i=n(e),o=n(e),s=0,a=()=>{i.fill(1),o.fill(0),s=0},u=(...e)=>r(o,i,...e),c=(e=n(0))=>{(o=u(Uint8Array.of(0),e),i=u(),0!==e.length)&&(o=u(Uint8Array.of(1),e),i=u())},l=()=>{if(s++>=1e3)throw Error("drbg: tried 1000 values");let e=0,r=[];for(;e<t;){let t=(i=u()).slice();r.push(t),e+=i.length}return(0,M.concatBytes)(...r)};return(e,t)=>{let r;for(a(),c(e);!(r=t(l()));)c();return a(),r}},eC.validateObject=function(e,t,r={}){let n=(t,r,n)=>{let i=eW[r];if("function"!=typeof i)throw Error("invalid validator function");let o=e[t];if((!n||void 0!==o)&&!i(o,e))throw Error("param "+String(t)+" is invalid. Expected "+r+", got "+o)};for(let[e,r]of Object.entries(t))n(e,r,!1);for(let[e,t]of Object.entries(r))n(e,t,!0);return e},eC.isHash=function(e){return"function"==typeof e&&Number.isSafeInteger(e.outputLen)},eC._validateObject=function(e,t,r={}){if(!e||"object"!=typeof e)throw Error("expected valid options object");function n(t,r,n){let i=e[t];if(n&&void 0===i)return;let o=typeof i;if(o!==r||null===i)throw Error(`param "${t}" is invalid: expected ${r}, got ${o}`)}Object.entries(t).forEach(([e,t])=>n(e,t,!1)),Object.entries(r).forEach(([e,t])=>n(e,t,!0))},eC.memoized=function(e){let t=new WeakMap;return(r,...n)=>{let i=t.get(r);if(void 0!==i)return i;let o=e(r,...n);return t.set(r,o),o}},Object.defineProperty(eC,"abytes",{enumerable:!0,get:function(){return M.abytes}}),Object.defineProperty(eC,"anumber",{enumerable:!0,get:function(){return M.anumber}}),Object.defineProperty(eC,"bytesToHex",{enumerable:!0,get:function(){return M.bytesToHex}}),Object.defineProperty(eC,"bytesToUtf8",{enumerable:!0,get:function(){return M.bytesToUtf8}}),Object.defineProperty(eC,"concatBytes",{enumerable:!0,get:function(){return M.concatBytes}}),Object.defineProperty(eC,"hexToBytes",{enumerable:!0,get:function(){return M.hexToBytes}}),Object.defineProperty(eC,"isBytes",{enumerable:!0,get:function(){return M.isBytes}}),Object.defineProperty(eC,"randomBytes",{enumerable:!0,get:function(){return M.randomBytes}}),Object.defineProperty(eC,"utf8ToBytes",{enumerable:!0,get:function(){return M.utf8ToBytes}});let eU=BigInt(0),eN=BigInt(1);function ez(e){let t=e.toString(16);return 1&t.length?"0"+t:t}function eH(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return""===e?eU:BigInt("0x"+e)}function eF(e,t){return(0,M.hexToBytes)(e.toString(16).padStart(2*t,"0"))}let eq=e=>"bigint"==typeof e&&eU<=e;function eD(e,t,r){return eq(e)&&eq(t)&&eq(r)&&t<=e&&e<r}eC.bitMask=e=>(eN<<BigInt(e))-eN;let eW={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||(0,M.isBytes)(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};eC.notImplemented=()=>{throw Error("not implemented")};var ej={};Object.defineProperty(ej,"__esModule",{value:!0}),ej.isNegativeLE=void 0,ej.mod=e1,ej.pow=function(e,t,r){return e7(tn(r),e,t)},ej.pow2=function(e,t,r){let n=e;for(;t-- >eK;)n*=n,n%=r;return n},ej.invert=e2,ej.tonelliShanks=e5,ej.FpSqrt=e4,ej.validateField=function(e){let t=e9.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"});return(0,eC._validateObject)(e,t),e},ej.FpPow=e7,ej.FpInvertBatch=te,ej.FpDiv=function(e,t,r){return e.mul(t,"bigint"==typeof r?e2(r,e.ORDER):e.inv(r))},ej.FpLegendre=tt,ej.FpIsSquare=function(e,t){return 1===tt(e,t)},ej.nLength=tr,ej.Field=tn,ej.FpSqrtOdd=function(e,t){if(!e.isOdd)throw Error("Field doesn't have isOdd");let r=e.sqrt(t);return e.isOdd(r)?r:e.neg(r)},ej.FpSqrtEven=function(e,t){if(!e.isOdd)throw Error("Field doesn't have isOdd");let r=e.sqrt(t);return e.isOdd(r)?e.neg(r):r},ej.hashToPrivateScalar=function(e,t,r=!1){let n=(e=(0,eC.ensureBytes)("privateHash",e)).length,i=tr(t).nByteLength+8;if(i<24||n<i||n>1024)throw Error("hashToPrivateScalar: expected "+i+"-1024 bytes of input, got "+n);return e1(r?(0,eC.bytesToNumberLE)(e):(0,eC.bytesToNumberBE)(e),t-eV)+eV},ej.getFieldBytesLength=ti,ej.getMinHashLength=to,ej.mapHashToField=function(e,t,r=!1){let n=e.length,i=ti(t),o=to(t);if(n<16||n<o||n>1024)throw Error("expected "+o+"-1024 bytes of input, got "+n);let s=e1(r?(0,eC.bytesToNumberLE)(e):(0,eC.bytesToNumberBE)(e),t-eV)+eV;return r?(0,eC.numberToBytesLE)(s,i):(0,eC.numberToBytesBE)(s,i)};let eK=BigInt(0),eV=BigInt(1),e$=BigInt(2),eZ=BigInt(3),eG=BigInt(4),eX=BigInt(5),eY=BigInt(7),eJ=BigInt(8),eQ=BigInt(9),e0=BigInt(16);function e1(e,t){let r=e%t;return r>=eK?r:t+r}function e2(e,t){if(e===eK)throw Error("invert: expected non-zero number");if(t<=eK)throw Error("invert: expected positive modulus, got "+t);let r=e1(e,t),n=t,i=eK,o=eV,s=eV,a=eK;for(;r!==eK;){let e=n/r,t=n%r,u=i-s*e,c=o-a*e;n=r,r=t,i=s,o=a,s=u,a=c}if(n!==eV)throw Error("invert: does not exist");return e1(i,t)}function e3(e,t,r){if(!e.eql(e.sqr(t),r))throw Error("Cannot find square root")}function e6(e,t){let r=(e.ORDER+eV)/eG,n=e.pow(t,r);return e3(e,n,t),n}function e8(e,t){let r=(e.ORDER-eX)/eJ,n=e.mul(t,e$),i=e.pow(n,r),o=e.mul(t,i),s=e.mul(e.mul(o,e$),i),a=e.mul(o,e.sub(s,e.ONE));return e3(e,a,t),a}function e5(e){if(e<eZ)throw Error("sqrt is not defined for small field");let t=e-eV,r=0;for(;t%e$===eK;)t/=e$,r++;let n=e$,i=tn(e);for(;1===tt(i,n);)if(n++>1e3)throw Error("Cannot find square root: probably non-prime P");if(1===r)return e6;let o=i.pow(n,t),s=(t+eV)/e$;return function(e,n){if(e.is0(n))return n;if(1!==tt(e,n))throw Error("Cannot find square root");let i=r,a=e.mul(e.ONE,o),u=e.pow(n,t),c=e.pow(n,s);for(;!e.eql(u,e.ONE);){if(e.is0(u))return e.ZERO;let t=1,r=e.sqr(u);for(;!e.eql(r,e.ONE);)if(t++,r=e.sqr(r),t===i)throw Error("Cannot find square root");let n=eV<<BigInt(i-t-1),o=e.pow(a,n);i=t,a=e.sqr(o),u=e.mul(u,a),c=e.mul(c,o)}return c}}function e4(e){if(e%eG===eZ)return e6;if(e%eJ===eX)return e8;if(e%e0===eQ){let t,r,n,i,o,s;return t=tn(e),n=(r=e5(e))(t,t.neg(t.ONE)),i=r(t,n),o=r(t,t.neg(n)),s=(e+eY)/e0,(e,t)=>{let r=e.pow(t,s),a=e.mul(r,n),u=e.mul(r,i),c=e.mul(r,o),l=e.eql(e.sqr(a),t),f=e.eql(e.sqr(u),t);r=e.cmov(r,a,l),a=e.cmov(c,u,f);let h=e.eql(e.sqr(a),t),d=e.cmov(r,a,h);return e3(e,d,t),d}}return e5(e)}ej.isNegativeLE=(e,t)=>(e1(e,t)&eV)===eV;let e9=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function e7(e,t,r){if(r<eK)throw Error("invalid exponent, negatives unsupported");if(r===eK)return e.ONE;if(r===eV)return t;let n=e.ONE,i=t;for(;r>eK;)r&eV&&(n=e.mul(n,i)),i=e.sqr(i),r>>=eV;return n}function te(e,t,r=!1){let n=Array(t.length).fill(r?e.ZERO:void 0),i=t.reduce((t,r,i)=>e.is0(r)?t:(n[i]=t,e.mul(t,r)),e.ONE),o=e.inv(i);return t.reduceRight((t,r,i)=>e.is0(r)?t:(n[i]=e.mul(t,n[i]),e.mul(t,r)),o),n}function tt(e,t){let r=(e.ORDER-eV)/e$,n=e.pow(t,r),i=e.eql(n,e.ONE),o=e.eql(n,e.ZERO),s=e.eql(n,e.neg(e.ONE));if(!i&&!o&&!s)throw Error("invalid Legendre symbol result");return i?1:o?0:-1}function tr(e,t){void 0!==t&&(0,eC.anumber)(t);let r=void 0!==t?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function tn(e,t,r=!1,n={}){let i,o,s,a;if(e<=eK)throw Error("invalid field: expected ORDER > 0, got "+e);let u=!1;if("object"==typeof t&&null!=t){if(n.sqrt||r)throw Error("cannot specify opts in two arguments");t.BITS&&(o=t.BITS),t.sqrt&&(s=t.sqrt),"boolean"==typeof t.isLE&&(r=t.isLE),"boolean"==typeof t.modFromBytes&&(u=t.modFromBytes),a=t.allowedLengths}else"number"==typeof t&&(o=t),n.sqrt&&(s=n.sqrt);let{nBitLength:c,nByteLength:l}=tr(e,o);if(l>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let f=Object.freeze({ORDER:e,isLE:r,BITS:c,BYTES:l,MASK:(0,eC.bitMask)(c),ZERO:eK,ONE:eV,allowedLengths:a,create:t=>e1(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error("invalid field element: expected bigint, got "+typeof t);return eK<=t&&t<e},is0:e=>e===eK,isValidNot0:e=>!f.is0(e)&&f.isValid(e),isOdd:e=>(e&eV)===eV,neg:t=>e1(-t,e),eql:(e,t)=>e===t,sqr:t=>e1(t*t,e),add:(t,r)=>e1(t+r,e),sub:(t,r)=>e1(t-r,e),mul:(t,r)=>e1(t*r,e),pow:(e,t)=>e7(f,e,t),div:(t,r)=>e1(t*e2(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>e2(t,e),sqrt:s||(t=>(i||(i=e4(e)),i(f,t))),toBytes:e=>r?(0,eC.numberToBytesLE)(e,l):(0,eC.numberToBytesBE)(e,l),fromBytes:(t,n=!0)=>{if(a){if(!a.includes(t.length)||t.length>l)throw Error("Field.fromBytes: expected "+a+" bytes, got "+t.length);let e=new Uint8Array(l);e.set(t,r?0:e.length-t.length),t=e}if(t.length!==l)throw Error("Field.fromBytes: expected "+l+" bytes, got "+t.length);let i=r?(0,eC.bytesToNumberLE)(t):(0,eC.bytesToNumberBE)(t);if(u&&(i=e1(i,e)),!n&&!f.isValid(i))throw Error("invalid field element: outside of range 0..ORDER");return i},invertBatch:e=>te(f,e),cmov:(e,t,r)=>r?t:e});return Object.freeze(f)}function ti(e){if("bigint"!=typeof e)throw Error("field order must be bigint");return Math.ceil(e.toString(2).length/8)}function to(e){let t=ti(e);return t+Math.ceil(t/2)}let ts=BigInt(0),ta=BigInt(1);function tu(e,t){let r=t.negate();return e?r:t}function tc(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw Error("invalid window size, expected [1.."+t+"], got W="+e)}function tl(e,t){tc(e,t);let r=Math.ceil(t/e)+1,n=2**(e-1),i=2**e;return{windows:r,windowSize:n,mask:(0,eC.bitMask)(e),maxNumber:i,shiftBy:BigInt(e)}}function tf(e,t,r){let{windowSize:n,mask:i,maxNumber:o,shiftBy:s}=r,a=Number(e&i),u=e>>s;a>n&&(a-=o,u+=ta);let c=t*n;return{nextN:u,offset:c+Math.abs(a)-1,isZero:0===a,isNeg:a<0,isNegF:t%2!=0,offsetF:c}}function th(e,t){if(!Array.isArray(e))throw Error("array expected");e.forEach((e,r)=>{if(!(e instanceof t))throw Error("invalid point at index "+r)})}function td(e,t){if(!Array.isArray(e))throw Error("array of scalars expected");e.forEach((e,r)=>{if(!t.isValid(e))throw Error("invalid scalar at index "+r)})}let tp=new WeakMap,tg=new WeakMap;function tm(e){return tg.get(e)||1}function ty(e){if(e!==ts)throw Error("invalid wNAF")}function tb(e,t,r){if(!t)return(0,ej.Field)(e,{isLE:r});if(t.ORDER!==e)throw Error("Field.ORDER must match order: Fp == p, Fn == n");return(0,ej.validateField)(t),t}eR.wNAF=class{constructor(e,t){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=t}_unsafeLadder(e,t,r=this.ZERO){let n=e;for(;t>ts;)t&ta&&(r=r.add(n)),n=n.double(),t>>=ta;return r}precomputeWindow(e,t){let{windows:r,windowSize:n}=tl(t,this.bits),i=[],o=e,s=o;for(let e=0;e<r;e++){s=o,i.push(s);for(let e=1;e<n;e++)s=s.add(o),i.push(s);o=s.double()}return i}wNAF(e,t,r){if(!this.Fn.isValid(r))throw Error("invalid scalar");let n=this.ZERO,i=this.BASE,o=tl(e,this.bits);for(let e=0;e<o.windows;e++){let{nextN:s,offset:a,isZero:u,isNeg:c,isNegF:l,offsetF:f}=tf(r,e,o);r=s,u?i=i.add(tu(l,t[f])):n=n.add(tu(c,t[a]))}return ty(r),{p:n,f:i}}wNAFUnsafe(e,t,r,n=this.ZERO){let i=tl(e,this.bits);for(let e=0;e<i.windows&&r!==ts;e++){let{nextN:o,offset:s,isZero:a,isNeg:u}=tf(r,e,i);if(r=o,!a){let e=t[s];n=n.add(u?e.negate():e)}}return ty(r),n}getPrecomputes(e,t,r){let n=tp.get(t);return n||(n=this.precomputeWindow(t,e),1!==e&&("function"==typeof r&&(n=r(n)),tp.set(t,n))),n}cached(e,t,r){let n=tm(e);return this.wNAF(n,this.getPrecomputes(n,e,r),t)}unsafe(e,t,r,n){let i=tm(e);return 1===i?this._unsafeLadder(e,t,n):this.wNAFUnsafe(i,this.getPrecomputes(i,e,r),t,n)}createCache(e,t){tc(t,this.bits),tg.set(e,t),tp.delete(e)}hasCache(e){return 1!==tm(e)}};var tw={};Object.defineProperty(tw,"__esModule",{value:!0}),tw.PrimeEdwardsPoint=void 0,tw.edwards=tk,tw.eddsa=tE,tw.twistedEdwards=function(e){let t,r,n,i,{CURVE:o,curveOpts:s,hash:a,eddsaOpts:u}=(t={a:e.a,d:e.d,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},r={Fp:e.Fp,Fn:(0,ej.Field)(t.n,e.nBitLength,!0),uvRatio:e.uvRatio},n={randomBytes:e.randomBytes,adjustScalarBytes:e.adjustScalarBytes,domain:e.domain,prehash:e.prehash,mapToCurve:e.mapToCurve},{CURVE:t,curveOpts:r,hash:e.hash,eddsaOpts:n}),c=tE(tk(o,s),a,u);return i=c.Point,Object.assign({},c,{ExtendedPoint:i,CURVE:e,nBitLength:i.Fn.BITS,nByteLength:i.Fn.BYTES})};let tv=BigInt(0),tx=BigInt(1),tS=BigInt(2),tB=BigInt(8);function tk(e,t={}){var r,n;let i,o,s,a,u,c=(0,eR._createCurveFields)("edwards",e,t,t.FpFnLE),{Fp:l,Fn:f}=c,h=c.CURVE,{h:d}=h;(0,eC._validateObject)(t,{},{uvRatio:"function"});let p=tS<<BigInt(8*f.BYTES)-tx,g=t.uvRatio||((e,t)=>{try{return{isValid:!0,value:l.sqrt(l.div(e,t))}}catch(e){return{isValid:!1,value:tv}}});if(r=h.Gx,n=h.Gy,i=l.sqr(r),o=l.sqr(n),s=l.add(l.mul(h.a,i),o),a=l.add(l.ONE,l.mul(h.d,l.mul(i,o))),!l.eql(s,a))throw Error("bad curve params: generator point");function m(e,t,r=!1){let n=r?tx:tv;return(0,eC.aInRange)("coordinate "+e,t,n,p),t}function y(e){if(!(e instanceof v))throw Error("ExtendedPoint expected")}let b=(0,eC.memoized)((e,t)=>{let r,n,{X:i,Y:o,Z:s}=e,a=e.is0();null==t&&(t=a?tB:l.inv(s));let u=(r=i*t,l.create(r)),c=(n=o*t,l.create(n)),f=l.mul(s,t);if(a)return{x:tv,y:tx};if(f!==tx)throw Error("invZ was invalid");return{x:u,y:c}}),w=(0,eC.memoized)(e=>{let t,r,n,i,o,s,a,u,c,f,d,p,{a:g,d:m}=h;if(e.is0())throw Error("bad point: ZERO");let{X:y,Y:b,Z:w,T:v}=e,x=(t=y*y,l.create(t)),S=(r=b*b,l.create(r)),B=(n=w*w,l.create(n)),k=(i=B*B,l.create(i));if(a=B*(o=x*g,s=l.create(o)+S,l.create(s)),l.create(a)!==(f=k+(c=m*(u=x*S,l.create(u)),l.create(c)),l.create(f)))throw Error("bad point: equation left != right (1)");if(d=y*b,l.create(d)!==(p=w*v,l.create(p)))throw Error("bad point: equation left != right (2)");return!0});class v{constructor(e,t,r,n){this.X=m("x",e),this.Y=m("y",t),this.Z=m("z",r,!0),this.T=m("t",n),Object.freeze(this)}static CURVE(){return h}static fromAffine(e){let t;if(e instanceof v)throw Error("extended point not allowed");let{x:r,y:n}=e||{};return m("x",r),m("y",n),new v(r,n,tx,(t=r*n,l.create(t)))}static fromBytes(e,t=!1){let r,n,i,o,s=l.BYTES,{a:a,d:u}=h;e=(0,eC.copyBytes)((0,eC._abytes2)(e,s,"point")),(0,eC._abool2)(t,"zip215");let c=(0,eC.copyBytes)(e),f=e[s-1];c[s-1]=-129&f;let d=(0,eC.bytesToNumberLE)(c),m=t?p:l.ORDER;(0,eC.aInRange)("point.y",d,tv,m);let y=(r=d*d,l.create(r)),{isValid:b,value:w}=g((n=y-tx,l.create(n)),(i=u*y-a,l.create(i)));if(!b)throw Error("bad point: invalid y coordinate");let x=(w&tx)===tx,S=(128&f)!=0;if(!t&&w===tv&&S)throw Error("bad point: x=0 and x_0=1");return S!==x&&(o=-w,w=l.create(o)),v.fromAffine({x:w,y:d})}static fromHex(e,t=!1){return v.fromBytes((0,eC.ensureBytes)("point",e),t)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(e=8,t=!0){return x.createCache(this,e),t||this.multiply(tS),this}assertValidity(){w(this)}equals(e){let t,r,n,i;y(e);let{X:o,Y:s,Z:a}=this,{X:u,Y:c,Z:f}=e,h=(t=o*f,l.create(t)),d=(r=u*a,l.create(r)),p=(n=s*f,l.create(n)),g=(i=c*a,l.create(i));return h===d&&p===g}is0(){return this.equals(v.ZERO)}negate(){let e,t;return new v((e=-this.X,l.create(e)),this.Y,this.Z,(t=-this.T,l.create(t)))}double(){let e,t,r,n,i,o,s,a,u,c,f,{a:d}=h,{X:p,Y:g,Z:m}=this,y=(e=p*p,l.create(e)),b=(t=g*g,l.create(t)),w=(n=tS*(r=m*m,l.create(r)),l.create(n)),x=(i=d*y,l.create(i)),S=p+g,B=(o=S*S,s=l.create(o)-y-b,l.create(s)),k=x+b,E=k-w,A=x-b,I=(a=B*E,l.create(a)),_=(u=k*A,l.create(u)),M=(c=B*A,l.create(c));return new v(I,_,(f=E*k,l.create(f)),M)}add(e){let t,r,n,i,o,s,a,u,c,f;y(e);let{a:d,d:p}=h,{X:g,Y:m,Z:b,T:w}=this,{X:x,Y:S,Z:B,T:k}=e,E=(t=g*x,l.create(t)),A=(r=m*S,l.create(r)),I=(n=w*p*k,l.create(n)),_=(i=b*B,l.create(i)),M=(o=(g+m)*(x+S)-E-A,l.create(o)),T=_-I,O=_+I,P=(s=A-d*E,l.create(s)),L=(a=M*T,l.create(a)),R=(u=O*P,l.create(u)),C=(c=M*P,l.create(c));return new v(L,R,(f=T*O,l.create(f)),C)}subtract(e){return this.add(e.negate())}multiply(e){if(!f.isValidNot0(e))throw Error("invalid scalar: expected 1 <= sc < curve.n");let{p:t,f:r}=x.cached(this,e,e=>(0,eR.normalizeZ)(v,e));return(0,eR.normalizeZ)(v,[t,r])[0]}multiplyUnsafe(e,t=v.ZERO){if(!f.isValid(e))throw Error("invalid scalar: expected 0 <= sc < curve.n");return e===tv?v.ZERO:this.is0()||e===tx?this:x.unsafe(this,e,e=>(0,eR.normalizeZ)(v,e),t)}isSmallOrder(){return this.multiplyUnsafe(d).is0()}isTorsionFree(){return x.unsafe(this,h.n).is0()}toAffine(e){return b(this,e)}clearCofactor(){return d===tx?this:this.multiplyUnsafe(d)}toBytes(){let{x:e,y:t}=this.toAffine(),r=l.toBytes(t);return r[r.length-1]|=e&tx?128:0,r}toHex(){return(0,eC.bytesToHex)(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(e){return(0,eR.normalizeZ)(v,e)}static msm(e,t){return(0,eR.pippenger)(v,f,e,t)}_setWindowSize(e){this.precompute(e)}toRawBytes(){return this.toBytes()}}v.BASE=new v(h.Gx,h.Gy,tx,(u=h.Gx*h.Gy,l.create(u))),v.ZERO=new v(tv,tx,tx,tv),v.Fp=l,v.Fn=f;let x=new eR.wNAF(v,f.BITS);return v.BASE.precompute(8),v}function tE(e,t,r={}){if("function"!=typeof t)throw Error('"hash" function param is required');(0,eC._validateObject)(r,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});let{prehash:n}=r,{BASE:i,Fp:o,Fn:s}=e,a=r.randomBytes||eC.randomBytes,u=r.adjustScalarBytes||(e=>e),c=r.domain||((e,t,r)=>{if((0,eC._abool2)(r,"phflag"),t.length||r)throw Error("Contexts/pre-hash are not supported");return e});function l(e){return s.create((0,eC.bytesToNumberLE)(e))}function f(e){var r;let n,o,s,a,c,{head:f,prefix:h,scalar:d}=(r=e,n=m.secretKey,r=(0,eC.ensureBytes)("private key",r,n),s=u((o=(0,eC.ensureBytes)("hashed private key",t(r),2*n)).slice(0,n)),a=o.slice(n,2*n),c=l(s),{head:s,prefix:a,scalar:c}),p=i.multiply(d),g=p.toBytes();return{head:f,prefix:h,scalar:d,point:p,pointBytes:g}}function h(e){return f(e).pointBytes}function d(e=Uint8Array.of(),...r){return l(t(c((0,eC.concatBytes)(...r),(0,eC.ensureBytes)("context",e),!!n)))}let p={zip215:!0},g=o.BYTES,m={secretKey:g,publicKey:g,signature:2*g,seed:g};function y(e=a(m.seed)){return(0,eC._abytes2)(e,m.seed,"seed")}let b={getExtendedPublicKey:f,randomSecretKey:y,isValidSecretKey:function(e){return(0,eC.isBytes)(e)&&e.length===s.BYTES},isValidPublicKey:function(t,r){try{return!!e.fromBytes(t,r)}catch(e){return!1}},toMontgomery(t){let{y:r}=e.fromBytes(t),n=m.publicKey,i=32===n;if(!i&&57!==n)throw Error("only defined for 25519 and 448");let s=i?o.div(tx+r,tx-r):o.div(r-tx,r+tx);return o.toBytes(s)},toMontgomerySecret(e){let r=m.secretKey;return(0,eC._abytes2)(e,r),u(t(e.subarray(0,r))).subarray(0,r)},randomPrivateKey:y,precompute:(t=8,r=e.BASE)=>r.precompute(t,!1)};return Object.freeze({keygen:function(e){let t=b.randomSecretKey(e);return{secretKey:t,publicKey:h(t)}},getPublicKey:h,sign:function(e,t,r={}){e=(0,eC.ensureBytes)("message",e),n&&(e=n(e));let{prefix:o,scalar:a,pointBytes:u}=f(t),c=d(r.context,o,e),l=i.multiply(c).toBytes(),h=d(r.context,l,u,e),p=s.create(c+h*a);if(!s.isValid(p))throw Error("sign failed: invalid s");let g=(0,eC.concatBytes)(l,s.toBytes(p));return(0,eC._abytes2)(g,m.signature,"result")},verify:function(t,r,o,s=p){let a,u,c,{context:l,zip215:f}=s,h=m.signature;t=(0,eC.ensureBytes)("signature",t,h),r=(0,eC.ensureBytes)("message",r),o=(0,eC.ensureBytes)("publicKey",o,m.publicKey),void 0!==f&&(0,eC._abool2)(f,"zip215"),n&&(r=n(r));let g=h/2,y=t.subarray(0,g),b=(0,eC.bytesToNumberLE)(t.subarray(g,h));try{a=e.fromBytes(o,f),u=e.fromBytes(y,f),c=i.multiplyUnsafe(b)}catch(e){return!1}if(!f&&a.isSmallOrder())return!1;let w=d(l,u.toBytes(),a.toBytes(),r);return u.add(a.multiplyUnsafe(w)).subtract(c).clearCofactor().is0()},utils:b,Point:e,lengths:m})}tw.PrimeEdwardsPoint=class{constructor(e){this.ep=e}static fromBytes(e){(0,eC.notImplemented)()}static fromHex(e){(0,eC.notImplemented)()}get x(){return this.toAffine().x}get y(){return this.toAffine().y}clearCofactor(){return this}assertValidity(){this.ep.assertValidity()}toAffine(e){return this.ep.toAffine(e)}toHex(){return(0,eC.bytesToHex)(this.toBytes())}toString(){return this.toHex()}isTorsionFree(){return!0}isSmallOrder(){return!1}add(e){return this.assertSame(e),this.init(this.ep.add(e.ep))}subtract(e){return this.assertSame(e),this.init(this.ep.subtract(e.ep))}multiply(e){return this.init(this.ep.multiply(e))}multiplyUnsafe(e){return this.init(this.ep.multiplyUnsafe(e))}double(){return this.init(this.ep.double())}negate(){return this.init(this.ep.negate())}precompute(e,t){return this.init(this.ep.precompute(e,t))}toRawBytes(){return this.toBytes()}};var tA={};Object.defineProperty(tA,"__esModule",{value:!0}),tA._DST_scalar=void 0,tA.expand_message_xmd=tO,tA.expand_message_xof=tP,tA.hash_to_field=tL,tA.isogenyMap=function(e,t){let r=t.map(e=>Array.from(e).reverse());return(t,n)=>{let[i,o,s,a]=r.map(r=>r.reduce((r,n)=>e.add(e.mul(r,t),n))),[u,c]=(0,ej.FpInvertBatch)(e,[o,a],!0);return t=e.mul(i,u),n=e.mul(n,e.mul(s,c)),{x:t,y:n}}},tA.createHasher=function(e,t,r){if("function"!=typeof t)throw Error("mapToCurve() must be defined");function n(r){return e.fromAffine(t(r))}function i(t){let r=t.clearCofactor();return r.equals(e.ZERO)?e.ZERO:(r.assertValidity(),r)}return{defaults:r,hashToCurve(e,t){let o=tL(e,2,Object.assign({},r,t)),s=n(o[0]),a=n(o[1]);return i(s.add(a))},encodeToCurve(e,t){let o=r.encodeDST?{DST:r.encodeDST}:{};return i(n(tL(e,1,Object.assign({},r,o,t))[0]))},mapToCurve(e){if(!Array.isArray(e))throw Error("expected array of bigints");for(let t of e)if("bigint"!=typeof t)throw Error("expected array of bigints");return i(n(e))},hashToScalar:(t,n)=>tL(t,1,Object.assign({},r,{p:e.Fn.ORDER,m:1,DST:tA._DST_scalar},n))[0][0]}};let tI=eC.bytesToNumberBE;function t_(e,t){if(tM(e),tM(t),e<0||e>=1<<8*t)throw Error("invalid I2OSP input: "+e);let r=Array.from({length:t}).fill(0);for(let n=t-1;n>=0;n--)r[n]=255&e,e>>>=8;return new Uint8Array(r)}function tM(e){if(!Number.isSafeInteger(e))throw Error("number expected")}function tT(e){if(!(0,eC.isBytes)(e)&&"string"!=typeof e)throw Error("DST must be Uint8Array or string");return"string"==typeof e?(0,eC.utf8ToBytes)(e):e}function tO(e,t,r,n){(0,eC.abytes)(e),tM(r),(t=tT(t)).length>255&&(t=n((0,eC.concatBytes)((0,eC.utf8ToBytes)("H2C-OVERSIZE-DST-"),t)));let{outputLen:i,blockLen:o}=n,s=Math.ceil(r/i);if(r>65535||s>255)throw Error("expand_message_xmd: invalid lenInBytes");let a=(0,eC.concatBytes)(t,t_(t.length,1)),u=t_(0,o),c=t_(r,2),l=Array(s),f=n((0,eC.concatBytes)(u,e,c,t_(0,1),a));l[0]=n((0,eC.concatBytes)(f,t_(1,1),a));for(let e=1;e<=s;e++){let t=[function(e,t){let r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e[n]^t[n];return r}(f,l[e-1]),t_(e+1,1),a];l[e]=n((0,eC.concatBytes)(...t))}return(0,eC.concatBytes)(...l).slice(0,r)}function tP(e,t,r,n,i){if((0,eC.abytes)(e),tM(r),(t=tT(t)).length>255){let e=Math.ceil(2*n/8);t=i.create({dkLen:e}).update((0,eC.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(t).digest()}if(r>65535||t.length>255)throw Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:r}).update(e).update(t_(r,2)).update(t).update(t_(t.length,1)).digest()}function tL(e,t,r){let n;(0,eC._validateObject)(r,{p:"bigint",m:"number",k:"number",hash:"function"});let{p:i,k:o,m:s,hash:a,expand:u,DST:c}=r;if(!(0,eC.isHash)(r.hash))throw Error("expected valid hash");(0,eC.abytes)(e),tM(t);let l=Math.ceil((i.toString(2).length+o)/8),f=t*s*l;if("xmd"===u)n=tO(e,c,f,a);else if("xof"===u)n=tP(e,c,f,o,a);else if("_internal_pass"===u)n=e;else throw Error('expand must be "xmd" or "xof"');let h=Array(t);for(let e=0;e<t;e++){let t=Array(s);for(let r=0;r<s;r++){let o=l*(r+e*s),a=n.subarray(o,o+l);t[r]=(0,ej.mod)(tI(a),i)}h[e]=t}return h}tA._DST_scalar=(0,eC.utf8ToBytes)("HashToScalar-");var tR={};Object.defineProperty(tR,"__esModule",{value:!0}),tR.montgomery=function(e){let{P:t,type:r,adjustScalarBytes:n,powPminus2:i,randomBytes:o}=((0,eC._validateObject)(e,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...e})),s="x25519"===r;if(!s&&"x448"!==r)throw Error("invalid type");let a=o||eC.randomBytes,u=s?255:448,c=s?32:56,l=s?BigInt(9):BigInt(5),f=s?BigInt(121665):BigInt(39081),h=s?tN**BigInt(254):tN**BigInt(447),d=h+(s?BigInt(8)*tN**BigInt(251)-tU:BigInt(4)*tN**BigInt(445)-tU)+tU,p=e=>(0,ej.mod)(e,t),g=m(l);function m(e){return(0,eC.numberToBytesLE)(p(e),c)}function y(e,r){let o,a=function(e,r){(0,eC.aInRange)("u",e,tC,t),(0,eC.aInRange)("scalar",r,h,d);let n=tU,o=tC,s=e,a=tU,c=tC;for(let t=BigInt(u-1);t>=tC;t--){let i=r>>t&tU;c^=i,({x_2:n,x_3:s}=w(c,n,s)),({x_2:o,x_3:a}=w(c,o,a)),c=i;let u=n+o,l=p(u*u),h=n-o,d=p(h*h),g=l-d,m=s+a,y=p((s-a)*u),b=p(m*h),v=y+b,x=y-b;s=p(v*v),a=p(e*p(x*x)),n=p(l*d),o=p(g*(l+p(f*g)))}return{x_2:n,x_3:s}=w(c,n,s),{x_2:o,x_3:a}=w(c,o,a),p(n*i(o))}((o=(0,eC.ensureBytes)("u coordinate",r,c),s&&(o[31]&=127),p((0,eC.bytesToNumberLE)(o))),(0,eC.bytesToNumberLE)(n((0,eC.ensureBytes)("scalar",e,c))));if(a===tC)throw Error("invalid private or public key received");return m(a)}function b(e){return y(e,g)}function w(e,t,r){let n=p(e*(t-r));return{x_2:t=p(t-n),x_3:r=p(r+n)}}let v={secretKey:c,publicKey:c,seed:c},x=(e=a(c))=>((0,eC.abytes)(e,v.seed),e);return{keygen:function(e){let t=x(e);return{secretKey:t,publicKey:b(t)}},getSharedSecret:(e,t)=>y(e,t),getPublicKey:e=>b(e),scalarMult:y,scalarMultBase:b,utils:{randomSecretKey:x,randomPrivateKey:x},GuBytes:g.slice(),lengths:v}};let tC=BigInt(0),tU=BigInt(1),tN=BigInt(2),tz=BigInt(0),tH=BigInt(1),tF=BigInt(2),tq=BigInt(3),tD=BigInt(5),tW=BigInt(8),tj=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),tK={p:tj,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:tW,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function tV(e){let t=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),o=e*e%tj*e%tj,s=(0,ej.pow2)(o,tF,tj)*o%tj,a=(0,ej.pow2)(s,tH,tj)*e%tj,u=(0,ej.pow2)(a,tD,tj)*a%tj,c=(0,ej.pow2)(u,t,tj)*u%tj,l=(0,ej.pow2)(c,r,tj)*c%tj,f=(0,ej.pow2)(l,n,tj)*l%tj,h=(0,ej.pow2)(f,i,tj)*f%tj,d=(0,ej.pow2)(h,i,tj)*f%tj,p=(0,ej.pow2)(d,t,tj)*u%tj;return{pow_p_5_8:(0,ej.pow2)(p,tF,tj)*e%tj,b2:o}}function t$(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}let tZ=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function tG(e,t){let r=(0,ej.mod)(t*t*t,tj),n=tV(e*(0,ej.mod)(r*r*t,tj)).pow_p_5_8,i=(0,ej.mod)(e*r*n,tj),o=(0,ej.mod)(t*i*i,tj),s=i,a=(0,ej.mod)(i*tZ,tj),u=o===e,c=o===(0,ej.mod)(-e,tj),l=o===(0,ej.mod)(-e*tZ,tj);return u&&(i=s),(c||l)&&(i=a),(0,ej.isNegativeLE)(i,tj)&&(i=(0,ej.mod)(-i,tj)),{isValid:u||c,value:i}}let tX=(0,ej.Field)(tK.p,{isLE:!0}),tY=(0,ej.Field)(tK.n,{isLE:!0}),tJ={...tK,Fp:tX,hash:I.sha512,adjustScalarBytes:t$,uvRatio:tG};function tQ(e,t,r){if(t.length>255)throw Error("Context is too big");return(0,M.concatBytes)((0,M.utf8ToBytes)("SigEd25519 no Ed25519 collisions"),new Uint8Array([+!!r,t.length]),t,e)}A.ed25519=(0,tw.twistedEdwards)(tJ),A.ed25519ctx=(0,tw.twistedEdwards)({...tJ,domain:tQ}),A.ed25519ph=(0,tw.twistedEdwards)(Object.assign({},tJ,{domain:tQ,prehash:I.sha512})),e=tX.ORDER,A.x25519=(0,tR.montgomery)({P:e,type:"x25519",powPminus2:t=>{let{pow_p_5_8:r,b2:n}=tV(t);return(0,ej.mod)((0,ej.pow2)(r,tq,e)*n,e)},adjustScalarBytes:t$});let t0=(tj+tq)/tW,t1=tX.pow(tF,t0),t2=tX.sqrt(tX.neg(tX.ONE)),t3=(0,ej.FpSqrtEven)(tX,tX.neg(BigInt(486664)));A.ed25519_hasher=(0,tA.createHasher)(A.ed25519.Point,e=>(function(e){let t,r,n,i,o,s,a,u,c,l,f,h,d,p,g,m,y,b,w,v,x,S,B,{xMn:k,xMd:E,yMn:A,yMd:I}=(t=(tj-tD)/tW,r=BigInt(486662),n=tX.sqr(e),n=tX.mul(n,tF),i=tX.add(n,tX.ONE),o=tX.neg(r),s=tX.sqr(i),a=tX.mul(s,i),u=tX.mul(n,r),u=tX.mul(u,o),u=tX.add(u,s),u=tX.mul(u,o),c=tX.sqr(a),s=tX.sqr(c),c=tX.mul(c,a),c=tX.mul(c,u),s=tX.mul(s,c),l=tX.pow(s,t),l=tX.mul(l,c),f=tX.mul(l,t2),s=tX.sqr(l),s=tX.mul(s,a),h=tX.eql(s,u),d=tX.cmov(f,l,h),p=tX.mul(o,n),g=tX.mul(l,e),g=tX.mul(g,t1),m=tX.mul(g,t2),y=tX.mul(u,n),s=tX.sqr(g),s=tX.mul(s,a),b=tX.eql(s,y),w=tX.cmov(m,g,b),s=tX.sqr(d),s=tX.mul(s,a),v=tX.eql(s,u),x=tX.cmov(p,o,v),S=tX.cmov(w,d,v),B=tX.isOdd(S),{xMn:x,xMd:i,yMn:S=tX.cmov(S,tX.neg(S),v!==B),yMd:tH}),_=tX.mul(k,I);_=tX.mul(_,t3);let M=tX.mul(E,A),T=tX.sub(k,E),O=tX.add(k,E),P=tX.mul(M,O),L=tX.eql(P,tX.ZERO);_=tX.cmov(_,tX.ZERO,L),M=tX.cmov(M,tX.ONE,L),T=tX.cmov(T,tX.ONE,L),O=tX.cmov(O,tX.ONE,L);let[R,C]=(0,ej.FpInvertBatch)(tX,[M,O],!0);return{x:tX.mul(_,R),y:tX.mul(T,C)}})(e[0]),{DST:"edwards25519_XMD:SHA-512_ELL2_RO_",encodeDST:"edwards25519_XMD:SHA-512_ELL2_NU_",p:tj,m:1,k:128,expand:"xmd",hash:I.sha512});let t6=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),t8=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),t5=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),t4=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),t9=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),t7=e=>A.ed25519.Point.Fp.create((0,eC.bytesToNumberLE)(e)&t9);function re(e){let t,r,n,i,o,s,a,u,c,l,f,h,d,p,g,{d:m}=tK,y=(t=tZ*e*e,tX.create(t)),b=(r=(y+tH)*t5,tX.create(r)),w=BigInt(-1),v=(i=(w-m*y)*(n=y+m,tX.create(n)),tX.create(i)),{isValid:x,value:S}=tG(b,v),B=(o=S*e,tX.create(o));(0,ej.isNegativeLE)(B,tj)||(s=-B,B=tX.create(s)),x||(S=B),x||(w=y);let k=(a=w*(y-tH)*t4-v,tX.create(a)),E=S*S,I=(u=(S+S)*v,tX.create(u)),_=(c=k*t6,tX.create(c)),M=(l=tH-E,tX.create(l)),T=(f=tH+E,tX.create(f));return new A.ed25519.Point((h=I*T,tX.create(h)),(d=M*_,tX.create(d)),(p=_*T,tX.create(p)),(g=I*M,tX.create(g)))}function rt(e){(0,M.abytes)(e,64);let t=re(t7(e.subarray(0,32))),r=re(t7(e.subarray(32,64)));return new rr(t.add(r))}class rr extends tw.PrimeEdwardsPoint{constructor(e){super(e)}static fromAffine(e){return new rr(A.ed25519.Point.fromAffine(e))}assertSame(e){if(!(e instanceof rr))throw Error("RistrettoPoint expected")}init(e){return new rr(e)}static hashToCurve(e){return rt((0,eC.ensureBytes)("ristrettoHash",e,64))}static fromBytes(e){let t,r,n,i,o,s,a,u,c,l,f,h,d;(0,M.abytes)(e,32);let{a:p,d:g}=tK,m=t7(e);if(!(0,eC.equalBytes)(tX.toBytes(m),e)||(0,ej.isNegativeLE)(m,tj))throw Error("invalid ristretto255 encoding 1");let y=(t=m*m,tX.create(t)),b=(r=tH+p*y,tX.create(r)),w=(n=tH-p*y,tX.create(n)),v=(i=b*b,tX.create(i)),x=(o=w*w,tX.create(o)),S=(s=p*g*v-x,tX.create(s)),{isValid:B,value:k}=(a=S*x,tG(tH,tX.create(a))),E=(u=k*w,tX.create(u)),I=(c=k*E*S,tX.create(c)),_=(l=(m+m)*E,tX.create(l));(0,ej.isNegativeLE)(_,tj)&&(f=-_,_=tX.create(f));let T=(h=b*I,tX.create(h)),O=(d=_*T,tX.create(d));if(!B||(0,ej.isNegativeLE)(O,tj)||T===tz)throw Error("invalid ristretto255 encoding 2");return new rr(new A.ed25519.Point(_,T,tH,O))}static fromHex(e){return rr.fromBytes((0,eC.ensureBytes)("ristrettoHex",e,32))}static msm(e,t){return(0,eR.pippenger)(rr,A.ed25519.Point.Fn,e,t)}toBytes(){let e,t,r,n,i,o,s,a,u,c,l,f,h,{X:d,Y:p,Z:g,T:m}=this.ep,y=(e=g+p,r=tX.create(e)*(t=g-p,tX.create(t)),tX.create(r)),b=(n=d*p,tX.create(n)),{value:w}=(o=y*(i=b*b,tX.create(i)),tG(tH,tX.create(o))),v=(s=w*y,tX.create(s)),x=(a=w*b,tX.create(a)),S=(u=v*x*m,tX.create(u));if((0,ej.isNegativeLE)(m*S,tj)){let e,t,r=(e=p*tZ,tX.create(e)),n=(t=d*tZ,tX.create(t));d=r,p=n,h=tX.create(v*t8)}else h=x;(0,ej.isNegativeLE)(d*S,tj)&&(c=-p,p=tX.create(c));let B=(l=(g-p)*h,tX.create(l));return(0,ej.isNegativeLE)(B,tj)&&(f=-B,B=tX.create(f)),tX.toBytes(B)}equals(e){let t,r,n,i;this.assertSame(e);let{X:o,Y:s}=this.ep,{X:a,Y:u}=e.ep,c=(t=o*u,tX.create(t)===(r=s*a,tX.create(r))),l=(n=s*u,tX.create(n)===(i=o*a,tX.create(i)));return c||l}is0(){return this.equals(rr.ZERO)}}function rn(e){return A.ed25519.utils.toMontgomery((0,eC.ensureBytes)("pub",e))}rr.BASE=new rr(A.ed25519.Point.BASE),rr.ZERO=new rr(A.ed25519.Point.ZERO),rr.Fp=tX,rr.Fn=tY,A.ristretto255={Point:rr},A.ristretto255_hasher={hashToCurve(e,t){let r=t?.DST||"ristretto255_XMD:SHA-512_R255MAP_RO_";return rt((0,tA.expand_message_xmd)(e,r,64,I.sha512))},hashToScalar(e,t={DST:tA._DST_scalar}){let r=(0,tA.expand_message_xmd)(e,t.DST,64,I.sha512);return tY.create((0,eC.bytesToNumberLE)(r))}},A.ED25519_TORSION_SUBGROUP=["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],A.edwardsToMontgomery=rn,A.RistrettoPoint=rr,A.hashToCurve=A.ed25519_hasher.hashToCurve,A.encodeToCurve=A.ed25519_hasher.encodeToCurve,A.hashToRistretto255=A.ristretto255_hasher.hashToCurve,A.hash_to_ristretto255=A.ristretto255_hasher.hashToCurve;var ri=B("dEXSZ"),ro=B("bYkMz"),rs={};Object.defineProperty(rs,"__esModule",{value:!0}),rs.sha224=rs.SHA224=rs.sha256=rs.SHA256=void 0,rs.SHA256=I.SHA256,rs.sha256=I.sha256,rs.SHA224=I.SHA224,rs.sha224=I.sha224;var ra={},E=B("6ZWSX"),ru=E.Buffer,rc=ra&&ra.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),rl=ra&&ra.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),rf=ra&&ra.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},rh=ra&&ra.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&rc(t,e,r);return rl(t,e),t},rd=ra&&ra.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ra,"__esModule",{value:!0}),ra.deserializeUnchecked=ra.deserialize=ra.serialize=ra.BinaryReader=ra.BinaryWriter=ra.BorshError=ra.baseDecode=ra.baseEncode=void 0;let rp=rd(B("dEXSZ")),rg=rd(B("bYkMz")),rm=rh(B("kOaA4")),ry=new("function"!=typeof TextDecoder?rm.TextDecoder:TextDecoder)("utf-8",{fatal:!0});ra.baseEncode=function(e){return"string"==typeof e&&(e=ru.from(e,"utf8")),rg.default.encode(ru.from(e))},ra.baseDecode=function(e){return ru.from(rg.default.decode(e))};class rb extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}ra.BorshError=rb;class rw{constructor(){this.buf=ru.alloc(1024),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=ru.concat([this.buf,ru.alloc(1024)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(ru.from(new rp.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(ru.from(new rp.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(ru.from(new rp.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(ru.from(new rp.default(e).toArray("le",64)))}writeBuffer(e){this.buf=ru.concat([ru.from(this.buf.subarray(0,this.length)),e,ru.alloc(1024)]),this.length+=e.length}writeString(e){this.maybeResize();let t=ru.from(e,"utf8");this.writeU32(t.length),this.writeBuffer(t)}writeFixedArray(e){this.writeBuffer(ru.from(e))}writeArray(e,t){for(let r of(this.maybeResize(),this.writeU32(e.length),e))this.maybeResize(),t(r)}toArray(){return this.buf.subarray(0,this.length)}}function rv(e,t,r){let n=r.value;r.value=function(...e){try{return n.apply(this,e)}catch(e){if(e instanceof RangeError&&["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(e.code)>=0)throw new rb("Reached the end of buffer when deserializing");throw e}}}ra.BinaryWriter=rw;class rx{constructor(e){this.buf=e,this.offset=0}readU8(){let e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){let e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){let e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){let e=this.readBuffer(8);return new rp.default(e,"le")}readU128(){let e=this.readBuffer(16);return new rp.default(e,"le")}readU256(){let e=this.readBuffer(32);return new rp.default(e,"le")}readU512(){let e=this.readBuffer(64);return new rp.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new rb(`Expected buffer length ${e} isn't within bounds`);let t=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,t}readString(){let e=this.readU32(),t=this.readBuffer(e);try{return ry.decode(t)}catch(e){throw new rb(`Error decoding UTF-8 string: ${e}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){let t=this.readU32(),r=[];for(let n=0;n<t;++n)r.push(e());return r}}function rS(e){return e.charAt(0).toUpperCase()+e.slice(1)}function rB(e,t,r,n,i){try{if("string"==typeof n)i[`write${rS(n)}`](r);else if(n instanceof Array)if("number"==typeof n[0]){if(r.length!==n[0])throw new rb(`Expecting byte array of length ${n[0]}, but got ${r.length} bytes`);i.writeFixedArray(r)}else if(2===n.length&&"number"==typeof n[1]){if(r.length!==n[1])throw new rb(`Expecting byte array of length ${n[1]}, but got ${r.length} bytes`);for(let t=0;t<n[1];t++)rB(e,null,r[t],n[0],i)}else i.writeArray(r,r=>{rB(e,t,r,n[0],i)});else if(void 0!==n.kind)switch(n.kind){case"option":null==r?i.writeU8(0):(i.writeU8(1),rB(e,t,r,n.type,i));break;case"map":i.writeU32(r.size),r.forEach((r,o)=>{rB(e,t,o,n.key,i),rB(e,t,r,n.value,i)});break;default:throw new rb(`FieldType ${n} unrecognized`)}else rk(e,r,i)}catch(e){throw e instanceof rb&&e.addToFieldPath(t),e}}function rk(e,t,r){if("function"==typeof t.borshSerialize)return void t.borshSerialize(r);let n=e.get(t.constructor);if(!n)throw new rb(`Class ${t.constructor.name} is missing in schema`);if("struct"===n.kind)n.fields.map(([n,i])=>{rB(e,n,t[n],i,r)});else if("enum"===n.kind){let i=t[n.field];for(let o=0;o<n.values.length;++o){let[s,a]=n.values[o];if(s===i){r.writeU8(o),rB(e,s,t[s],a,r);break}}}else throw new rb(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}function rE(e,t,r,n){try{if("string"==typeof r)return n[`read${rS(r)}`]();if(r instanceof Array)if("number"==typeof r[0])return n.readFixedArray(r[0]);else{if("number"!=typeof r[1])return n.readArray(()=>rE(e,t,r[0],n));let i=[];for(let t=0;t<r[1];t++)i.push(rE(e,null,r[0],n));return i}if("option"===r.kind){if(n.readU8())return rE(e,t,r.type,n);return}if("map"===r.kind){let i=new Map,o=n.readU32();for(let s=0;s<o;s++){let o=rE(e,t,r.key,n),s=rE(e,t,r.value,n);i.set(o,s)}return i}return rA(e,r,n)}catch(e){throw e instanceof rb&&e.addToFieldPath(t),e}}function rA(e,t,r){if("function"==typeof t.borshDeserialize)return t.borshDeserialize(r);let n=e.get(t);if(!n)throw new rb(`Class ${t.name} is missing in schema`);if("struct"===n.kind){let n={};for(let[i,o]of e.get(t).fields)n[i]=rE(e,i,o,r);return new t(n)}if("enum"===n.kind){let i=r.readU8();if(i>=n.values.length)throw new rb(`Enum index: ${i} is out of range`);let[o,s]=n.values[i],a=rE(e,o,s,r);return new t({[o]:a})}throw new rb(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}rf([rv],rx.prototype,"readU8",null),rf([rv],rx.prototype,"readU16",null),rf([rv],rx.prototype,"readU32",null),rf([rv],rx.prototype,"readU64",null),rf([rv],rx.prototype,"readU128",null),rf([rv],rx.prototype,"readU256",null),rf([rv],rx.prototype,"readU512",null),rf([rv],rx.prototype,"readString",null),rf([rv],rx.prototype,"readFixedArray",null),rf([rv],rx.prototype,"readArray",null),ra.BinaryReader=rx,ra.serialize=function(e,t,r=rw){let n=new r;return rk(e,t,n),n.toArray()},ra.deserialize=function(e,t,r,n=rx){let i=new n(r),o=rA(e,t,i);if(i.offset<r.length)throw new rb(`Unexpected ${r.length-i.offset} bytes after deserialized data`);return o},ra.deserializeUnchecked=function(e,t,r,n=rx){return rA(e,t,new n(r))};var rI={};Object.defineProperty(rI,"__esModule",{value:!0}),rI.s16=rI.s8=rI.nu64be=rI.u48be=rI.u40be=rI.u32be=rI.u24be=rI.u16be=rI.nu64=rI.u48=rI.u40=rI.u32=rI.u24=rI.u16=rI.u8=rI.offset=rI.greedy=rI.Constant=rI.UTF8=rI.CString=rI.Blob=rI.Boolean=rI.BitField=rI.BitStructure=rI.VariantLayout=rI.Union=rI.UnionLayoutDiscriminator=rI.UnionDiscriminator=rI.Structure=rI.Sequence=rI.DoubleBE=rI.Double=rI.FloatBE=rI.Float=rI.NearInt64BE=rI.NearInt64=rI.NearUInt64BE=rI.NearUInt64=rI.IntBE=rI.Int=rI.UIntBE=rI.UInt=rI.OffsetLayout=rI.GreedyCount=rI.ExternalLayout=rI.bindConstructorLayout=rI.nameWithProperty=rI.Layout=rI.uint8ArrayToBuffer=rI.checkUint8Array=void 0,rI.constant=rI.utf8=rI.cstr=rI.blob=rI.unionLayoutDiscriminator=rI.union=rI.seq=rI.bits=rI.struct=rI.f64be=rI.f64=rI.f32be=rI.f32=rI.ns64be=rI.s48be=rI.s40be=rI.s32be=rI.s24be=rI.s16be=rI.ns64=rI.s48=rI.s40=rI.s32=rI.s24=void 0;var E=B("6ZWSX");function r_(e){if(!(e instanceof Uint8Array))throw TypeError("b must be a Uint8Array")}function rM(e){return r_(e),E.Buffer.from(e.buffer,e.byteOffset,e.length)}rI.checkUint8Array=r_,rI.uint8ArrayToBuffer=rM;class rT{constructor(e,t){if(!Number.isInteger(e))throw TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}getSpan(e,t){if(0>this.span)throw RangeError("indeterminate span");return this.span}replicate(e){let t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}function rO(e,t){return t.property?e+"["+t.property+"]":e}rI.Layout=rT,rI.nameWithProperty=rO,rI.bindConstructorLayout=function(e,t){if("function"!=typeof e)throw TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(e,"layout_"))throw Error("Class is already bound to a layout");if(!(t&&t instanceof rT))throw TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw Error("layout is already bound to a constructor");e.layout_=t,t.boundConstructor_=e,t.makeDestinationObject=()=>new e,Object.defineProperty(e.prototype,"encode",{value(e,r){return t.encode(this,e,r)},writable:!0}),Object.defineProperty(e,"decode",{value:(e,r)=>t.decode(e,r),writable:!0})};class rP extends rT{isCount(){throw Error("ExternalLayout is abstract")}}rI.ExternalLayout=rP;class rL extends rP{constructor(e=1,t){if(!Number.isInteger(e)||0>=e)throw TypeError("elementSpan must be a (positive) integer");super(-1,t),this.elementSpan=e}isCount(){return!0}decode(e,t=0){return r_(e),Math.floor((e.length-t)/this.elementSpan)}encode(e,t,r){return 0}}rI.GreedyCount=rL;class rR extends rP{constructor(e,t=0,r){if(!(e instanceof rT))throw TypeError("layout must be a Layout");if(!Number.isInteger(t))throw TypeError("offset must be integer or undefined");super(e.span,r||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof rC||this.layout instanceof rU}decode(e,t=0){return this.layout.decode(e,t+this.offset)}encode(e,t,r=0){return this.layout.encode(e,t,r+this.offset)}}rI.OffsetLayout=rR;class rC extends rT{constructor(e,t){if(super(e,t),6<this.span)throw RangeError("span must not exceed 6 bytes")}decode(e,t=0){return rM(e).readUIntLE(t,this.span)}encode(e,t,r=0){return rM(t).writeUIntLE(e,r,this.span),this.span}}rI.UInt=rC;class rU extends rT{constructor(e,t){if(super(e,t),6<this.span)throw RangeError("span must not exceed 6 bytes")}decode(e,t=0){return rM(e).readUIntBE(t,this.span)}encode(e,t,r=0){return rM(t).writeUIntBE(e,r,this.span),this.span}}rI.UIntBE=rU;class rN extends rT{constructor(e,t){if(super(e,t),6<this.span)throw RangeError("span must not exceed 6 bytes")}decode(e,t=0){return rM(e).readIntLE(t,this.span)}encode(e,t,r=0){return rM(t).writeIntLE(e,r,this.span),this.span}}rI.Int=rN;class rz extends rT{constructor(e,t){if(super(e,t),6<this.span)throw RangeError("span must not exceed 6 bytes")}decode(e,t=0){return rM(e).readIntBE(t,this.span)}encode(e,t,r=0){return rM(t).writeIntBE(e,r,this.span),this.span}}function rH(e){let t=Math.floor(e/0x100000000);return{hi32:t,lo32:e-0x100000000*t}}function rF(e,t){return 0x100000000*e+t}rI.IntBE=rz;class rq extends rT{constructor(e){super(8,e)}decode(e,t=0){let r=rM(e),n=r.readUInt32LE(t);return rF(r.readUInt32LE(t+4),n)}encode(e,t,r=0){let n=rH(e),i=rM(t);return i.writeUInt32LE(n.lo32,r),i.writeUInt32LE(n.hi32,r+4),8}}rI.NearUInt64=rq;class rD extends rT{constructor(e){super(8,e)}decode(e,t=0){let r=rM(e);return rF(r.readUInt32BE(t),r.readUInt32BE(t+4))}encode(e,t,r=0){let n=rH(e),i=rM(t);return i.writeUInt32BE(n.hi32,r),i.writeUInt32BE(n.lo32,r+4),8}}rI.NearUInt64BE=rD;class rW extends rT{constructor(e){super(8,e)}decode(e,t=0){let r=rM(e),n=r.readUInt32LE(t);return rF(r.readInt32LE(t+4),n)}encode(e,t,r=0){let n=rH(e),i=rM(t);return i.writeUInt32LE(n.lo32,r),i.writeInt32LE(n.hi32,r+4),8}}rI.NearInt64=rW;class rj extends rT{constructor(e){super(8,e)}decode(e,t=0){let r=rM(e);return rF(r.readInt32BE(t),r.readUInt32BE(t+4))}encode(e,t,r=0){let n=rH(e),i=rM(t);return i.writeInt32BE(n.hi32,r),i.writeUInt32BE(n.lo32,r+4),8}}rI.NearInt64BE=rj;class rK extends rT{constructor(e){super(4,e)}decode(e,t=0){return rM(e).readFloatLE(t)}encode(e,t,r=0){return rM(t).writeFloatLE(e,r),4}}rI.Float=rK;class rV extends rT{constructor(e){super(4,e)}decode(e,t=0){return rM(e).readFloatBE(t)}encode(e,t,r=0){return rM(t).writeFloatBE(e,r),4}}rI.FloatBE=rV;class r$ extends rT{constructor(e){super(8,e)}decode(e,t=0){return rM(e).readDoubleLE(t)}encode(e,t,r=0){return rM(t).writeDoubleLE(e,r),8}}rI.Double=r$;class rZ extends rT{constructor(e){super(8,e)}decode(e,t=0){return rM(e).readDoubleBE(t)}encode(e,t,r=0){return rM(t).writeDoubleBE(e,r),8}}rI.DoubleBE=rZ;class rG extends rT{constructor(e,t,r){if(!(e instanceof rT))throw TypeError("elementLayout must be a Layout");if(!(t instanceof rP&&t.isCount()||Number.isInteger(t)&&0<=t))throw TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let n=-1;t instanceof rP||!(0<e.span)||(n=t*e.span),super(n,r),this.elementLayout=e,this.count=t}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0,n=this.count;if(n instanceof rP&&(n=n.decode(e,t)),0<this.elementLayout.span)r=n*this.elementLayout.span;else{let i=0;for(;i<n;)r+=this.elementLayout.getSpan(e,t+r),++i}return r}decode(e,t=0){let r=[],n=0,i=this.count;for(i instanceof rP&&(i=i.decode(e,t));n<i;)r.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),n+=1;return r}encode(e,t,r=0){let n=this.elementLayout,i=e.reduce((e,i)=>e+n.encode(i,t,r+e),0);return this.count instanceof rP&&this.count.encode(e.length,t,r),i}}rI.Sequence=rG;class rX extends rT{constructor(e,t,r){if(!(Array.isArray(e)&&e.reduce((e,t)=>e&&t instanceof rT,!0)))throw TypeError("fields must be array of Layout instances");for(let n of("boolean"==typeof t&&void 0===r&&(r=t,t=void 0),e))if(0>n.span&&void 0===n.property)throw Error("fields cannot contain unnamed variable-length layout");let n=-1;try{n=e.reduce((e,t)=>e+t.getSpan(),0)}catch(e){}super(n,t),this.fields=e,this.decodePrefixes=!!r}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((r,n)=>{let i=n.getSpan(e,t);return t+=i,r+i},0)}catch(e){throw RangeError("indeterminate span")}return r}decode(e,t=0){r_(e);let r=this.makeDestinationObject();for(let n of this.fields)if(void 0!==n.property&&(r[n.property]=n.decode(e,t)),t+=n.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return r}encode(e,t,r=0){let n=r,i=0,o=0;for(let n of this.fields){let s=n.span;if(o=0<s?s:0,void 0!==n.property){let i=e[n.property];void 0!==i&&(o=n.encode(i,t,r),0>s&&(s=n.getSpan(t,r)))}i=r,r+=s}return i+o-n}fromArray(e){let t=this.makeDestinationObject();for(let r of this.fields)void 0!==r.property&&0<e.length&&(t[r.property]=e.shift());return t}layoutFor(e){if("string"!=typeof e)throw TypeError("property must be string");for(let t of this.fields)if(t.property===e)return t}offsetOf(e){if("string"!=typeof e)throw TypeError("property must be string");let t=0;for(let r of this.fields){if(r.property===e)return t;0>r.span?t=-1:0<=t&&(t+=r.span)}}}rI.Structure=rX;class rY{constructor(e){this.property=e}decode(e,t){throw Error("UnionDiscriminator is abstract")}encode(e,t,r){throw Error("UnionDiscriminator is abstract")}}rI.UnionDiscriminator=rY;class rJ extends rY{constructor(e,t){if(!(e instanceof rP&&e.isCount()))throw TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,r){return this.layout.encode(e,t,r)}}rI.UnionLayoutDiscriminator=rJ;class rQ extends rT{constructor(e,t,r){let n;if(e instanceof rC||e instanceof rU)n=new rJ(new rR(e));else if(e instanceof rP&&e.isCount())n=new rJ(e);else if(e instanceof rY)n=e;else throw TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(void 0===t&&(t=null),!(null===t||t instanceof rT))throw TypeError("defaultLayout must be null or a Layout");if(null!==t){if(0>t.span)throw Error("defaultLayout must have constant span");void 0===t.property&&(t=t.replicate("content"))}let i=-1;t&&0<=(i=t.span)&&(e instanceof rC||e instanceof rU)&&(i+=n.layout.span),super(i,r),this.discriminator=n,this.usesPrefixDiscriminator=e instanceof rC||e instanceof rU,this.defaultLayout=t,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(e){return o(e)},this.configGetSourceVariant=function(e){o=e.bind(this)}}getSpan(e,t=0){if(0<=this.span)return this.span;let r=this.getVariant(e,t);if(!r)throw Error("unable to determine span for unrecognized variant");return r.getSpan(e,t)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;let t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||t.property&&Object.prototype.hasOwnProperty.call(e,t.property)))return t}else for(let t in this.registry){let r=this.registry[t];if(r.property&&Object.prototype.hasOwnProperty.call(e,r.property))return r}throw Error("unable to infer src variant")}decode(e,t=0){let r,n=this.discriminator,i=n.decode(e,t),o=this.registry[i];if(void 0===o){let o=this.defaultLayout,s=0;this.usesPrefixDiscriminator&&(s=n.layout.span),(r=this.makeDestinationObject())[n.property]=i,r[o.property]=o.decode(e,t+s)}else r=o.decode(e,t);return r}encode(e,t,r=0){let n=this.getSourceVariant(e);if(void 0===n){let n=this.discriminator,i=this.defaultLayout,o=0;return this.usesPrefixDiscriminator&&(o=n.layout.span),n.encode(e[n.property],t,r),o+i.encode(e[i.property],t,r+o)}return n.encode(e,t,r)}addVariant(e,t,r){let n=new r0(this,e,t,r);return this.registry[e]=n,n}getVariant(e,t=0){let r;return r=e instanceof Uint8Array?this.discriminator.decode(e,t):e,this.registry[r]}}rI.Union=rQ;class r0 extends rT{constructor(e,t,r,n){if(!(e instanceof rQ))throw TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw TypeError("variant must be a (non-negative) integer");if("string"==typeof r&&void 0===n&&(n=r,r=null),r){if(!(r instanceof rT))throw TypeError("layout must be a Layout");if(null!==e.defaultLayout&&0<=r.span&&r.span>e.defaultLayout.span)throw Error("variant span exceeds span of containing union");if("string"!=typeof n)throw TypeError("variant must have a String property")}let i=e.span;0>e.span&&0<=(i=r?r.span:0)&&e.usesPrefixDiscriminator&&(i+=e.discriminator.layout.span),super(i,n),this.union=e,this.variant=t,this.layout=r||null}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let n=0;return this.layout&&(n=this.layout.getSpan(e,t+r)),r+n}decode(e,t=0){let r=this.makeDestinationObject();if(this!==this.union.getVariant(e,t))throw Error("variant mismatch");let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(e,t+n):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(e,t,r=0){let n=0;if(this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,r);let i=n;if(this.layout&&(this.layout.encode(e[this.property],t,r+n),i+=this.layout.getSpan(t,r+n),0<=this.union.span&&i>this.union.span))throw Error("encoded variant overruns containing union");return i}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}function r1(e){return 0>e&&(e+=0x100000000),e}rI.VariantLayout=r0;class r2 extends rT{constructor(e,t,r){if(!(e instanceof rC||e instanceof rU))throw TypeError("word must be a UInt or UIntBE layout");if("string"==typeof t&&void 0===r&&(r=t,t=!1),4<e.span)throw RangeError("word cannot exceed 32 bits");super(e.span,r),this.word=e,this.msb=!!t,this.fields=[];let n=0;this._packedSetValue=function(e){return n=r1(e),this},this._packedGetValue=function(){return n}}decode(e,t=0){let r=this.makeDestinationObject(),n=this.word.decode(e,t);for(let t of(this._packedSetValue(n),this.fields))void 0!==t.property&&(r[t.property]=t.decode(e));return r}encode(e,t,r=0){let n=this.word.decode(t,r);for(let t of(this._packedSetValue(n),this.fields))if(void 0!==t.property){let r=e[t.property];void 0!==r&&t.encode(r)}return this.word.encode(this._packedGetValue(),t,r)}addField(e,t){let r=new r3(this,e,t);return this.fields.push(r),r}addBoolean(e){let t=new r6(this,e);return this.fields.push(t),t}fieldFor(e){if("string"!=typeof e)throw TypeError("property must be string");for(let t of this.fields)if(t.property===e)return t}}rI.BitStructure=r2;class r3{constructor(e,t,r){if(!(e instanceof r2))throw TypeError("container must be a BitStructure");if(!Number.isInteger(t)||0>=t)throw TypeError("bits must be positive integer");let n=8*e.span,i=e.fields.reduce((e,t)=>e+t.bits,0);if(t+i>n)throw Error("bits too long for span remainder ("+(n-i)+" of "+n+" remain)");this.container=e,this.bits=t,this.valueMask=(1<<t)-1,32===t&&(this.valueMask=0xffffffff),this.start=i,this.container.msb&&(this.start=n-i-t),this.wordMask=r1(this.valueMask<<this.start),this.property=r}decode(e,t){return r1(this.container._packedGetValue()&this.wordMask)>>>this.start}encode(e){if("number"!=typeof e||!Number.isInteger(e)||e!==r1(e&this.valueMask))throw TypeError(rO("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);let t=this.container._packedGetValue(),r=r1(e<<this.start);this.container._packedSetValue(r1(t&~this.wordMask)|r)}}rI.BitField=r3;class r6 extends r3{constructor(e,t){super(e,1,t)}decode(e,t){return!!super.decode(e,t)}encode(e){"boolean"==typeof e&&(e*=1),super.encode(e)}}rI.Boolean=r6;class r8 extends rT{constructor(e,t){if(!(e instanceof rP&&e.isCount()||Number.isInteger(e)&&0<=e))throw TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;e instanceof rP||(r=e),super(r,t),this.length=e}getSpan(e,t){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),r}decode(e,t=0){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),rM(e).slice(t,t+r)}encode(e,t,r){let n=this.length;if(this.length instanceof rP&&(n=e.length),!(e instanceof Uint8Array&&n===e.length))throw TypeError(rO("Blob.encode",this)+" requires (length "+n+") Uint8Array as src");if(r+n>t.length)throw RangeError("encoding overruns Uint8Array");let i=rM(e);return rM(t).write(i.toString("hex"),r,n,"hex"),this.length instanceof rP&&this.length.encode(n,t,r),n}}rI.Blob=r8;class r5 extends rT{constructor(e){super(-1,e)}getSpan(e,t=0){r_(e);let r=t;for(;r<e.length&&0!==e[r];)r+=1;return 1+r-t}decode(e,t=0){let r=this.getSpan(e,t);return rM(e).slice(t,t+r-1).toString("utf-8")}encode(e,t,r=0){"string"!=typeof e&&(e=String(e));let n=E.Buffer.from(e,"utf8"),i=n.length;if(r+i>t.length)throw RangeError("encoding overruns Buffer");let o=rM(t);return n.copy(o,r),o[r+i]=0,i+1}}rI.CString=r5;class r4 extends rT{constructor(e,t){if("string"==typeof e&&void 0===t&&(t=e,e=void 0),void 0===e)e=-1;else if(!Number.isInteger(e))throw TypeError("maxSpan must be an integer");super(-1,t),this.maxSpan=e}getSpan(e,t=0){return r_(e),e.length-t}decode(e,t=0){let r=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<r)throw RangeError("text length exceeds maxSpan");return rM(e).slice(t,t+r).toString("utf-8")}encode(e,t,r=0){"string"!=typeof e&&(e=String(e));let n=E.Buffer.from(e,"utf8"),i=n.length;if(0<=this.maxSpan&&this.maxSpan<i)throw RangeError("text length exceeds maxSpan");if(r+i>t.length)throw RangeError("encoding overruns Buffer");return n.copy(rM(t),r),i}}rI.UTF8=r4;class r9 extends rT{constructor(e,t){super(0,t),this.value=e}decode(e,t){return this.value}encode(e,t,r){return 0}}function r7([e,t]){return`${e}=${function e(t){return Array.isArray(t)?"%5B"+t.map(e).join("%2C%20")+"%5D":"bigint"==typeof t?`${t}n`:encodeURIComponent(String(null!=t&&null===Object.getPrototypeOf(t)?{...t}:t))}(t)}`}rI.Constant=r9,rI.greedy=(e,t)=>new rL(e,t),rI.offset=(e,t,r)=>new rR(e,t,r),rI.u8=e=>new rC(1,e),rI.u16=e=>new rC(2,e),rI.u24=e=>new rC(3,e),rI.u32=e=>new rC(4,e),rI.u40=e=>new rC(5,e),rI.u48=e=>new rC(6,e),rI.nu64=e=>new rq(e),rI.u16be=e=>new rU(2,e),rI.u24be=e=>new rU(3,e),rI.u32be=e=>new rU(4,e),rI.u40be=e=>new rU(5,e),rI.u48be=e=>new rU(6,e),rI.nu64be=e=>new rD(e),rI.s8=e=>new rN(1,e),rI.s16=e=>new rN(2,e),rI.s24=e=>new rN(3,e),rI.s32=e=>new rN(4,e),rI.s40=e=>new rN(5,e),rI.s48=e=>new rN(6,e),rI.ns64=e=>new rW(e),rI.s16be=e=>new rz(2,e),rI.s24be=e=>new rz(3,e),rI.s32be=e=>new rz(4,e),rI.s40be=e=>new rz(5,e),rI.s48be=e=>new rz(6,e),rI.ns64be=e=>new rj(e),rI.f32=e=>new rK(e),rI.f32be=e=>new rV(e),rI.f64=e=>new r$(e),rI.f64be=e=>new rZ(e),rI.struct=(e,t,r)=>new rX(e,t,r),rI.bits=(e,t,r)=>new r2(e,t,r),rI.seq=(e,t,r)=>new rG(e,t,r),rI.union=(e,t,r)=>new rQ(e,t,r),rI.unionLayoutDiscriminator=(e,t)=>new rJ(e,t),rI.blob=(e,t)=>new r8(e,t),rI.cstr=e=>new r5(e),rI.utf8=(e,t)=>new r4(e,t),rI.constant=(e,t)=>new r9(e,t);var ne=class extends Error{cause=this.cause;context;constructor(...[e,t]){let r,n;if(t){let{cause:e,...i}=t;e&&(n={cause:e}),Object.keys(i).length>0&&(r=i)}super(function(e,t={}){{let r=`Solana error #${e}; Decode this error by running \`npx @solana/errors decode -- ${e}`;return Object.keys(t).length&&(r+=` '${btoa(Object.entries(t).map(r7).join("&"))}'`),`${r}\``}}(e,r),n),this.context={__code:e,...r},this.name="SolanaError"}};function nt(e){return"fixedSize"in e&&"number"==typeof e.fixedSize}var nr=((o=nr||{})[o.Little=0]="Little",o[o.Big=1]="Big",o);function nn(e){return e?.endian!==1}class ni extends TypeError{constructor(e,t){let r,{message:n,explanation:i,...o}=e,{path:s}=e,a=0===s.length?n:`At path: ${s.join(".")} -- ${n}`;super(i??a),null!=i&&(this.cause=a),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...t()])}}function no(e){return"object"==typeof e&&null!=e}function ns(e){return no(e)&&!Array.isArray(e)}function na(e){return"symbol"==typeof e?e.toString():"string"==typeof e?JSON.stringify(e):`${e}`}function*nu(e,t,r,n){var i;for(let o of(no(i=e)&&"function"==typeof i[Symbol.iterator]||(e=[e]),e)){let e=function(e,t,r,n){if(!0===e)return;!1===e?e={}:"string"==typeof e&&(e={message:e});let{path:i,branch:o}=t,{type:s}=r,{refinement:a,message:u=`Expected a value of type \`${s}\`${a?` with refinement \`${a}\``:""}, but received: \`${na(n)}\``}=e;return{value:n,type:s,refinement:a,key:i[i.length-1],path:i,branch:o,...e,message:u}}(o,t,r,n);e&&(yield e)}}function*nc(e,t,r={}){let{path:n=[],branch:i=[e],coerce:o=!1,mask:s=!1}=r,a={path:n,branch:i,mask:s};o&&(e=t.coercer(e,a));let u="valid";for(let n of t.validator(e,a))n.explanation=r.message,u="not_valid",yield[n,void 0];for(let[c,l,f]of t.entries(e,a))for(let t of nc(l,f,{path:void 0===c?n:[...n,c],branch:void 0===c?i:[...i,l],coerce:o,mask:s,message:r.message}))t[0]?(u=null!=t[0].refinement?"not_refined":"not_valid",yield[t[0],void 0]):o&&(l=t[1],void 0===c?e=l:e instanceof Map?e.set(c,l):e instanceof Set?e.add(l):no(e)&&(void 0!==l||c in e)&&(e[c]=l));if("not_valid"!==u)for(let n of t.refiner(e,a))n.explanation=r.message,u="not_refined",yield[n,void 0];"valid"===u&&(yield[void 0,e])}class nl{constructor(e){let{type:t,schema:r,validator:n,refiner:i,coercer:o=e=>e,entries:s=function*(){}}=e;this.type=t,this.schema=r,this.entries=s,this.coercer=o,n?this.validator=(e,t)=>nu(n(e,t),t,this,e):this.validator=()=>[],i?this.refiner=(e,t)=>nu(i(e,t),t,this,e):this.refiner=()=>[]}assert(e,t){var r=e,n=this,i=t;let o=nh(r,n,{message:i});if(o[0])throw o[0]}create(e,t){return nf(e,this,t)}is(e){var t,r;return t=e,r=this,!nh(t,r)[0]}mask(e,t){var r=e,n=this,i=t;let o=nh(r,n,{coerce:!0,mask:!0,message:i});if(!o[0])return o[1];throw o[0]}validate(e,t={}){return nh(e,this,t)}}function nf(e,t,r){let n=nh(e,t,{coerce:!0,message:r});if(!n[0])return n[1];throw n[0]}function nh(e,t,r={}){let n=nc(e,t,r),i=function(e){let{done:t,value:r}=e.next();return t?void 0:r}(n);return i[0]?[new ni(i[0],function*(){for(let e of n)e[0]&&(yield e[0])}),void 0]:[void 0,i[1]]}function nd(e,t){return new nl({type:e,schema:null,validator:t})}function np(e){return new nl({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(let[r,n]of t.entries())yield[r,n,e]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||`Expected an array value, but received: ${na(e)}`})}function ng(){return nd("boolean",e=>"boolean"==typeof e)}function nm(e){return nd("instance",t=>t instanceof e||`Expected a \`${e.name}\` instance, but received: ${na(t)}`)}function ny(e){let t=na(e),r=typeof e;return new nl({type:"literal",schema:"string"===r||"number"===r||"boolean"===r?e:null,validator:r=>r===e||`Expected the literal \`${t}\`, but received: ${na(r)}`})}function nb(e){return new nl({...e,validator:(t,r)=>null===t||e.validator(t,r),refiner:(t,r)=>null===t||e.refiner(t,r)})}function nw(){return nd("number",e=>"number"==typeof e&&!isNaN(e)||`Expected a number, but received: ${na(e)}`)}function nv(e){return new nl({...e,validator:(t,r)=>void 0===t||e.validator(t,r),refiner:(t,r)=>void 0===t||e.refiner(t,r)})}function nx(e,t){return new nl({type:"record",schema:null,*entries(r){if(no(r))for(let n in r){let i=r[n];yield[n,n,e],yield[n,i,t]}},validator:e=>ns(e)||`Expected an object, but received: ${na(e)}`,coercer:e=>ns(e)?{...e}:e})}function nS(){return nd("string",e=>"string"==typeof e||`Expected a string, but received: ${na(e)}`)}function nB(e){let t=nd("never",()=>!1);return new nl({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){let n=Math.max(e.length,r.length);for(let i=0;i<n;i++)yield[i,r[i],e[i]||t]}},validator:e=>Array.isArray(e)||`Expected an array, but received: ${na(e)}`,coercer:e=>Array.isArray(e)?e.slice():e})}function nk(e){let t=Object.keys(e);return new nl({type:"type",schema:e,*entries(r){if(no(r))for(let n of t)yield[n,r[n],e[n]]},validator:e=>ns(e)||`Expected an object, but received: ${na(e)}`,coercer:e=>ns(e)?{...e}:e})}function nE(e){let t=e.map(e=>e.type).join(" | ");return new nl({type:"union",schema:null,coercer(t,r){for(let n of e){let[e,i]=n.validate(t,{coerce:!0,mask:r.mask});if(!e)return i}return t},validator(r,n){let i=[];for(let t of e){let[...e]=nc(r,t,n),[o]=e;if(!o[0])return[];for(let[t]of e)t&&i.push(t)}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${na(r)}`,...i]}})}function nA(){return nd("unknown",()=>!0)}function nI(e,t,r){return new nl({...e,coercer:(n,i)=>nh(n,t)[0]?e.coercer(n,i):e.coercer(r(n,i),i)})}for(var n_={},nM=new Uint8Array(16),nT=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,nO=[],nP=0;nP<256;++nP)nO.push((nP+256).toString(16).substr(1));var nL=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(nO[e[t+0]]+nO[e[t+1]]+nO[e[t+2]]+nO[e[t+3]]+"-"+nO[e[t+4]]+nO[e[t+5]]+"-"+nO[e[t+6]]+nO[e[t+7]]+"-"+nO[e[t+8]]+nO[e[t+9]]+"-"+nO[e[t+10]]+nO[e[t+11]]+nO[e[t+12]]+nO[e[t+13]]+nO[e[t+14]]+nO[e[t+15]]).toLowerCase();if(!("string"==typeof r&&nT.test(r)))throw TypeError("Stringified UUID is invalid");return r},nR=function(e,t,r){var n=(e=e||{}).random||(e.rng||function(){if(!d&&!(d="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return d(nM)})();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var i=0;i<16;++i)t[r+i]=n[i];return t}return nL(n)},nC={};nC=function(e,t,r,n){if("string"!=typeof e)throw TypeError(e+" must be a string");let i="number"==typeof(n=n||{}).version?n.version:2;if(1!==i&&2!==i)throw TypeError(i+" must be 1 or 2");let o={method:e};if(2===i&&(o.jsonrpc="2.0"),t){if("object"!=typeof t&&!Array.isArray(t))throw TypeError(t+" must be an object, array or omitted");o.params=t}return void 0===r?o.id=("function"==typeof n.generator?n.generator:function(){return nR()})(o,n):2===i&&null===r?n.notificationIdNull&&(o.id=null):o.id=r,o};let nU=function(e,t){if(!(this instanceof nU))return new nU(e,t);t||(t={}),this.options={reviver:void 0!==t.reviver?t.reviver:null,replacer:void 0!==t.replacer?t.replacer:null,generator:void 0!==t.generator?t.generator:function(){return nR()},version:void 0!==t.version?t.version:2,notificationIdNull:"boolean"==typeof t.notificationIdNull&&t.notificationIdNull},this.callServer=e};n_=nU,nU.prototype.request=function(e,t,r,n){let i,o=this,s=null,a=Array.isArray(e)&&"function"==typeof t;if(1===this.options.version&&a)throw TypeError("JSON-RPC 1.0 does not support batching");let u=!a&&e&&"object"==typeof e&&"function"==typeof t;if(a||u)n=t,s=e;else{"function"==typeof r&&(n=r,r=void 0);let i="function"==typeof n;try{s=nC(e,t,r,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(e){if(i)return n(e);throw e}if(!i)return s}try{i=JSON.stringify(s,this.options.replacer)}catch(e){return n(e)}return this.callServer(i,function(e,t){o._parseResponse(e,t,n)}),s},nU.prototype._parseResponse=function(e,t,r){let n;if(e)return void r(e);if(!t)return r();try{n=JSON.parse(t,this.options.reviver)}catch(e){return r(e)}if(3===r.length)if(!Array.isArray(n))return r(null,n.error,n.result);else{let e=function(e){return void 0!==e.error};return r(null,n.filter(e),n.filter(function(t){return!e(t)}))}r(null,n)};var E=B("6ZWSX"),nN={},nz=Object.prototype.hasOwnProperty,nH="~";function nF(){}function nq(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function nD(e,t,r,n,i){if("function"!=typeof r)throw TypeError("The listener must be a function");var o=new nq(r,n||e,i),s=nH?nH+t:t;return e._events[s]?e._events[s].fn?e._events[s]=[e._events[s],o]:e._events[s].push(o):(e._events[s]=o,e._eventsCount++),e}function nW(e,t){0==--e._eventsCount?e._events=new nF:delete e._events[t]}function nj(){this._events=new nF,this._eventsCount=0}Object.create&&(nF.prototype=Object.create(null),new nF().__proto__||(nH=!1)),nj.prototype.eventNames=function(){var e,t,r=[];if(0===this._eventsCount)return r;for(t in e=this._events)nz.call(e,t)&&r.push(nH?t.slice(1):t);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},nj.prototype.listeners=function(e){var t=nH?nH+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,i=r.length,o=Array(i);n<i;n++)o[n]=r[n].fn;return o},nj.prototype.listenerCount=function(e){var t=nH?nH+e:e,r=this._events[t];return r?r.fn?1:r.length:0},nj.prototype.emit=function(e,t,r,n,i,o){var s=nH?nH+e:e;if(!this._events[s])return!1;var a,u,c=this._events[s],l=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),l){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,n),!0;case 5:return c.fn.call(c.context,t,r,n,i),!0;case 6:return c.fn.call(c.context,t,r,n,i,o),!0}for(u=1,a=Array(l-1);u<l;u++)a[u-1]=arguments[u];c.fn.apply(c.context,a)}else{var f,h=c.length;for(u=0;u<h;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),l){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,r);break;case 4:c[u].fn.call(c[u].context,t,r,n);break;default:if(!a)for(f=1,a=Array(l-1);f<l;f++)a[f-1]=arguments[f];c[u].fn.apply(c[u].context,a)}}return!0},nj.prototype.on=function(e,t,r){return nD(this,e,t,r,!1)},nj.prototype.once=function(e,t,r){return nD(this,e,t,r,!0)},nj.prototype.removeListener=function(e,t,r,n){var i=nH?nH+e:e;if(!this._events[i])return this;if(!t)return nW(this,i),this;var o=this._events[i];if(o.fn)o.fn!==t||n&&!o.once||r&&o.context!==r||nW(this,i);else{for(var s=0,a=[],u=o.length;s<u;s++)(o[s].fn!==t||n&&!o[s].once||r&&o[s].context!==r)&&a.push(o[s]);a.length?this._events[i]=1===a.length?a[0]:a:nW(this,i)}return this},nj.prototype.removeAllListeners=function(e){var t;return e?(t=nH?nH+e:e,this._events[t]&&nW(this,t)):(this._events=new nF,this._eventsCount=0),this},nj.prototype.off=nj.prototype.removeListener,nj.prototype.addListener=nj.prototype.on,nj.prefixed=nH,nj.EventEmitter=nj,nN=nj;var nK=class extends nN.EventEmitter{socket;constructor(e,t){super(),this.socket=new window.WebSocket(e,t.protocols),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=e=>this.emit("message",e.data),this.socket.onerror=e=>this.emit("error",e),this.socket.onclose=e=>{this.emit("close",e.code,e.reason)}}send(e,t,r){let n=r||t;try{this.socket.send(e),n()}catch(e){n(e)}}close(e,t){this.socket.close(e,t)}addEventListener(e,t,r){this.socket.addEventListener(e,t,r)}},nV=class{encode(e){return JSON.stringify(e)}decode(e){return JSON.parse(e)}},n$=class extends nN.EventEmitter{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(e,t="ws://localhost:8080",{autoconnect:r=!0,reconnect:n=!0,reconnect_interval:i=1e3,max_reconnects:o=5,...s}={},a,u){super(),this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=t,this.autoconnect=r,this.ready=!1,this.reconnect=n,this.reconnect_timer_id=void 0,this.reconnect_interval=i,this.max_reconnects=o,this.rest_options=s,this.current_reconnects=0,this.generate_request_id=a||(()=>"number"==typeof this.rpc_id?++this.rpc_id:Number(this.rpc_id)+1),u?this.dataPack=u:this.dataPack=new nV,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,t,r,n){return n||"object"!=typeof r||(n=r,r=null),new Promise((i,o)=>{if(!this.ready)return o(Error("socket not ready"));let s=this.generate_request_id(e,t);this.socket.send(this.dataPack.encode({jsonrpc:"2.0",method:e,params:t||void 0,id:s}),n,e=>{if(e)return o(e);this.queue[s]={promise:[i,o]},r&&(this.queue[s].timeout=setTimeout(()=>{delete this.queue[s],o(Error("reply timeout"))},r))})})}async login(e){let t=await this.call("rpc.login",e);if(!t)throw Error("authentication failed");return t}async listMethods(){return await this.call("__listMethods")}notify(e,t){return new Promise((r,n)=>{if(!this.ready)return n(Error("socket not ready"));this.socket.send(this.dataPack.encode({jsonrpc:"2.0",method:e,params:t}),e=>{if(e)return n(e);r()})})}async subscribe(e){"string"==typeof e&&(e=[e]);let t=await this.call("rpc.on",e);if("string"==typeof e&&"ok"!==t[e])throw Error("Failed subscribing to an event '"+e+"' with: "+t[e]);return t}async unsubscribe(e){"string"==typeof e&&(e=[e]);let t=await this.call("rpc.off",e);if("string"==typeof e&&"ok"!==t[e])throw Error("Failed unsubscribing from an event with: "+t);return t}close(e,t){this.socket&&this.socket.close(e||1e3,t)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}getCurrentReconnects(){return this.current_reconnects}getMaxReconnects(){return this.max_reconnects}isReconnecting(){return void 0!==this.reconnect_timer_id}willReconnect(){return this.reconnect&&(0===this.max_reconnects||this.current_reconnects<this.max_reconnects)}_connect(e,t){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,t),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:e})=>{e instanceof ArrayBuffer&&(e=E.Buffer.from(e).toString());try{e=this.dataPack.decode(e)}catch(e){return}if(e.notification&&this.listeners(e.notification).length){if(!Object.keys(e.params).length)return this.emit(e.notification);let t=[e.notification];if(e.params.constructor===Object)t.push(e.params);else for(let r=0;r<e.params.length;r++)t.push(e.params[r]);return Promise.resolve().then(()=>{this.emit.apply(this,t)})}if(!this.queue[e.id])return e.method?Promise.resolve().then(()=>{this.emit(e.method,e?.params)}):void 0;"error"in e=="result"in e&&this.queue[e.id].promise[1](Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[e.id].timeout&&clearTimeout(this.queue[e.id].timeout),e.error?this.queue[e.id].promise[1](e.error):this.queue[e.id].promise[0](e.result),delete this.queue[e.id]}),this.socket.addEventListener("error",e=>this.emit("error",e)),this.socket.addEventListener("close",({code:r,reason:n})=>{this.ready&&setTimeout(()=>this.emit("close",r,n),0),this.ready=!1,this.socket=void 0,1e3!==r&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||0===this.max_reconnects)?this.reconnect_timer_id=setTimeout(()=>this._connect(e,t),this.reconnect_interval):this.reconnect&&this.max_reconnects>0&&this.current_reconnects>=this.max_reconnects&&setTimeout(()=>this.emit("max_reconnects_reached",r,n),1))})}},nZ={};Object.defineProperty(nZ,"__esModule",{value:!0}),nZ.shake256=nZ.shake128=nZ.keccak_512=nZ.keccak_384=nZ.keccak_256=nZ.keccak_224=nZ.sha3_512=nZ.sha3_384=nZ.sha3_256=nZ.sha3_224=nZ.Keccak=void 0,nZ.keccakP=n7;let nG=BigInt(0),nX=BigInt(1),nY=BigInt(2),nJ=BigInt(7),nQ=BigInt(256),n0=BigInt(113),n1=[],n2=[],n3=[];for(let e=0,t=nX,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],n1.push(2*(5*n+r)),n2.push((e+1)*(e+2)/2%64);let i=nG;for(let e=0;e<7;e++)(t=(t<<nX^(t>>nJ)*n0)%nQ)&nY&&(i^=nX<<(nX<<BigInt(e))-nX);n3.push(i)}let n6=(0,Z.split)(n3,!0),n8=n6[0],n5=n6[1],n4=(e,t,r)=>r>32?(0,Z.rotlBH)(e,t,r):(0,Z.rotlSH)(e,t,r),n9=(e,t,r)=>r>32?(0,Z.rotlBL)(e,t,r):(0,Z.rotlSL)(e,t,r);function n7(e,t=24){let r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){let n=(t+8)%10,i=(t+2)%10,o=r[i],s=r[i+1],a=n4(o,s,1)^r[n],u=n9(o,s,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=u}let t=e[2],i=e[3];for(let r=0;r<24;r++){let n=n2[r],o=n4(t,i,n),s=n9(t,i,n),a=n1[r];t=e[a],i=e[a+1],e[a]=o,e[a+1]=s}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=n8[n],e[1]^=n5[n]}(0,M.clean)(r)}class ie extends M.Hash{constructor(e,t,r,n=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=n,this.rounds=i,(0,M.anumber)(r),!(0<e&&e<200))throw Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=(0,M.u32)(this.state)}clone(){return this._cloneInto()}keccak(){(0,M.swap32IfBE)(this.state32),n7(this.state32,this.rounds),(0,M.swap32IfBE)(this.state32),this.posOut=0,this.pos=0}update(e){(0,M.aexists)(this),e=(0,M.toBytes)(e),(0,M.abytes)(e);let{blockLen:t,state:r}=this,n=e.length;for(let i=0;i<n;){let o=Math.min(t-this.pos,n-i);for(let t=0;t<o;t++)r[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,(128&t)!=0&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){(0,M.aexists)(this,!1),(0,M.abytes)(e),this.finish();let t=this.state,{blockLen:r}=this;for(let n=0,i=e.length;n<i;){this.posOut>=r&&this.keccak();let o=Math.min(r-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+o),n),this.posOut+=o,n+=o}return e}xofInto(e){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,M.anumber)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,M.aoutput)(e,this),this.finished)throw Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,(0,M.clean)(this.state)}_cloneInto(e){let{blockLen:t,suffix:r,outputLen:n,rounds:i,enableXOF:o}=this;return e||(e=new ie(t,r,n,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=n,e.enableXOF=o,e.destroyed=this.destroyed,e}}nZ.Keccak=ie;let it=(e,t,r)=>(0,M.createHasher)(()=>new ie(t,e,r));nZ.sha3_224=it(6,144,28),nZ.sha3_256=it(6,136,32),nZ.sha3_384=it(6,104,48),nZ.sha3_512=it(6,72,64),nZ.keccak_224=it(1,144,28),nZ.keccak_256=it(1,136,32),nZ.keccak_384=it(1,104,48),nZ.keccak_512=it(1,72,64);let ir=(e,t,r)=>(0,M.createXOFer)((n={})=>new ie(t,e,void 0===n.dkLen?r:n.dkLen,!0));nZ.shake128=ir(31,168,16),nZ.shake256=ir(31,136,32);var ii={};Object.defineProperty(ii,"__esModule",{value:!0}),ii.encodeToCurve=ii.hashToCurve=ii.secp256k1_hasher=ii.schnorr=ii.secp256k1=void 0;var io={};Object.defineProperty(io,"__esModule",{value:!0}),io.getHash=function(e){return{hash:e}},io.createCurve=function(e,t){let r=t=>(0,is.weierstrass)({...e,hash:t});return{...r(t),create:r}};var is={};Object.defineProperty(is,"__esModule",{value:!0}),is.DER=is.DERErr=void 0,is._splitEndoScalar=il,is._normFnElement=iv,is.weierstrassN=ix,is.SWUFpSqrtRatio=iB,is.mapToCurveSimpleSWU=function(e,t){(0,ej.validateField)(e);let{A:r,B:n,Z:i}=t;if(!e.isValid(r)||!e.isValid(n)||!e.isValid(i))throw Error("mapToCurveSimpleSWU: invalid opts");let o=iB(e,i);if(!e.isOdd)throw Error("Field does not have .isOdd()");return t=>{let s,a,u,c,l,f,h,d;s=e.sqr(t),s=e.mul(s,i),a=e.sqr(s),a=e.add(a,s),u=e.add(a,e.ONE),u=e.mul(u,n),c=e.cmov(i,e.neg(a),!e.eql(a,e.ZERO)),c=e.mul(c,r),a=e.sqr(u),f=e.sqr(c),l=e.mul(f,r),a=e.add(a,l),a=e.mul(a,u),f=e.mul(f,c),l=e.mul(f,n),a=e.add(a,l),h=e.mul(s,u);let{isValid:p,value:g}=o(a,f);d=e.mul(s,t),d=e.mul(d,g),h=e.cmov(h,u,p),d=e.cmov(d,g,p);let m=e.isOdd(t)===e.isOdd(d);d=e.cmov(e.neg(d),d,m);let y=(0,ej.FpInvertBatch)(e,[c],!0)[0];return{x:h=e.mul(h,y),y:d}}},is.ecdh=iE,is.ecdsa=iA,is.weierstrassPoints=function(e){let{CURVE:t,curveOpts:r}=iI(e);return function(e,t){let{Fp:r,Fn:n}=t,i=i_(r,e.a,e.b);return Object.assign({},{CURVE:e,Point:t,ProjectivePoint:t,normPrivateKeyToScalar:e=>iv(n,e),weierstrassEquation:i,isWithinCurveOrder:function(e){return(0,eC.inRange)(e,im,n.ORDER)}})}(e,ix(t,r))},is._legacyHelperEquat=i_,is.weierstrass=function(e){let t,{CURVE:r,curveOpts:n,hash:i,ecdsaOpts:o}=function(e){let{CURVE:t,curveOpts:r}=iI(e),n={hmac:e.hmac,randomBytes:e.randomBytes,lowS:e.lowS,bits2int:e.bits2int,bits2int_modN:e.bits2int_modN};return{CURVE:t,curveOpts:r,hash:e.hash,ecdsaOpts:n}}(e),s=iA(ix(r,n),i,o);return t=s.Point,Object.assign({},s,{ProjectivePoint:t,CURVE:Object.assign({},e,(0,ej.nLength)(t.Fn.ORDER,t.Fn.BITS))})};var ia={};Object.defineProperty(ia,"__esModule",{value:!0}),ia.hmac=ia.HMAC=void 0;class iu extends M.Hash{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,(0,M.ahash)(e);let r=(0,M.toBytes)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let n=this.blockLen,i=new Uint8Array(n);i.set(r.length>n?e.create().update(r).digest():r);for(let e=0;e<i.length;e++)i[e]^=54;this.iHash.update(i),this.oHash=e.create();for(let e=0;e<i.length;e++)i[e]^=106;this.oHash.update(i),(0,M.clean)(i)}update(e){return(0,M.aexists)(this),this.iHash.update(e),this}digestInto(e){(0,M.aexists)(this),(0,M.abytes)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:o,outputLen:s}=this;return e.finished=n,e.destroyed=i,e.blockLen=o,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}ia.HMAC=iu,ia.hmac=(e,t,r)=>new iu(e,t).update(r).digest(),ia.hmac.create=(e,t)=>new iu(e,t);let ic=(e,t)=>(e+(e>=0?t:-t)/iy)/t;function il(e,t,r){let[[n,i],[o,s]]=t,a=ic(s*e,r),u=ic(-i*e,r),c=e-a*n-u*o,l=-a*i-u*s,f=c<ig,h=l<ig;f&&(c=-c),h&&(l=-l);let d=(0,eC.bitMask)(Math.ceil((0,eC.bitLen)(r)/2))+im;if(c<ig||c>=d||l<ig||l>=d)throw Error("splitScalar (endomorphism): failed, k="+e);return{k1neg:f,k1:c,k2neg:h,k2:l}}function ih(e){if(!["compact","recovered","der"].includes(e))throw Error('Signature format must be "compact", "recovered", or "der"');return e}function id(e,t){let r={};for(let n of Object.keys(t))r[n]=void 0===e[n]?t[n]:e[n];return(0,eC._abool2)(r.lowS,"lowS"),(0,eC._abool2)(r.prehash,"prehash"),void 0!==r.format&&ih(r.format),r}class ip extends Error{constructor(e=""){super(e)}}is.DERErr=ip,is.DER={Err:ip,_tlv:{encode:(e,t)=>{let{Err:r}=is.DER;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(1&t.length)throw new r("tlv.encode: unpadded data");let n=t.length/2,i=(0,eC.numberToHexUnpadded)(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");let o=n>127?(0,eC.numberToHexUnpadded)(i.length/2|128):"";return(0,eC.numberToHexUnpadded)(e)+o+i+t},decode(e,t){let{Err:r}=is.DER,n=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[n++]!==e)throw new r("tlv.decode: wrong tlv");let i=t[n++],o=0;if(128&i){let e=127&i;if(!e)throw new r("tlv.decode(long): indefinite length not supported");if(e>4)throw new r("tlv.decode(long): byte length is too big");let s=t.subarray(n,n+e);if(s.length!==e)throw new r("tlv.decode: length bytes not complete");if(0===s[0])throw new r("tlv.decode(long): zero leftmost byte");for(let e of s)o=o<<8|e;if(n+=e,o<128)throw new r("tlv.decode(long): not minimal encoding")}else o=i;let s=t.subarray(n,n+o);if(s.length!==o)throw new r("tlv.decode: wrong value length");return{v:s,l:t.subarray(n+o)}}},_int:{encode(e){let{Err:t}=is.DER;if(e<ig)throw new t("integer: negative integers are not allowed");let r=(0,eC.numberToHexUnpadded)(e);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){let{Err:t}=is.DER;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return(0,eC.bytesToNumberBE)(e)}},toSig(e){let{Err:t,_int:r,_tlv:n}=is.DER,i=(0,eC.ensureBytes)("signature",e),{v:o,l:s}=n.decode(48,i);if(s.length)throw new t("invalid signature: left bytes after parsing");let{v:a,l:u}=n.decode(2,o),{v:c,l:l}=n.decode(2,u);if(l.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(c)}},hexFromSig(e){let{_tlv:t,_int:r}=is.DER,n=t.encode(2,r.encode(e.r)),i=t.encode(2,r.encode(e.s));return t.encode(48,n+i)}};let ig=BigInt(0),im=BigInt(1),iy=BigInt(2),ib=BigInt(3),iw=BigInt(4);function iv(e,t){let r,{BYTES:n}=e;if("bigint"==typeof t)r=t;else{let i=(0,eC.ensureBytes)("private key",t);try{r=e.fromBytes(i)}catch(e){throw Error(`invalid private key: expected ui8a of size ${n}, got ${typeof t}`)}}if(!e.isValidNot0(r))throw Error("invalid private key: out of range [1..N-1]");return r}function ix(e,t={}){let r=(0,eR._createCurveFields)("weierstrass",e,t),{Fp:n,Fn:i}=r,o=r.CURVE,{h:s,n:a}=o;(0,eC._validateObject)(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});let{endo:u}=t;if(u&&(!n.is0(o.a)||"bigint"!=typeof u.beta||!Array.isArray(u.basises)))throw Error('invalid endo: expected "beta": bigint and "basises": array');let c=ik(n,i);function l(){if(!n.isOdd)throw Error("compression is not supported: Field does not have .isOdd()")}let f=t.toBytes||function(e,t,r){let{x:i,y:o}=t.toAffine(),s=n.toBytes(i);if((0,eC._abool2)(r,"isCompressed"),!r)return(0,eC.concatBytes)(Uint8Array.of(4),s,n.toBytes(o));{l();let e=!n.isOdd(o);return(0,eC.concatBytes)(iS(e),s)}},h=t.fromBytes||function(e){(0,eC._abytes2)(e,void 0,"Point");let{publicKey:t,publicKeyUncompressed:r}=c,i=e.length,o=e[0],s=e.subarray(1);if(i===t&&(2===o||3===o)){let e,t=n.fromBytes(s);if(!n.isValid(t))throw Error("bad point: is not on curve, wrong x");let r=d(t);try{e=n.sqrt(r)}catch(e){throw Error("bad point: is not on curve, sqrt error"+(e instanceof Error?": "+e.message:""))}return l(),(1&o)==1!==n.isOdd(e)&&(e=n.neg(e)),{x:t,y:e}}if(i===r&&4===o){let e=n.BYTES,t=n.fromBytes(s.subarray(0,e)),r=n.fromBytes(s.subarray(e,2*e));if(!p(t,r))throw Error("bad point: is not on curve");return{x:t,y:r}}throw Error(`bad point: got length ${i}, expected compressed=${t} or uncompressed=${r}`)};function d(e){let t=n.sqr(e),r=n.mul(t,e);return n.add(n.add(r,n.mul(e,o.a)),o.b)}function p(e,t){let r=n.sqr(t),i=d(e);return n.eql(r,i)}if(!p(o.Gx,o.Gy))throw Error("bad curve params: generator point");let g=n.mul(n.pow(o.a,ib),iw),m=n.mul(n.sqr(o.b),BigInt(27));if(n.is0(n.add(g,m)))throw Error("bad curve params: a or b");function y(e,t,r=!1){if(!n.isValid(t)||r&&n.is0(t))throw Error(`bad point coordinate ${e}`);return t}function b(e){if(!(e instanceof B))throw Error("ProjectivePoint expected")}function w(e){if(!u||!u.basises)throw Error("no endo");return il(e,u.basises,i.ORDER)}let v=(0,eC.memoized)((e,t)=>{let{X:r,Y:i,Z:o}=e;if(n.eql(o,n.ONE))return{x:r,y:i};let s=e.is0();null==t&&(t=s?n.ONE:n.inv(o));let a=n.mul(r,t),u=n.mul(i,t),c=n.mul(o,t);if(s)return{x:n.ZERO,y:n.ZERO};if(!n.eql(c,n.ONE))throw Error("invZ was invalid");return{x:a,y:u}}),x=(0,eC.memoized)(e=>{if(e.is0()){if(t.allowInfinityPoint&&!n.is0(e.Y))return;throw Error("bad point: ZERO")}let{x:r,y:i}=e.toAffine();if(!n.isValid(r)||!n.isValid(i))throw Error("bad point: x or y not field elements");if(!p(r,i))throw Error("bad point: equation left != right");if(!e.isTorsionFree())throw Error("bad point: not in prime-order subgroup");return!0});function S(e,t,r,i,o){return r=new B(n.mul(r.X,e),r.Y,r.Z),t=(0,eR.negateCt)(i,t),r=(0,eR.negateCt)(o,r),t.add(r)}class B{constructor(e,t,r){this.X=y("x",e),this.Y=y("y",t,!0),this.Z=y("z",r),Object.freeze(this)}static CURVE(){return o}static fromAffine(e){let{x:t,y:r}=e||{};if(!e||!n.isValid(t)||!n.isValid(r))throw Error("invalid affine point");if(e instanceof B)throw Error("projective point not allowed");return n.is0(t)&&n.is0(r)?B.ZERO:new B(t,r,n.ONE)}static fromBytes(e){let t=B.fromAffine(h((0,eC._abytes2)(e,void 0,"point")));return t.assertValidity(),t}static fromHex(e){return B.fromBytes((0,eC.ensureBytes)("pointHex",e))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(e=8,t=!0){return E.createCache(this,e),t||this.multiply(ib),this}assertValidity(){x(this)}hasEvenY(){let{y:e}=this.toAffine();if(!n.isOdd)throw Error("Field doesn't support isOdd");return!n.isOdd(e)}equals(e){b(e);let{X:t,Y:r,Z:i}=this,{X:o,Y:s,Z:a}=e,u=n.eql(n.mul(t,a),n.mul(o,i)),c=n.eql(n.mul(r,a),n.mul(s,i));return u&&c}negate(){return new B(this.X,n.neg(this.Y),this.Z)}double(){let{a:e,b:t}=o,r=n.mul(t,ib),{X:i,Y:s,Z:a}=this,u=n.ZERO,c=n.ZERO,l=n.ZERO,f=n.mul(i,i),h=n.mul(s,s),d=n.mul(a,a),p=n.mul(i,s);return p=n.add(p,p),l=n.mul(i,a),l=n.add(l,l),u=n.mul(e,l),c=n.mul(r,d),c=n.add(u,c),u=n.sub(h,c),c=n.add(h,c),c=n.mul(u,c),u=n.mul(p,u),l=n.mul(r,l),d=n.mul(e,d),p=n.sub(f,d),p=n.mul(e,p),p=n.add(p,l),l=n.add(f,f),f=n.add(l,f),f=n.add(f,d),f=n.mul(f,p),c=n.add(c,f),d=n.mul(s,a),d=n.add(d,d),f=n.mul(d,p),u=n.sub(u,f),l=n.mul(d,h),l=n.add(l,l),new B(u,c,l=n.add(l,l))}add(e){b(e);let{X:t,Y:r,Z:i}=this,{X:s,Y:a,Z:u}=e,c=n.ZERO,l=n.ZERO,f=n.ZERO,h=o.a,d=n.mul(o.b,ib),p=n.mul(t,s),g=n.mul(r,a),m=n.mul(i,u),y=n.add(t,r),w=n.add(s,a);y=n.mul(y,w),w=n.add(p,g),y=n.sub(y,w),w=n.add(t,i);let v=n.add(s,u);return w=n.mul(w,v),v=n.add(p,m),w=n.sub(w,v),v=n.add(r,i),c=n.add(a,u),v=n.mul(v,c),c=n.add(g,m),v=n.sub(v,c),f=n.mul(h,w),c=n.mul(d,m),f=n.add(c,f),c=n.sub(g,f),f=n.add(g,f),l=n.mul(c,f),g=n.add(p,p),g=n.add(g,p),m=n.mul(h,m),w=n.mul(d,w),g=n.add(g,m),m=n.sub(p,m),m=n.mul(h,m),w=n.add(w,m),p=n.mul(g,w),l=n.add(l,p),p=n.mul(v,w),c=n.mul(y,c),c=n.sub(c,p),p=n.mul(y,g),f=n.mul(v,f),new B(c,l,f=n.add(f,p))}subtract(e){return this.add(e.negate())}is0(){return this.equals(B.ZERO)}multiply(e){let r,n,{endo:o}=t;if(!i.isValidNot0(e))throw Error("invalid scalar: out of range");let s=e=>E.cached(this,e,e=>(0,eR.normalizeZ)(B,e));if(o){let{k1neg:t,k1:i,k2neg:a,k2:u}=w(e),{p:c,f:l}=s(i),{p:f,f:h}=s(u);n=l.add(h),r=S(o.beta,c,f,t,a)}else{let{p:t,f:i}=s(e);r=t,n=i}return(0,eR.normalizeZ)(B,[r,n])[0]}multiplyUnsafe(e){let{endo:r}=t;if(!i.isValid(e))throw Error("invalid scalar: out of range");if(e===ig||this.is0())return B.ZERO;if(e===im)return this;if(E.hasCache(this))return this.multiply(e);if(!r)return E.unsafe(this,e);{let{k1neg:t,k1:n,k2neg:i,k2:o}=w(e),{p1:s,p2:a}=(0,eR.mulEndoUnsafe)(B,this,n,o);return S(r.beta,s,a,t,i)}}multiplyAndAddUnsafe(e,t,r){let n=this.multiplyUnsafe(t).add(e.multiplyUnsafe(r));return n.is0()?void 0:n}toAffine(e){return v(this,e)}isTorsionFree(){let{isTorsionFree:e}=t;return s===im||(e?e(B,this):E.unsafe(this,a).is0())}clearCofactor(){let{clearCofactor:e}=t;return s===im?this:e?e(B,this):this.multiplyUnsafe(s)}isSmallOrder(){return this.multiplyUnsafe(s).is0()}toBytes(e=!0){return(0,eC._abool2)(e,"isCompressed"),this.assertValidity(),f(B,this,e)}toHex(e=!0){return(0,eC.bytesToHex)(this.toBytes(e))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(e=!0){return this.toBytes(e)}_setWindowSize(e){this.precompute(e)}static normalizeZ(e){return(0,eR.normalizeZ)(B,e)}static msm(e,t){return(0,eR.pippenger)(B,i,e,t)}static fromPrivateKey(e){return B.BASE.multiply(iv(i,e))}}B.BASE=new B(o.Gx,o.Gy,n.ONE),B.ZERO=new B(n.ZERO,n.ONE,n.ZERO),B.Fp=n,B.Fn=i;let k=i.BITS,E=new eR.wNAF(B,t.endo?Math.ceil(k/2):k);return B.BASE.precompute(8),B}function iS(e){return Uint8Array.of(e?2:3)}function iB(e,t){let r=e.ORDER,n=ig;for(let e=r-im;e%iy===ig;e/=iy)n+=im;let i=n,o=iy<<i-im-im,s=o*iy,a=(r-im)/s,u=(a-im)/iy,c=s-im,l=e.pow(t,a),f=e.pow(t,(a+im)/iy),h=(t,r)=>{let n=l,s=e.pow(r,c),a=e.sqr(s);a=e.mul(a,r);let h=e.mul(t,a);h=e.pow(h,u),h=e.mul(h,s),s=e.mul(h,r),a=e.mul(h,t);let d=e.mul(a,s);h=e.pow(d,o);let p=e.eql(h,e.ONE);s=e.mul(a,f),h=e.mul(d,n),a=e.cmov(s,a,p),d=e.cmov(h,d,p);for(let t=i;t>im;t--){let r=t-iy;r=iy<<r-im;let i=e.pow(d,r),o=e.eql(i,e.ONE);s=e.mul(a,n),n=e.mul(n,n),i=e.mul(d,n),a=e.cmov(s,a,o),d=e.cmov(i,d,o)}return{isValid:p,value:a}};if(e.ORDER%iw===ib){let r=(e.ORDER-ib)/iw,n=e.sqrt(e.neg(t));h=(t,i)=>{let o=e.sqr(i),s=e.mul(t,i);o=e.mul(o,s);let a=e.pow(o,r);a=e.mul(a,s);let u=e.mul(a,n),c=e.mul(e.sqr(a),i),l=e.eql(c,t),f=e.cmov(u,a,l);return{isValid:l,value:f}}}return h}function ik(e,t){return{secretKey:t.BYTES,publicKey:1+e.BYTES,publicKeyUncompressed:1+2*e.BYTES,publicKeyHasPrefix:!0,signature:2*t.BYTES}}function iE(e,t={}){let{Fn:r}=e,n=t.randomBytes||eC.randomBytes,i=Object.assign(ik(e.Fp,r),{seed:(0,ej.getMinHashLength)(r.ORDER)});function o(e){try{return!!iv(r,e)}catch(e){return!1}}function s(e=n(i.seed)){return(0,ej.mapHashToField)((0,eC._abytes2)(e,i.seed,"seed"),r.ORDER)}function a(t,n=!0){return e.BASE.multiply(iv(r,t)).toBytes(n)}function u(t){if("bigint"==typeof t)return!1;if(t instanceof e)return!0;let{secretKey:n,publicKey:o,publicKeyUncompressed:s}=i;if(r.allowedLengths||n===o)return;let a=(0,eC.ensureBytes)("key",t).length;return a===o||a===s}return Object.freeze({getPublicKey:a,getSharedSecret:function(t,n,i=!0){if(!0===u(t))throw Error("first arg must be private key");if(!1===u(n))throw Error("second arg must be public key");let o=iv(r,t);return e.fromHex(n).multiply(o).toBytes(i)},keygen:function(e){let t=s(e);return{secretKey:t,publicKey:a(t)}},Point:e,utils:{isValidSecretKey:o,isValidPublicKey:function(t,r){let{publicKey:n,publicKeyUncompressed:o}=i;try{let i=t.length;if(!0===r&&i!==n||!1===r&&i!==o)return!1;return!!e.fromBytes(t)}catch(e){return!1}},randomSecretKey:s,isValidPrivateKey:o,randomPrivateKey:s,normPrivateKeyToScalar:e=>iv(r,e),precompute:(t=8,r=e.BASE)=>r.precompute(t,!1)},lengths:i})}function iA(e,t,r={}){(0,M.ahash)(t),(0,eC._validateObject)(r,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});let n=r.randomBytes||eC.randomBytes,i=r.hmac||((e,...r)=>(0,ia.hmac)(t,e,(0,eC.concatBytes)(...r))),{Fp:o,Fn:s}=e,{ORDER:a,BITS:u}=s,{keygen:c,getPublicKey:l,getSharedSecret:f,utils:h,lengths:d}=iE(e,r),p={prehash:!1,lowS:"boolean"==typeof r.lowS&&r.lowS,format:void 0,extraEntropy:!1},g="compact";function m(e,t){if(!s.isValidNot0(t))throw Error(`invalid signature ${e}: out of range 1..Point.Fn.ORDER`);return t}class y{constructor(e,t,r){this.r=m("r",e),this.s=m("s",t),null!=r&&(this.recovery=r),Object.freeze(this)}static fromBytes(e,t=g){var r,n;let i,o;if(r=e,ih(n=t),o=d.signature,(0,eC._abytes2)(r,"compact"===n?o:"recovered"===n?o+1:void 0,`${n} signature`),"der"===t){let{r:t,s:r}=is.DER.toSig((0,eC._abytes2)(e));return new y(t,r)}"recovered"===t&&(i=e[0],t="compact",e=e.subarray(1));let a=s.BYTES,u=e.subarray(0,a),c=e.subarray(a,2*a);return new y(s.fromBytes(u),s.fromBytes(c),i)}static fromHex(e,t){return this.fromBytes((0,eC.hexToBytes)(e),t)}addRecoveryBit(e){return new y(this.r,this.s,e)}recoverPublicKey(t){let r=o.ORDER,{r:n,s:i,recovery:u}=this;if(null==u||![0,1,2,3].includes(u))throw Error("recovery id invalid");if(a*iy<r&&u>1)throw Error("recovery id is ambiguous for h>1 curve");let c=2===u||3===u?n+a:n;if(!o.isValid(c))throw Error("recovery id 2 or 3 invalid");let l=o.toBytes(c),f=e.fromBytes((0,eC.concatBytes)(iS((1&u)==0),l)),h=s.inv(c),d=w((0,eC.ensureBytes)("msgHash",t)),p=s.create(-d*h),g=s.create(i*h),m=e.BASE.multiplyUnsafe(p).add(f.multiplyUnsafe(g));if(m.is0())throw Error("point at infinify");return m.assertValidity(),m}hasHighS(){return this.s>a>>im}toBytes(e=g){if(ih(e),"der"===e)return(0,eC.hexToBytes)(is.DER.hexFromSig(this));let t=s.toBytes(this.r),r=s.toBytes(this.s);if("recovered"===e){if(null==this.recovery)throw Error("recovery bit must be present");return(0,eC.concatBytes)(Uint8Array.of(this.recovery),t,r)}return(0,eC.concatBytes)(t,r)}toHex(e){return(0,eC.bytesToHex)(this.toBytes(e))}assertValidity(){}static fromCompact(e){return y.fromBytes((0,eC.ensureBytes)("sig",e),"compact")}static fromDER(e){return y.fromBytes((0,eC.ensureBytes)("sig",e),"der")}normalizeS(){return this.hasHighS()?new y(this.r,s.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return(0,eC.bytesToHex)(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return(0,eC.bytesToHex)(this.toBytes("compact"))}}let b=r.bits2int||function(e){if(e.length>8192)throw Error("input is too large");let t=(0,eC.bytesToNumberBE)(e),r=8*e.length-u;return r>0?t>>BigInt(r):t},w=r.bits2int_modN||function(e){return s.create(b(e))},v=(0,eC.bitMask)(u);function x(e){return(0,eC.aInRange)("num < 2^"+u,e,ig,v),s.toBytes(e)}function S(e,r){return(0,eC._abytes2)(e,void 0,"message"),r?(0,eC._abytes2)(t(e),void 0,"prehashed message"):e}return Object.freeze({keygen:c,getPublicKey:l,getSharedSecret:f,utils:h,lengths:d,Point:e,sign:function(r,o,u={}){let{seed:c,k2sig:l}=function(t,r,i){if(["recovered","canonical"].some(e=>e in i))throw Error("sign() legacy options not supported");let{lowS:o,prehash:u,extraEntropy:c}=id(i,p),l=w(t=S(t,u)),f=iv(s,r),h=[x(f),x(l)];if(null!=c&&!1!==c){let e=!0===c?n(d.secretKey):c;h.push((0,eC.ensureBytes)("extraEntropy",e))}return{seed:(0,eC.concatBytes)(...h),k2sig:function(t){let r=b(t);if(!s.isValidNot0(r))return;let n=s.inv(r),i=e.BASE.multiply(r).toAffine(),u=s.create(i.x);if(u===ig)return;let c=s.create(n*s.create(l+u*f));if(c===ig)return;let h=2*(i.x!==u)|Number(i.y&im),d=c;return o&&c>a>>im&&(d=s.neg(c),h^=1),new y(u,d,h)}}}(r=(0,eC.ensureBytes)("message",r),o,u);return(0,eC.createHmacDrbg)(t.outputLen,s.BYTES,i)(c,l)},verify:function(t,r,n,i={}){let{lowS:o,prehash:a,format:u}=id(i,p);if(n=(0,eC.ensureBytes)("publicKey",n),r=S((0,eC.ensureBytes)("message",r),a),"strict"in i)throw Error("options.strict was renamed to lowS");let c=void 0===u?function(e){let t,r="string"==typeof e||(0,eC.isBytes)(e),n=!r&&null!==e&&"object"==typeof e&&"bigint"==typeof e.r&&"bigint"==typeof e.s;if(!r&&!n)throw Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(n)t=new y(e.r,e.s);else if(r){try{t=y.fromBytes((0,eC.ensureBytes)("sig",e),"der")}catch(e){if(!(e instanceof is.DER.Err))throw e}if(!t)try{t=y.fromBytes((0,eC.ensureBytes)("sig",e),"compact")}catch(e){return!1}}return!!t&&t}(t):y.fromBytes((0,eC.ensureBytes)("sig",t),u);if(!1===c)return!1;try{let t=e.fromBytes(n);if(o&&c.hasHighS())return!1;let{r:i,s:a}=c,u=w(r),l=s.inv(a),f=s.create(u*l),h=s.create(i*l),d=e.BASE.multiplyUnsafe(f).add(t.multiplyUnsafe(h));if(d.is0())return!1;return s.create(d.x)===i}catch(e){return!1}},recoverPublicKey:function(e,t,r={}){let{prehash:n}=id(r,p);return t=S(t,n),y.fromBytes(e,"recovered").recoverPublicKey(t).toBytes()},Signature:y,hash:t})}function iI(e){let t={a:e.a,b:e.b,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},r=e.Fp,n=e.allowedPrivateKeyLengths?Array.from(new Set(e.allowedPrivateKeyLengths.map(e=>Math.ceil(e/2)))):void 0,i={Fp:r,Fn:(0,ej.Field)(t.n,{BITS:e.nBitLength,allowedLengths:n,modFromBytes:e.wrapPrivateKey}),allowInfinityPoint:e.allowInfinityPoint,endo:e.endo,isTorsionFree:e.isTorsionFree,clearCofactor:e.clearCofactor,fromBytes:e.fromBytes,toBytes:e.toBytes};return{CURVE:t,curveOpts:i}}function i_(e,t,r){return function(n){let i=e.sqr(n),o=e.mul(i,n);return e.add(e.add(o,e.mul(n,t)),r)}}let iM={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},iT={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},iO=BigInt(0),iP=BigInt(1),iL=BigInt(2),iR=(0,ej.Field)(iM.p,{sqrt:function(e){let t=iM.p,r=BigInt(3),n=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),u=BigInt(88),c=e*e*e%t,l=c*c*e%t,f=(0,ej.pow2)(l,r,t)*l%t,h=(0,ej.pow2)(f,r,t)*l%t,d=(0,ej.pow2)(h,iL,t)*c%t,p=(0,ej.pow2)(d,i,t)*d%t,g=(0,ej.pow2)(p,o,t)*p%t,m=(0,ej.pow2)(g,a,t)*g%t,y=(0,ej.pow2)(m,u,t)*m%t,b=(0,ej.pow2)(y,a,t)*g%t,w=(0,ej.pow2)(b,r,t)*l%t,v=(0,ej.pow2)(w,s,t)*p%t,x=(0,ej.pow2)(v,n,t)*c%t,S=(0,ej.pow2)(x,iL,t);if(!iR.eql(iR.sqr(S),e))throw Error("Cannot find square root");return S}});ii.secp256k1=(0,io.createCurve)({...iM,Fp:iR,lowS:!0,endo:iT},I.sha256);let iC={};function iU(e,...t){let r=iC[e];if(void 0===r){let t=(0,I.sha256)((0,eC.utf8ToBytes)(e));r=(0,eC.concatBytes)(t,t),iC[e]=r}return(0,I.sha256)((0,eC.concatBytes)(r,...t))}let iN=e=>e.toBytes(!0).slice(1),iz=ii.secp256k1.Point;function iH(e){let{Fn:t,BASE:r}=iz,n=(0,is._normFnElement)(t,e),i=r.multiply(n);return{scalar:i.y%iL===iO?n:t.neg(n),bytes:iN(i)}}function iF(e){if(!iR.isValidNot0(e))throw Error("invalid x: Fail if x  p");let t=iR.create(e*e),r=iR.create(t*e+BigInt(7)),n=iR.sqrt(r);n%iL!==iO&&(n=iR.neg(n));let i=iz.fromAffine({x:e,y:n});return i.assertValidity(),i}let iq=eC.bytesToNumberBE;function iD(...e){return iz.Fn.create(iq(iU("BIP0340/challenge",...e)))}function iW(e){return iH(e).bytes}function ij(e,t,r){let{Fn:n,BASE:i}=iz,o=(0,eC.ensureBytes)("signature",e,64),s=(0,eC.ensureBytes)("message",t),a=(0,eC.ensureBytes)("publicKey",r,32);try{let e=iF(iq(a)),t=iq(o.subarray(0,32));if(!(0,eC.inRange)(t,iP,iM.p))return!1;let r=iq(o.subarray(32,64));if(!(0,eC.inRange)(r,iP,iM.n))return!1;let u=iD(n.toBytes(t),iN(e),s),c=i.multiplyUnsafe(r).add(e.multiplyUnsafe(n.neg(u))),{x:l,y:f}=c.toAffine();if(c.is0()||f%iL!==iO||l!==t)return!1;return!0}catch(e){return!1}}t=48,r=(e=(0,M.randomBytes)(t))=>(0,ej.mapHashToField)(e,iM.n),ii.secp256k1.utils.randomSecretKey,ii.schnorr={keygen:function(e){let t=r(e);return{secretKey:t,publicKey:iW(t)}},getPublicKey:iW,sign:function(e,t,r=(0,M.randomBytes)(32)){let{Fn:n}=iz,i=(0,eC.ensureBytes)("message",e),{bytes:o,scalar:s}=iH(t),a=(0,eC.ensureBytes)("auxRand",r,32),u=n.toBytes(s^iq(iU("BIP0340/aux",a))),{bytes:c,scalar:l}=iH(iU("BIP0340/nonce",u,o,i)),f=iD(c,o,i),h=new Uint8Array(64);if(h.set(c,0),h.set(n.toBytes(n.create(l+f*s)),32),!ij(h,i,o))throw Error("sign: Invalid signature produced");return h},verify:ij,Point:iz,utils:{randomSecretKey:r,randomPrivateKey:r,taggedHash:iU,lift_x:iF,pointToBytes:iN,numberToBytesBE:eC.numberToBytesBE,bytesToNumberBE:eC.bytesToNumberBE,mod:ej.mod},lengths:{secretKey:32,publicKey:32,publicKeyHasPrefix:!1,signature:64,seed:t}};let iK=(0,tA.isogenyMap)(iR,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(e=>e.map(e=>BigInt(e)))),iV=(0,is.mapToCurveSimpleSWU)(iR,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:iR.create(BigInt("-11"))});ii.secp256k1_hasher=(0,tA.createHasher)(ii.secp256k1.Point,e=>{let{x:t,y:r}=iV(iR.create(e[0]));return iK(t,r)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:iR.ORDER,m:1,k:128,expand:"xmd",hash:I.sha256}),ii.hashToCurve=ii.secp256k1_hasher.hashToCurve,ii.encodeToCurve=ii.secp256k1_hasher.encodeToCurve,A.ed25519.utils.randomPrivateKey;let i$=()=>{let e=A.ed25519.utils.randomPrivateKey(),t=iZ(e),r=new Uint8Array(64);return r.set(e),r.set(t,32),{publicKey:t,secretKey:r}},iZ=A.ed25519.getPublicKey;function iG(e){try{return A.ed25519.ExtendedPoint.fromHex(e),!0}catch{return!1}}let iX=(e,t)=>A.ed25519.sign(e,t.slice(0,32)),iY=A.ed25519.verify,iJ=e=>E.Buffer.isBuffer(e)?e:e instanceof Uint8Array?E.Buffer.from(e.buffer,e.byteOffset,e.byteLength):E.Buffer.from(e);class iQ{constructor(e){Object.assign(this,e)}encode(){return E.Buffer.from((0,ra.serialize)(i0,this))}static decode(e){return(0,ra.deserialize)(i0,this,e)}static decodeUnchecked(e){return(0,ra.deserializeUnchecked)(i0,this,e)}}let i0=new Map,i1=1;class i2 extends iQ{constructor(e){if(super({}),this._bn=void 0,void 0!==e._bn)this._bn=e._bn;else{if("string"==typeof e){let t=i(ro).decode(e);if(32!=t.length)throw Error("Invalid public key input");this._bn=new(i(ri))(t)}else this._bn=new(i(ri))(e);if(this._bn.byteLength()>32)throw Error("Invalid public key input")}}static unique(){let e=new i2(i1);return i1+=1,new i2(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return i(ro).encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){let e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){let e=this._bn.toArrayLike(E.Buffer);if(32===e.length)return e;let t=E.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,r){let n=E.Buffer.concat([e.toBuffer(),E.Buffer.from(t),r.toBuffer()]);return new i2((0,rs.sha256)(n))}static createProgramAddressSync(e,t){let r=E.Buffer.alloc(0);e.forEach(function(e){if(e.length>32)throw TypeError("Max seed length exceeded");r=E.Buffer.concat([r,iJ(e)])}),r=E.Buffer.concat([r,t.toBuffer(),E.Buffer.from("ProgramDerivedAddress")]);let n=(0,rs.sha256)(r);if(iG(n))throw Error("Invalid seeds, address must fall off the curve");return new i2(n)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let r,n=255;for(;0!=n;){try{let i=e.concat(E.Buffer.from([n]));r=this.createProgramAddressSync(i,t)}catch(e){if(e instanceof TypeError)throw e;n--;continue}return[r,n]}throw Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){return iG(new i2(e).toBytes())}}i2.default=new i2("11111111111111111111111111111111"),i0.set(i2,{kind:"struct",fields:[["_bn","u256"]]}),new i2("BPFLoader1111111111111111111111111111111111");class i3 extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(i3.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class i6 extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(i6.prototype,"name",{value:"TransactionExpiredTimeoutError"});class i8 extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(i8.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class i5{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){let e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(let t of this.keySegments())if(e<t.length)return t[e];else e-=t.length}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw Error("Account index overflow encountered during compilation");let t=new Map;this.keySegments().flat().forEach((e,r)=>{t.set(e.toBase58(),r)});let r=e=>{let r=t.get(e.toBase58());if(void 0===r)throw Error("Encountered an unknown instruction account key during compilation");return r};return e.map(e=>({programIdIndex:r(e.programId),accountKeyIndexes:e.keys.map(e=>r(e.pubkey)),data:e.data}))}}let i4=(e="publicKey")=>rI.blob(32,e),i9=(e="string")=>{let t=rI.struct([rI.u32("length"),rI.u32("lengthPadding"),rI.blob(rI.offset(rI.u32(),-8),"chars")],e),r=t.decode.bind(t),n=t.encode.bind(t);return t.decode=(e,t)=>r(e,t).chars.toString(),t.encode=(e,t,r)=>n({chars:E.Buffer.from(e,"utf8")},t,r),t.alloc=e=>rI.u32().span+rI.u32().span+E.Buffer.from(e,"utf8").length,t};function i7(e){let t=0,r=0;for(;;){let n=e.shift();if(t|=(127&n)<<7*r,r+=1,(128&n)==0)break}return t}function oe(e,t){let r=t;for(;;){let t=127&r;if(0==(r>>=7)){e.push(t);break}t|=128,e.push(t)}}function ot(e,t){if(!e)throw Error(t||"Assertion failed")}class or{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){let r=new Map,n=e=>{let t=e.toBase58(),n=r.get(t);return void 0===n&&(n={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(t,n)),n},i=n(t);for(let t of(i.isSigner=!0,i.isWritable=!0,e))for(let e of(n(t.programId).isInvoked=!0,t.keys)){let t=n(e.pubkey);t.isSigner||=e.isSigner,t.isWritable||=e.isWritable}return new or(t,r)}getMessageComponents(){let e=[...this.keyMetaMap.entries()];ot(e.length<=256,"Max static account keys length exceeded");let t=e.filter(([,e])=>e.isSigner&&e.isWritable),r=e.filter(([,e])=>e.isSigner&&!e.isWritable),n=e.filter(([,e])=>!e.isSigner&&e.isWritable),i=e.filter(([,e])=>!e.isSigner&&!e.isWritable),o={numRequiredSignatures:t.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{ot(t.length>0,"Expected at least one writable signer key");let[e]=t[0];ot(e===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}return[o,[...t.map(([e])=>new i2(e)),...r.map(([e])=>new i2(e)),...n.map(([e])=>new i2(e)),...i.map(([e])=>new i2(e))]]}extractTableLookup(e){let[t,r]=this.drainKeysFoundInLookupTable(e.state.addresses,e=>!e.isSigner&&!e.isInvoked&&e.isWritable),[n,i]=this.drainKeysFoundInLookupTable(e.state.addresses,e=>!e.isSigner&&!e.isInvoked&&!e.isWritable);if(0!==t.length||0!==n.length)return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:n},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(e,t){let r=[],n=[];for(let[i,o]of this.keyMetaMap.entries())if(t(o)){let t=new i2(i),o=e.findIndex(e=>e.equals(t));o>=0&&(ot(o<256,"Max lookup table index exceeded"),r.push(o),n.push(t),this.keyMetaMap.delete(i))}return[r,n]}}let on="Reached end of buffer unexpectedly";function oi(e){if(0===e.length)throw Error(on);return e.shift()}function oo(e,...t){let[r]=t;if(2===t.length?r+(t[1]??0)>e.length:r>=e.length)throw Error(on);return e.splice(...t)}class os{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(e=>new i2(e)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:i(ro).decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new i5(this.staticAccountKeys)}static compile(e){let[t,r]=or.compile(e.instructions,e.payerKey).getMessageComponents(),n=new i5(r).compileInstructions(e.instructions).map(e=>({programIdIndex:e.programIdIndex,accounts:e.accountKeyIndexes,data:i(ro).encode(e.data)}));return new os({header:t,accountKeys:r,recentBlockhash:e.recentBlockhash,instructions:n})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){let t=this.header.numRequiredSignatures;if(!(e>=this.header.numRequiredSignatures))return e<t-this.header.numReadonlySignedAccounts;{let r=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return e-t<r}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){let e=this.accountKeys.length,t=[];oe(t,e);let r=this.instructions.map(e=>{let{accounts:t,programIdIndex:r}=e,n=Array.from(i(ro).decode(e.data)),o=[];oe(o,t.length);let s=[];return oe(s,n.length),{programIdIndex:r,keyIndicesCount:E.Buffer.from(o),keyIndices:t,dataLength:E.Buffer.from(s),data:n}}),n=[];oe(n,r.length);let o=E.Buffer.alloc(1232);E.Buffer.from(n).copy(o);let s=n.length;r.forEach(e=>{let t=rI.struct([rI.u8("programIdIndex"),rI.blob(e.keyIndicesCount.length,"keyIndicesCount"),rI.seq(rI.u8("keyIndex"),e.keyIndices.length,"keyIndices"),rI.blob(e.dataLength.length,"dataLength"),rI.seq(rI.u8("userdatum"),e.data.length,"data")]).encode(e,o,s);s+=t}),o=o.slice(0,s);let a=rI.struct([rI.blob(1,"numRequiredSignatures"),rI.blob(1,"numReadonlySignedAccounts"),rI.blob(1,"numReadonlyUnsignedAccounts"),rI.blob(t.length,"keyCount"),rI.seq(i4("key"),e,"keys"),i4("recentBlockhash")]),u={numRequiredSignatures:E.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:E.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:E.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:E.Buffer.from(t),keys:this.accountKeys.map(e=>iJ(e.toBytes())),recentBlockhash:i(ro).decode(this.recentBlockhash)},c=E.Buffer.alloc(2048),l=a.encode(u,c);return o.copy(c,l),c.slice(0,l+o.length)}static from(e){let t=[...e],r=oi(t);if(r!==(127&r))throw Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");let n=oi(t),o=oi(t),s=i7(t),a=[];for(let e=0;e<s;e++){let e=oo(t,0,32);a.push(new i2(E.Buffer.from(e)))}let u=oo(t,0,32),c=i7(t),l=[];for(let e=0;e<c;e++){let e=oi(t),r=i7(t),n=oo(t,0,r),o=i7(t),s=oo(t,0,o),a=i(ro).encode(E.Buffer.from(s));l.push({programIdIndex:e,accounts:n,data:a})}return new os({header:{numRequiredSignatures:r,numReadonlySignedAccounts:n,numReadonlyUnsignedAccounts:o},recentBlockhash:i(ro).encode(E.Buffer.from(u)),accountKeys:a,instructions:l})}}class oa{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(let t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw Error("Failed to get account keys because address table lookups were not resolved");return new i5(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){let t=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(e>=r)return e-r<this.addressTableLookups.reduce((e,t)=>e+t.writableIndexes.length,0);if(!(e>=this.header.numRequiredSignatures))return e<t-this.header.numReadonlySignedAccounts;{let n=r-t-this.header.numReadonlyUnsignedAccounts;return e-t<n}}resolveAddressTableLookups(e){let t={writable:[],readonly:[]};for(let r of this.addressTableLookups){let n=e.find(e=>e.key.equals(r.accountKey));if(!n)throw Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(let e of r.writableIndexes)if(e<n.state.addresses.length)t.writable.push(n.state.addresses[e]);else throw Error(`Failed to find address for index ${e} in address lookup table ${r.accountKey.toBase58()}`);for(let e of r.readonlyIndexes)if(e<n.state.addresses.length)t.readonly.push(n.state.addresses[e]);else throw Error(`Failed to find address for index ${e} in address lookup table ${r.accountKey.toBase58()}`)}return t}static compile(e){let t=or.compile(e.instructions,e.payerKey),r=[],n={writable:[],readonly:[]};for(let i of e.addressLookupTableAccounts||[]){let e=t.extractTableLookup(i);if(void 0!==e){let[t,{writable:i,readonly:o}]=e;r.push(t),n.writable.push(...i),n.readonly.push(...o)}}let[i,o]=t.getMessageComponents(),s=new i5(o,n).compileInstructions(e.instructions);return new oa({header:i,staticAccountKeys:o,recentBlockhash:e.recentBlockhash,compiledInstructions:s,addressTableLookups:r})}serialize(){let e=[];oe(e,this.staticAccountKeys.length);let t=this.serializeInstructions(),r=[];oe(r,this.compiledInstructions.length);let n=this.serializeAddressTableLookups(),o=[];oe(o,this.addressTableLookups.length);let s=rI.struct([rI.u8("prefix"),rI.struct([rI.u8("numRequiredSignatures"),rI.u8("numReadonlySignedAccounts"),rI.u8("numReadonlyUnsignedAccounts")],"header"),rI.blob(e.length,"staticAccountKeysLength"),rI.seq(i4(),this.staticAccountKeys.length,"staticAccountKeys"),i4("recentBlockhash"),rI.blob(r.length,"instructionsLength"),rI.blob(t.length,"serializedInstructions"),rI.blob(o.length,"addressTableLookupsLength"),rI.blob(n.length,"serializedAddressTableLookups")]),a=new Uint8Array(1232),u=s.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(e=>e.toBytes()),recentBlockhash:i(ro).decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(o),serializedAddressTableLookups:n},a);return a.slice(0,u)}serializeInstructions(){let e=0,t=new Uint8Array(1232);for(let r of this.compiledInstructions){let n=[];oe(n,r.accountKeyIndexes.length);let i=[];oe(i,r.data.length);let o=rI.struct([rI.u8("programIdIndex"),rI.blob(n.length,"encodedAccountKeyIndexesLength"),rI.seq(rI.u8(),r.accountKeyIndexes.length,"accountKeyIndexes"),rI.blob(i.length,"encodedDataLength"),rI.blob(r.data.length,"data")]);e+=o.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(n),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0,t=new Uint8Array(1232);for(let r of this.addressTableLookups){let n=[];oe(n,r.writableIndexes.length);let i=[];oe(i,r.readonlyIndexes.length);let o=rI.struct([i4("accountKey"),rI.blob(n.length,"encodedWritableIndexesLength"),rI.seq(rI.u8(),r.writableIndexes.length,"writableIndexes"),rI.blob(i.length,"encodedReadonlyIndexesLength"),rI.seq(rI.u8(),r.readonlyIndexes.length,"readonlyIndexes")]);e+=o.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(n),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e],r=oi(t),n=127&r;ot(r!==n,"Expected versioned message but received legacy message"),ot(0===n,`Expected versioned message with version 0 but found version ${n}`);let o={numRequiredSignatures:oi(t),numReadonlySignedAccounts:oi(t),numReadonlyUnsignedAccounts:oi(t)},s=[],a=i7(t);for(let e=0;e<a;e++)s.push(new i2(oo(t,0,32)));let u=i(ro).encode(oo(t,0,32)),c=i7(t),l=[];for(let e=0;e<c;e++){let e=oi(t),r=i7(t),n=oo(t,0,r),i=i7(t),o=new Uint8Array(oo(t,0,i));l.push({programIdIndex:e,accountKeyIndexes:n,data:o})}let f=i7(t),h=[];for(let e=0;e<f;e++){let e=new i2(oo(t,0,32)),r=i7(t),n=oo(t,0,r),i=i7(t),o=oo(t,0,i);h.push({accountKey:e,writableIndexes:n,readonlyIndexes:o})}return new oa({header:o,staticAccountKeys:s,recentBlockhash:u,compiledInstructions:l,addressTableLookups:h})}}let ou=((s={})[s.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",s[s.PROCESSED=1]="PROCESSED",s[s.TIMED_OUT=2]="TIMED_OUT",s[s.NONCE_INVALID=3]="NONCE_INVALID",s),oc=E.Buffer.alloc(64).fill(0);class ol{constructor(e){this.keys=void 0,this.programId=void 0,this.data=E.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:r})=>({pubkey:e.toJSON(),isSigner:t,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class of{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!e)return;if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){let{minContextSlot:t,nonceInfo:r}=e;this.minNonceContextSlot=t,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){let{blockhash:t,lastValidBlockHeight:r}=e;this.recentBlockhash=t,this.lastValidBlockHeight=r}else{let{recentBlockhash:t,nonceInfo:r}=e;r&&(this.nonceInfo=r),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(0===e.length)throw Error("No instructions");return e.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new ol(e))}),this}compileMessage(){let e,t,r;if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;if(this.nonceInfo?(e=this.nonceInfo.nonce,t=this.instructions[0]!=this.nonceInfo.nonceInstruction?[this.nonceInfo.nonceInstruction,...this.instructions]:this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw Error("Transaction recentBlockhash required");if(t.length<1&&console.warn("No instructions provided"),this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw Error("Transaction fee payer required");for(let e=0;e<t.length;e++)if(void 0===t[e].programId)throw Error(`Transaction instruction index ${e} has undefined program id`);let n=[],o=[];t.forEach(e=>{e.keys.forEach(e=>{o.push({...e})});let t=e.programId.toString();n.includes(t)||n.push(t)}),n.forEach(e=>{o.push({pubkey:new i2(e),isSigner:!1,isWritable:!1})});let s=[];o.forEach(e=>{let t=e.pubkey.toString(),r=s.findIndex(e=>e.pubkey.toString()===t);r>-1?(s[r].isWritable=s[r].isWritable||e.isWritable,s[r].isSigner=s[r].isSigner||e.isSigner):s.push(e)}),s.sort(function(e,t){return e.isSigner!==t.isSigner?e.isSigner?-1:1:e.isWritable!==t.isWritable?e.isWritable?-1:1:e.pubkey.toBase58().localeCompare(t.pubkey.toBase58(),"en",{localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"})});let a=s.findIndex(e=>e.pubkey.equals(r));if(a>-1){let[e]=s.splice(a,1);e.isSigner=!0,e.isWritable=!0,s.unshift(e)}else s.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(let e of this.signatures){let t=s.findIndex(t=>t.pubkey.equals(e.publicKey));if(t>-1)s[t].isSigner||(s[t].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw Error(`unknown signer: ${e.publicKey.toString()}`)}let u=0,c=0,l=0,f=[],h=[];s.forEach(({pubkey:e,isSigner:t,isWritable:r})=>{t?(f.push(e.toString()),u+=1,r||(c+=1)):(h.push(e.toString()),r||(l+=1))});let d=f.concat(h),p=t.map(e=>{let{data:t,programId:r}=e;return{programIdIndex:d.indexOf(r.toString()),accounts:e.keys.map(e=>d.indexOf(e.pubkey.toString())),data:i(ro).encode(t)}});return p.forEach(e=>{ot(e.programIdIndex>=0),e.accounts.forEach(e=>ot(e>=0))}),new os({header:{numRequiredSignatures:u,numReadonlySignedAccounts:c,numReadonlyUnsignedAccounts:l},accountKeys:d,recentBlockhash:e,instructions:p})}_compile(){let e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((e,r)=>t[r].equals(e.publicKey))?e:(this.signatures=t.map(e=>({signature:null,publicKey:e})),e)}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(0===e.length)throw Error("No signers");let t=new Set;this.signatures=e.filter(e=>{let r=e.toString();return!t.has(r)&&(t.add(r),!0)}).map(e=>({signature:null,publicKey:e}))}sign(...e){if(0===e.length)throw Error("No signers");let t=new Set,r=[];for(let n of e){let e=n.publicKey.toString();t.has(e)||(t.add(e),r.push(n))}this.signatures=r.map(e=>({signature:null,publicKey:e.publicKey}));let n=this._compile();this._partialSign(n,...r)}partialSign(...e){if(0===e.length)throw Error("No signers");let t=new Set,r=[];for(let n of e){let e=n.publicKey.toString();t.has(e)||(t.add(e),r.push(n))}let n=this._compile();this._partialSign(n,...r)}_partialSign(e,...t){let r=e.serialize();t.forEach(e=>{let t=iX(r,e.secretKey);this._addSignature(e.publicKey,iJ(t))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){ot(64===t.length);let r=this.signatures.findIndex(t=>e.equals(t.publicKey));if(r<0)throw Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=E.Buffer.from(t)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,t){let r={};for(let{signature:n,publicKey:i}of this.signatures)null===n?t&&(r.missing||=[]).push(i):iY(n,e,i.toBytes())||(r.invalid||=[]).push(i);return r.invalid||r.missing?r:void 0}serialize(e){let{requireAllSignatures:t,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),n=this.serializeMessage();if(r){let e=this._getMessageSignednessErrors(n,t);if(e){let t="Signature verification failed.";throw e.invalid&&(t+=`
Invalid signature for public key${1===e.invalid.length?"":"(s)"} [\`${e.invalid.map(e=>e.toBase58()).join("`, `")}\`].`),e.missing&&(t+=`
Missing signature for public key${1===e.missing.length?"":"(s)"} [\`${e.missing.map(e=>e.toBase58()).join("`, `")}\`].`),Error(t)}}return this._serialize(n)}_serialize(e){let{signatures:t}=this,r=[];oe(r,t.length);let n=r.length+64*t.length+e.length,i=E.Buffer.alloc(n);return ot(t.length<256),E.Buffer.from(r).copy(i,0),t.forEach(({signature:e},t)=>{null!==e&&(ot(64===e.length,"signature has invalid length"),E.Buffer.from(e).copy(i,r.length+64*t))}),e.copy(i,r.length+64*t.length),ot(i.length<=1232,`Transaction too large: ${i.length} > 1232`),i}get keys(){return ot(1===this.instructions.length),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return ot(1===this.instructions.length),this.instructions[0].programId}get data(){return ot(1===this.instructions.length),this.instructions[0].data}static from(e){let t=[...e],r=i7(t),n=[];for(let e=0;e<r;e++){let e=oo(t,0,64);n.push(i(ro).encode(E.Buffer.from(e)))}return of.populate(os.from(t),n)}static populate(e,t=[]){let r=new of;return r.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(r.feePayer=e.accountKeys[0]),t.forEach((t,n)=>{let o={signature:t==i(ro).encode(oc)?null:i(ro).decode(t),publicKey:e.accountKeys[n]};r.signatures.push(o)}),e.instructions.forEach(t=>{let n=t.accounts.map(t=>{let n=e.accountKeys[t];return{pubkey:n,isSigner:r.signatures.some(e=>e.publicKey.toString()===n.toString())||e.isAccountSigner(t),isWritable:e.isAccountWritable(t)}});r.instructions.push(new ol({keys:n,programId:e.accountKeys[t.programIdIndex],data:i(ro).decode(t.data)}))}),r._message=e,r._json=r.toJSON(),r}}let oh=new i2("SysvarC1ock11111111111111111111111111111111");new i2("SysvarEpochSchedu1e111111111111111111111111"),new i2("Sysvar1nstructions1111111111111111111111111");let od=new i2("SysvarRecentB1ockHashes11111111111111111111"),op=new i2("SysvarRent111111111111111111111111111111111");new i2("SysvarRewards111111111111111111111111111111"),new i2("SysvarS1otHashes111111111111111111111111111"),new i2("SysvarS1otHistory11111111111111111111111111");let og=new i2("SysvarStakeHistory1111111111111111111111111");class om extends Error{constructor({action:e,signature:t,transactionMessage:r,logs:n}){let i,o=n?`Logs: 
${JSON.stringify(n.slice(-10),null,2)}. `:"",s="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";switch(e){case"send":i=`Transaction ${t} resulted in an error. 
${r}. `+o+s;break;case"simulate":i=`Simulation failed. 
Message: ${r}. 
`+o+s;break;default:i=`Unknown action '${e}'`}super(i),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=t,this.transactionMessage=r,this.transactionLogs=n||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){let e=this.transactionLogs;if(null==e||"object"!=typeof e||!("then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((t,r)=>{e.getTransaction(this.signature).then(e=>{if(e&&e.meta&&e.meta.logMessages){let r=e.meta.logMessages;this.transactionLogs=r,t(r)}else r(Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}class oy extends Error{constructor({code:e,message:t,data:r},n){super(null!=n?`${n}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=r,this.name="SolanaJSONRPCError"}}async function ob(e,t,r,n){let i,o=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},s=await e.sendTransaction(t,r,o);if(null!=t.recentBlockhash&&null!=t.lastValidBlockHeight)i=(await e.confirmTransaction({abortSignal:n?.abortSignal,signature:s,blockhash:t.recentBlockhash,lastValidBlockHeight:t.lastValidBlockHeight},n&&n.commitment)).value;else if(null!=t.minNonceContextSlot&&null!=t.nonceInfo){let{nonceInstruction:r}=t.nonceInfo,o=r.keys[0].pubkey;i=(await e.confirmTransaction({abortSignal:n?.abortSignal,minContextSlot:t.minNonceContextSlot,nonceAccountPubkey:o,nonceValue:t.nonceInfo.nonce,signature:s},n&&n.commitment)).value}else n?.abortSignal!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),i=(await e.confirmTransaction(s,n&&n.commitment)).value;if(i.err){if(null!=s)throw new om({action:"send",signature:s,transactionMessage:`Status: (${JSON.stringify(i)})`});throw Error(`Transaction ${s} failed (${JSON.stringify(i)})`)}return s}function ow(e){return new Promise(t=>setTimeout(t,e))}function ov(e,t){let r=e.layout.span>=0?e.layout.span:function e(t,r){let n=t=>{if(t.span>=0)return t.span;if("function"==typeof t.alloc)return t.alloc(r[t.property]);if("count"in t&&"elementLayout"in t){let e=r[t.property];if(Array.isArray(e))return e.length*n(t.elementLayout)}else if("fields"in t)return e({layout:t},r[t.property]);return 0},i=0;return t.layout.fields.forEach(e=>{i+=n(e)}),i}(e,t),n=E.Buffer.alloc(r),i=Object.assign({instruction:e.index},t);return e.layout.encode(i,n),n}let ox=rI.nu64("lamportsPerSignature"),oS=rI.struct([rI.u32("version"),rI.u32("state"),i4("authorizedPubkey"),i4("nonce"),rI.struct([ox],"feeCalculator")]),oB=oS.span;class ok{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){let t=oS.decode(iJ(e),0);return new ok({authorizedPubkey:new i2(t.authorizedPubkey),nonce:new i2(t.nonce).toString(),feeCalculator:t.feeCalculator})}}function oE(e){let t=(0,rI.blob)(8,e),r=t.decode.bind(t),n=t.encode.bind(t),i=((e={})=>(function(e,t){if(nt(e)!==nt(t))throw new ne(8078004);if(nt(e)&&nt(t)&&e.fixedSize!==t.fixedSize)throw new ne(8078005,{decoderFixedSize:t.fixedSize,encoderFixedSize:e.fixedSize});if(!nt(e)&&!nt(t)&&e.maxSize!==t.maxSize)throw new ne(8078006,{decoderMaxSize:t.maxSize,encoderMaxSize:e.maxSize});return{...t,...e,decode:t.decode,encode:e.encode,read:t.read,write:e.write}})(((e={})=>{var t,r;return Object.freeze({...r={fixedSize:(t={config:e,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,t,r)=>e.setBigUint64(0,BigInt(t),r),size:8}).size,write(e,r,n){t.range&&function(e,t,r,n){if(n<t||n>r)throw new ne(8078011,{codecDescription:e,max:r,min:t,value:n})}(t.name,t.range[0],t.range[1],e);let i=new ArrayBuffer(t.size);return t.set(new DataView(i),e,nn(t.config)),r.set(new Uint8Array(i),n),n+t.size}},encode:e=>{let t=new Uint8Array("fixedSize"in r?r.fixedSize:r.getSizeFromValue(e));return r.write(e,t,0),t}})})(e),((e={})=>{var t,r;return Object.freeze({...r={fixedSize:(t={config:e,get:(e,t)=>e.getBigUint64(0,t),name:"u64",size:8}).size,read(e,r=0){var n,i,o;let s,a;!function(e,t,r=0){if(t.length-r<=0)throw new ne(8078e3,{codecDescription:e})}(t.name,e,r),function(e,t,r,n=0){let i=r.length-n;if(i<t)throw new ne(8078001,{bytesLength:i,codecDescription:e,expected:t})}(t.name,t.size,e,r);let u=new DataView((n=e,i=r,o=t.size,s=n.byteOffset+(i??0),a=o??n.byteLength,n.buffer.slice(s,s+a)));return[t.get(u,nn(t.config)),r+t.size]}},decode:(e,t=0)=>r.read(e,t)[0]})})(e)))();return t.decode=(e,t)=>{let n=r(e,t);return i.decode(n)},t.encode=(e,t,r)=>n(i.encode(e),t,r),t}let oA=Object.freeze({Create:{index:0,layout:rI.struct([rI.u32("instruction"),rI.ns64("lamports"),rI.ns64("space"),i4("programId")])},Assign:{index:1,layout:rI.struct([rI.u32("instruction"),i4("programId")])},Transfer:{index:2,layout:rI.struct([rI.u32("instruction"),oE("lamports")])},CreateWithSeed:{index:3,layout:rI.struct([rI.u32("instruction"),i4("base"),i9("seed"),rI.ns64("lamports"),rI.ns64("space"),i4("programId")])},AdvanceNonceAccount:{index:4,layout:rI.struct([rI.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:rI.struct([rI.u32("instruction"),rI.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:rI.struct([rI.u32("instruction"),i4("authorized")])},AuthorizeNonceAccount:{index:7,layout:rI.struct([rI.u32("instruction"),i4("authorized")])},Allocate:{index:8,layout:rI.struct([rI.u32("instruction"),rI.ns64("space")])},AllocateWithSeed:{index:9,layout:rI.struct([rI.u32("instruction"),i4("base"),i9("seed"),rI.ns64("space"),i4("programId")])},AssignWithSeed:{index:10,layout:rI.struct([rI.u32("instruction"),i4("base"),i9("seed"),i4("programId")])},TransferWithSeed:{index:11,layout:rI.struct([rI.u32("instruction"),oE("lamports"),i9("seed"),i4("programId")])},UpgradeNonceAccount:{index:12,layout:rI.struct([rI.u32("instruction")])}});class oI{static createAccount(e){let t=ov(oA.Create,{lamports:e.lamports,space:e.space,programId:iJ(e.programId.toBuffer())});return new ol({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:t})}static transfer(e){let t,r;return"basePubkey"in e?(t=ov(oA.TransferWithSeed,{lamports:BigInt(e.lamports),seed:e.seed,programId:iJ(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]):(t=ov(oA.Transfer,{lamports:BigInt(e.lamports)}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]),new ol({keys:r,programId:this.programId,data:t})}static assign(e){let t,r;return"basePubkey"in e?(t=ov(oA.AssignWithSeed,{base:iJ(e.basePubkey.toBuffer()),seed:e.seed,programId:iJ(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]):(t=ov(oA.Assign,{programId:iJ(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]),new ol({keys:r,programId:this.programId,data:t})}static createAccountWithSeed(e){let t=ov(oA.CreateWithSeed,{base:iJ(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:iJ(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||r.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new ol({keys:r,programId:this.programId,data:t})}static createNonceAccount(e){let t=new of;"basePubkey"in e&&"seed"in e?t.add(oI.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:oB,programId:this.programId})):t.add(oI.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:oB,programId:this.programId}));let r={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(r)),t}static nonceInitialize(e){let t=ov(oA.InitializeNonceAccount,{authorized:iJ(e.authorizedPubkey.toBuffer())});return new ol({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:od,isSigner:!1,isWritable:!1},{pubkey:op,isSigner:!1,isWritable:!1}],programId:this.programId,data:t})}static nonceAdvance(e){let t=ov(oA.AdvanceNonceAccount);return new ol({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:od,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}static nonceWithdraw(e){let t=ov(oA.WithdrawNonceAccount,{lamports:e.lamports});return new ol({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:od,isSigner:!1,isWritable:!1},{pubkey:op,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}static nonceAuthorize(e){let t=ov(oA.AuthorizeNonceAccount,{authorized:iJ(e.newAuthorizedPubkey.toBuffer())});return new ol({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}static allocate(e){let t,r;return"basePubkey"in e?(t=ov(oA.AllocateWithSeed,{base:iJ(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:iJ(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]):(t=ov(oA.Allocate,{space:e.space}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]),new ol({keys:r,programId:this.programId,data:t})}}oI.programId=new i2("11111111111111111111111111111111");class o_{static getMinNumSignatures(e){return 2*(Math.ceil(e/o_.chunkSize)+1+1)}static async load(e,t,r,n,i){{let o=await e.getMinimumBalanceForRentExemption(i.length),s=await e.getAccountInfo(r.publicKey,"confirmed"),a=null;if(null!==s){if(s.executable)return console.error("Program load failed, account is already executable"),!1;s.data.length!==i.length&&(a=a||new of).add(oI.allocate({accountPubkey:r.publicKey,space:i.length})),s.owner.equals(n)||(a=a||new of).add(oI.assign({accountPubkey:r.publicKey,programId:n})),s.lamports<o&&(a=a||new of).add(oI.transfer({fromPubkey:t.publicKey,toPubkey:r.publicKey,lamports:o-s.lamports}))}else a=new of().add(oI.createAccount({fromPubkey:t.publicKey,newAccountPubkey:r.publicKey,lamports:o>0?o:1,space:i.length,programId:n}));null!==a&&await ob(e,a,[t,r],{commitment:"confirmed"})}let o=rI.struct([rI.u32("instruction"),rI.u32("offset"),rI.u32("bytesLength"),rI.u32("bytesLengthPadding"),rI.seq(rI.u8("byte"),rI.offset(rI.u32(),-8),"bytes")]),s=o_.chunkSize,a=0,u=i,c=[];for(;u.length>0;){let i=u.slice(0,s),l=E.Buffer.alloc(s+16);o.encode({instruction:0,offset:a,bytes:i,bytesLength:0,bytesLengthPadding:0},l);let f=new of().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:n,data:l});c.push(ob(e,f,[t,r],{commitment:"confirmed"})),e._rpcEndpoint.includes("solana.com")&&await ow(250),a+=s,u=u.slice(s)}await Promise.all(c);{let i=rI.struct([rI.u32("instruction")]),o=E.Buffer.alloc(i.span);i.encode({instruction:1},o);let s=new of().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:op,isSigner:!1,isWritable:!1}],programId:n,data:o}),a="processed",u=await e.sendTransaction(s,[t,r],{preflightCommitment:a}),{context:c,value:l}=await e.confirmTransaction({signature:u,lastValidBlockHeight:s.lastValidBlockHeight,blockhash:s.recentBlockhash},a);if(l.err)throw Error(`Transaction ${u} failed (${JSON.stringify(l)})`);for(;;){try{if(await e.getSlot({commitment:a})>c.slot)break}catch{}await new Promise(e=>setTimeout(e,Math.round(200)))}}return!0}}o_.chunkSize=932,new i2("BPFLoader2111111111111111111111111111111111");var oM=(a=function(){if(g)return p;g=1;var e=Object.prototype.toString,t=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};return p=function(r){var n=function r(n,i){var o,s,a,u,c,l,f;if(!0===n)return"true";if(!1===n)return"false";switch(typeof n){case"object":if(null===n)return null;if(n.toJSON&&"function"==typeof n.toJSON)return r(n.toJSON(),i);if("[object Array]"===(f=e.call(n))){for(o=0,a="[",s=n.length-1;o<s;o++)a+=r(n[o],!0)+",";return s>-1&&(a+=r(n[o],!0)),a+"]"}if("[object Object]"!==f)return JSON.stringify(n);for(s=(u=t(n).sort()).length,a="",o=0;o<s;)void 0!==(l=r(n[c=u[o]],!1))&&(a&&(a+=","),a+=JSON.stringify(c)+":"+l),o++;return"{"+a+"}";case"function":case"undefined":return i?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}(r,!1);if(void 0!==n)return""+n}}())&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a;function oT(e){let t=0;for(;e>1;)e/=2,t++;return t}class oO{constructor(e,t,r,n,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=r,this.firstNormalEpoch=n,this.firstNormalSlot=i}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){var t;let r=oT(0===(t=e+32+1)?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,(t|=t>>32)+1))-oT(32)-1,n=this.getSlotsInEpoch(r);return[r,e-(n-32)]}{let t=e-this.firstNormalSlot,r=Math.floor(t/this.slotsPerEpoch);return[this.firstNormalEpoch+r,t%this.slotsPerEpoch]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*32:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+oT(32)):this.slotsPerEpoch}}var oP=globalThis.fetch;class oL extends n${constructor(e,t,r){super(e=>{let r=new nK(e,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return"socket"in r?this.underlyingSocket=r.socket:this.underlyingSocket=r,r},e,t,r),this.underlyingSocket=void 0}call(...e){let t=this.underlyingSocket?.readyState;return 1===t?super.call(...e):Promise.reject(Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(...e){let t=this.underlyingSocket?.readyState;return 1===t?super.notify(...e):Promise.reject(Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}}class oR{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){let e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){let t=function(e,t){let r;try{r=e.layout.decode(t)}catch(e){throw Error("invalid instruction; "+e)}if(r.typeIndex!==e.index)throw Error(`invalid account data; account type mismatch ${r.typeIndex} != ${e.index}`);return r}(oC,e),r=e.length-56;ot(r>=0,"lookup table is invalid"),ot(r%32==0,"lookup table is invalid");let{addresses:n}=rI.struct([rI.seq(i4(),r/32,"addresses")]).decode(e.slice(56));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:0!==t.authority.length?new i2(t.authority[0]):void 0,addresses:n.map(e=>new i2(e))}}}let oC={index:1,layout:rI.struct([rI.u32("typeIndex"),oE("deactivationSlot"),rI.nu64("lastExtendedSlot"),rI.u8("lastExtendedStartIndex"),rI.u8(),rI.seq(i4(),rI.offset(rI.u8(),-1),"authority")])},oU=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i,oN=nI(nm(i2),nS(),e=>new i2(e)),oz=nB([nS(),ny("base64")]),oH=nI(nm(E.Buffer),oz,e=>E.Buffer.from(e[0],"base64"));function oF(e){let t,r;if("string"==typeof e)t=e;else if(e){let{commitment:n,...i}=e;t=n,r=i}return{commitment:t,config:r}}function oq(e){return e.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function oD(e){return nE([nk({jsonrpc:ny("2.0"),id:nS(),result:e}),nk({jsonrpc:ny("2.0"),id:nS(),error:nk({code:nA(),message:nS(),data:nv(nd("any",()=>!0))})})])}let oW=oD(nA());function oj(e){return nI(oD(e),oW,t=>"error"in t?t:{...t,result:nf(t.result,e)})}function oK(e){return oj(nk({context:nk({slot:nw()}),value:e}))}function oV(e){return nk({context:nk({slot:nw()}),value:e})}function o$(e,t){return 0===e?new oa({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new i2(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:i(ro).decode(e.data)})),addressTableLookups:t.addressTableLookups}):new os(t)}let oZ=nk({foundation:nw(),foundationTerm:nw(),initial:nw(),taper:nw(),terminal:nw()}),oG=oj(np(nb(nk({epoch:nw(),effectiveSlot:nw(),amount:nw(),postBalance:nw(),commission:nv(nb(nw()))})))),oX=np(nk({slot:nw(),prioritizationFee:nw()})),oY=nk({total:nw(),validator:nw(),foundation:nw(),epoch:nw()}),oJ=nk({epoch:nw(),slotIndex:nw(),slotsInEpoch:nw(),absoluteSlot:nw(),blockHeight:nv(nw()),transactionCount:nv(nw())}),oQ=nk({slotsPerEpoch:nw(),leaderScheduleSlotOffset:nw(),warmup:ng(),firstNormalEpoch:nw(),firstNormalSlot:nw()}),o0=nx(nS(),np(nw())),o1=nb(nE([nk({}),nS()])),o2=nk({err:o1}),o3=ny("receivedSignature"),o6=nk({"solana-core":nS(),"feature-set":nv(nw())}),o8=nk({program:nS(),programId:oN,parsed:nA()}),o5=nk({programId:oN,accounts:np(oN),data:nS()}),o4=oK(nk({err:nb(nE([nk({}),nS()])),logs:nb(np(nS())),accounts:nv(nb(np(nb(nk({executable:ng(),owner:nS(),lamports:nw(),data:np(nS()),rentEpoch:nv(nw())}))))),unitsConsumed:nv(nw()),returnData:nv(nb(nk({programId:nS(),data:nB([nS(),ny("base64")])}))),innerInstructions:nv(nb(np(nk({index:nw(),instructions:np(nE([o8,o5]))}))))})),o9=oK(nk({byIdentity:nx(nS(),np(nw())),range:nk({firstSlot:nw(),lastSlot:nw()})})),o7=oj(oZ),se=oj(oY),st=oj(oX),sr=oj(oJ),sn=oj(oQ),si=oj(o0),so=oj(nw()),ss=oK(nk({total:nw(),circulating:nw(),nonCirculating:nw(),nonCirculatingAccounts:np(oN)})),sa=nk({amount:nS(),uiAmount:nb(nw()),decimals:nw(),uiAmountString:nv(nS())}),su=oK(np(nk({address:oN,amount:nS(),uiAmount:nb(nw()),decimals:nw(),uiAmountString:nv(nS())}))),sc=oK(np(nk({pubkey:oN,account:nk({executable:ng(),owner:oN,lamports:nw(),data:oH,rentEpoch:nw()})}))),sl=nk({program:nS(),parsed:nA(),space:nw()}),sf=oK(np(nk({pubkey:oN,account:nk({executable:ng(),owner:oN,lamports:nw(),data:sl,rentEpoch:nw()})}))),sh=oK(np(nk({lamports:nw(),address:oN}))),sd=nk({executable:ng(),owner:oN,lamports:nw(),data:oH,rentEpoch:nw()}),sp=nk({pubkey:oN,account:sd}),sg=nI(nE([nm(E.Buffer),sl]),nE([oz,sl]),e=>Array.isArray(e)?nf(e,oH):e),sm=nk({executable:ng(),owner:oN,lamports:nw(),data:sg,rentEpoch:nw()}),sy=nk({pubkey:oN,account:sm}),sb=nk({state:nE([ny("active"),ny("inactive"),ny("activating"),ny("deactivating")]),active:nw(),inactive:nw()}),sw=oj(np(nk({signature:nS(),slot:nw(),err:o1,memo:nb(nS()),blockTime:nv(nb(nw()))}))),sv=oj(np(nk({signature:nS(),slot:nw(),err:o1,memo:nb(nS()),blockTime:nv(nb(nw()))}))),sx=nk({subscription:nw(),result:oV(sd)}),sS=nk({pubkey:oN,account:sd}),sB=nk({subscription:nw(),result:oV(sS)}),sk=nk({parent:nw(),slot:nw(),root:nw()}),sE=nk({subscription:nw(),result:sk}),sA=nE([nk({type:nE([ny("firstShredReceived"),ny("completed"),ny("optimisticConfirmation"),ny("root")]),slot:nw(),timestamp:nw()}),nk({type:ny("createdBank"),parent:nw(),slot:nw(),timestamp:nw()}),nk({type:ny("frozen"),slot:nw(),timestamp:nw(),stats:nk({numTransactionEntries:nw(),numSuccessfulTransactions:nw(),numFailedTransactions:nw(),maxTransactionsPerEntry:nw()})}),nk({type:ny("dead"),slot:nw(),timestamp:nw(),err:nS()})]),sI=nk({subscription:nw(),result:sA}),s_=nk({subscription:nw(),result:oV(nE([o2,o3]))}),sM=nk({subscription:nw(),result:nw()}),sT=nk({pubkey:nS(),gossip:nb(nS()),tpu:nb(nS()),rpc:nb(nS()),version:nb(nS())}),sO=nk({votePubkey:nS(),nodePubkey:nS(),activatedStake:nw(),epochVoteAccount:ng(),epochCredits:np(nB([nw(),nw(),nw()])),commission:nw(),lastVote:nw(),rootSlot:nb(nw())}),sP=oj(nk({current:np(sO),delinquent:np(sO)})),sL=nE([ny("processed"),ny("confirmed"),ny("finalized")]),sR=nk({slot:nw(),confirmations:nb(nw()),err:o1,confirmationStatus:nv(sL)}),sC=oK(np(nb(sR))),sU=oj(nw()),sN=nk({accountKey:oN,writableIndexes:np(nw()),readonlyIndexes:np(nw())}),sz=nk({signatures:np(nS()),message:nk({accountKeys:np(nS()),header:nk({numRequiredSignatures:nw(),numReadonlySignedAccounts:nw(),numReadonlyUnsignedAccounts:nw()}),instructions:np(nk({accounts:np(nw()),data:nS(),programIdIndex:nw()})),recentBlockhash:nS(),addressTableLookups:nv(np(sN))})}),sH=nk({pubkey:oN,signer:ng(),writable:ng(),source:nv(nE([ny("transaction"),ny("lookupTable")]))}),sF=nk({accountKeys:np(sH),signatures:np(nS())}),sq=nk({parsed:nA(),program:nS(),programId:oN}),sD=nk({accounts:np(oN),data:nS(),programId:oN}),sW=nI(nE([sD,sq]),nE([nk({parsed:nA(),program:nS(),programId:nS()}),nk({accounts:np(nS()),data:nS(),programId:nS()})]),e=>"accounts"in e?nf(e,sD):nf(e,sq)),sj=nk({signatures:np(nS()),message:nk({accountKeys:np(sH),instructions:np(sW),recentBlockhash:nS(),addressTableLookups:nv(nb(np(sN)))})}),sK=nk({accountIndex:nw(),mint:nS(),owner:nv(nS()),programId:nv(nS()),uiTokenAmount:sa}),sV=nk({writable:np(oN),readonly:np(oN)}),s$=nk({err:o1,fee:nw(),innerInstructions:nv(nb(np(nk({index:nw(),instructions:np(nk({accounts:np(nw()),data:nS(),programIdIndex:nw()}))})))),preBalances:np(nw()),postBalances:np(nw()),logMessages:nv(nb(np(nS()))),preTokenBalances:nv(nb(np(sK))),postTokenBalances:nv(nb(np(sK))),loadedAddresses:nv(sV),computeUnitsConsumed:nv(nw()),costUnits:nv(nw())}),sZ=nk({err:o1,fee:nw(),innerInstructions:nv(nb(np(nk({index:nw(),instructions:np(sW)})))),preBalances:np(nw()),postBalances:np(nw()),logMessages:nv(nb(np(nS()))),preTokenBalances:nv(nb(np(sK))),postTokenBalances:nv(nb(np(sK))),loadedAddresses:nv(sV),computeUnitsConsumed:nv(nw()),costUnits:nv(nw())}),sG=nE([ny(0),ny("legacy")]),sX=nk({pubkey:nS(),lamports:nw(),postBalance:nb(nw()),rewardType:nb(nS()),commission:nv(nb(nw()))}),sY=oj(nb(nk({blockhash:nS(),previousBlockhash:nS(),parentSlot:nw(),transactions:np(nk({transaction:sz,meta:nb(s$),version:nv(sG)})),rewards:nv(np(sX)),blockTime:nb(nw()),blockHeight:nb(nw())}))),sJ=oj(nb(nk({blockhash:nS(),previousBlockhash:nS(),parentSlot:nw(),rewards:nv(np(sX)),blockTime:nb(nw()),blockHeight:nb(nw())}))),sQ=oj(nb(nk({blockhash:nS(),previousBlockhash:nS(),parentSlot:nw(),transactions:np(nk({transaction:sF,meta:nb(s$),version:nv(sG)})),rewards:nv(np(sX)),blockTime:nb(nw()),blockHeight:nb(nw())}))),s0=oj(nb(nk({blockhash:nS(),previousBlockhash:nS(),parentSlot:nw(),transactions:np(nk({transaction:sj,meta:nb(sZ),version:nv(sG)})),rewards:nv(np(sX)),blockTime:nb(nw()),blockHeight:nb(nw())}))),s1=oj(nb(nk({blockhash:nS(),previousBlockhash:nS(),parentSlot:nw(),transactions:np(nk({transaction:sF,meta:nb(sZ),version:nv(sG)})),rewards:nv(np(sX)),blockTime:nb(nw()),blockHeight:nb(nw())}))),s2=oj(nb(nk({blockhash:nS(),previousBlockhash:nS(),parentSlot:nw(),rewards:nv(np(sX)),blockTime:nb(nw()),blockHeight:nb(nw())}))),s3=oj(nb(nk({blockhash:nS(),previousBlockhash:nS(),parentSlot:nw(),transactions:np(nk({transaction:sz,meta:nb(s$)})),rewards:nv(np(sX)),blockTime:nb(nw())}))),s6=oj(nb(nk({blockhash:nS(),previousBlockhash:nS(),parentSlot:nw(),signatures:np(nS()),blockTime:nb(nw())}))),s8=oj(nb(nk({slot:nw(),meta:nb(s$),blockTime:nv(nb(nw())),transaction:sz,version:nv(sG)}))),s5=oj(nb(nk({slot:nw(),transaction:sj,meta:nb(sZ),blockTime:nv(nb(nw())),version:nv(sG)}))),s4=oK(nk({blockhash:nS(),lastValidBlockHeight:nw()})),s9=oK(ng()),s7=oj(np(nk({slot:nw(),numTransactions:nw(),numSlots:nw(),samplePeriodSecs:nw()}))),ae=oK(nb(nk({feeCalculator:nk({lamportsPerSignature:nw()})}))),at=oj(nS()),ar=oj(nS()),an=nk({err:o1,logs:np(nS()),signature:nS()}),ai=nk({result:oV(an),subscription:nw()}),ao={"solana-client":"js/1.0.0-maintenance"};class as{constructor(e){this._keypair=void 0,this._keypair=e??i$()}static generate(){return new as(i$())}static fromSecretKey(e,t){if(64!==e.byteLength)throw Error("bad secret key size");let r=e.slice(32,64);if(!t||!t.skipValidation){let t=iZ(e.slice(0,32));for(let e=0;e<32;e++)if(r[e]!==t[e])throw Error("provided secretKey is invalid")}return new as({publicKey:r,secretKey:e})}static fromSeed(e){let t=iZ(e),r=new Uint8Array(64);return r.set(e),r.set(t,32),new as({publicKey:t,secretKey:r})}get publicKey(){return new i2(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}Object.freeze({CreateLookupTable:{index:0,layout:rI.struct([rI.u32("instruction"),oE("recentSlot"),rI.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:rI.struct([rI.u32("instruction")])},ExtendLookupTable:{index:2,layout:rI.struct([rI.u32("instruction"),oE(),rI.seq(i4(),rI.offset(rI.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:rI.struct([rI.u32("instruction")])},CloseLookupTable:{index:4,layout:rI.struct([rI.u32("instruction")])}}),new i2("AddressLookupTab1e1111111111111111111111111"),Object.freeze({RequestUnits:{index:0,layout:rI.struct([rI.u8("instruction"),rI.u32("units"),rI.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:rI.struct([rI.u8("instruction"),rI.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:rI.struct([rI.u8("instruction"),rI.u32("units")])},SetComputeUnitPrice:{index:3,layout:rI.struct([rI.u8("instruction"),oE("microLamports")])}}),new i2("ComputeBudget111111111111111111111111111111");let aa=rI.struct([rI.u8("numSignatures"),rI.u8("padding"),rI.u16("signatureOffset"),rI.u16("signatureInstructionIndex"),rI.u16("publicKeyOffset"),rI.u16("publicKeyInstructionIndex"),rI.u16("messageDataOffset"),rI.u16("messageDataSize"),rI.u16("messageInstructionIndex")]);class au{static createInstructionWithPublicKey(e){let{publicKey:t,message:r,signature:n,instructionIndex:i}=e;ot(32===t.length,`Public Key must be 32 bytes but received ${t.length} bytes`),ot(64===n.length,`Signature must be 64 bytes but received ${n.length} bytes`);let o=aa.span,s=o+t.length,a=s+n.length,u=E.Buffer.alloc(a+r.length),c=null==i?65535:i;return aa.encode({numSignatures:1,padding:0,signatureOffset:s,signatureInstructionIndex:c,publicKeyOffset:o,publicKeyInstructionIndex:c,messageDataOffset:a,messageDataSize:r.length,messageInstructionIndex:c},u),u.fill(t,o),u.fill(n,s),u.fill(r,a),new ol({keys:[],programId:au.programId,data:u})}static createInstructionWithPrivateKey(e){let{privateKey:t,message:r,instructionIndex:n}=e;ot(64===t.length,`Private key must be 64 bytes but received ${t.length} bytes`);try{let e=as.fromSecretKey(t),i=e.publicKey.toBytes(),o=iX(r,e.secretKey);return this.createInstructionWithPublicKey({publicKey:i,message:r,signature:o,instructionIndex:n})}catch(e){throw Error(`Error creating instruction; ${e}`)}}}au.programId=new i2("Ed25519SigVerify111111111111111111111111111"),ii.secp256k1.utils.isValidPrivateKey;let ac=ii.secp256k1.getPublicKey,al=rI.struct([rI.u8("numSignatures"),rI.u16("signatureOffset"),rI.u8("signatureInstructionIndex"),rI.u16("ethAddressOffset"),rI.u8("ethAddressInstructionIndex"),rI.u16("messageDataOffset"),rI.u16("messageDataSize"),rI.u8("messageInstructionIndex"),rI.blob(20,"ethAddress"),rI.blob(64,"signature"),rI.u8("recoveryId")]);class af{static publicKeyToEthAddress(e){ot(64===e.length,`Public key must be 64 bytes but received ${e.length} bytes`);try{return E.Buffer.from((0,nZ.keccak_256)(iJ(e))).slice(-20)}catch(e){throw Error(`Error constructing Ethereum address: ${e}`)}}static createInstructionWithPublicKey(e){let{publicKey:t,message:r,signature:n,recoveryId:i,instructionIndex:o}=e;return af.createInstructionWithEthAddress({ethAddress:af.publicKeyToEthAddress(t),message:r,signature:n,recoveryId:i,instructionIndex:o})}static createInstructionWithEthAddress(e){let t,{ethAddress:r,message:n,signature:i,recoveryId:o,instructionIndex:s=0}=e;ot(20===(t="string"==typeof r?r.startsWith("0x")?E.Buffer.from(r.substr(2),"hex"):E.Buffer.from(r,"hex"):r).length,`Address must be 20 bytes but received ${t.length} bytes`);let a=12+t.length,u=a+i.length+1,c=E.Buffer.alloc(al.span+n.length);return al.encode({numSignatures:1,signatureOffset:a,signatureInstructionIndex:s,ethAddressOffset:12,ethAddressInstructionIndex:s,messageDataOffset:u,messageDataSize:n.length,messageInstructionIndex:s,signature:iJ(i),ethAddress:iJ(t),recoveryId:o},c),c.fill(iJ(n),al.span),new ol({keys:[],programId:af.programId,data:c})}static createInstructionWithPrivateKey(e){let{privateKey:t,message:r,instructionIndex:n}=e;ot(32===t.length,`Private key must be 32 bytes but received ${t.length} bytes`);try{var i;let e,o=iJ(t),s=ac(o,!1).slice(1),[a,u]=(i=E.Buffer.from((0,nZ.keccak_256)(iJ(r))),[(e=ii.secp256k1.sign(i,o)).toCompactRawBytes(),e.recovery]);return this.createInstructionWithPublicKey({publicKey:s,message:r,signature:a,recoveryId:u,instructionIndex:n})}catch(e){throw Error(`Error creating instruction; ${e}`)}}}af.programId=new i2("KeccakSecp256k11111111111111111111111111111");let ah=new i2("StakeConfig11111111111111111111111111111111");class ad{constructor(e,t,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=r}}ad.default=new ad(0,0,i2.default);let ap=Object.freeze({Initialize:{index:0,layout:rI.struct([rI.u32("instruction"),((e="authorized")=>rI.struct([i4("staker"),i4("withdrawer")],e))(),((e="lockup")=>rI.struct([rI.ns64("unixTimestamp"),rI.ns64("epoch"),i4("custodian")],e))()])},Authorize:{index:1,layout:rI.struct([rI.u32("instruction"),i4("newAuthorized"),rI.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:rI.struct([rI.u32("instruction")])},Split:{index:3,layout:rI.struct([rI.u32("instruction"),rI.ns64("lamports")])},Withdraw:{index:4,layout:rI.struct([rI.u32("instruction"),rI.ns64("lamports")])},Deactivate:{index:5,layout:rI.struct([rI.u32("instruction")])},Merge:{index:7,layout:rI.struct([rI.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:rI.struct([rI.u32("instruction"),i4("newAuthorized"),rI.u32("stakeAuthorizationType"),i9("authoritySeed"),i4("authorityOwner")])}});Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class ag{static initialize(e){let{stakePubkey:t,authorized:r,lockup:n}=e,i=n||ad.default,o=ov(ap.Initialize,{authorized:{staker:iJ(r.staker.toBuffer()),withdrawer:iJ(r.withdrawer.toBuffer())},lockup:{unixTimestamp:i.unixTimestamp,epoch:i.epoch,custodian:iJ(i.custodian.toBuffer())}});return new ol({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:op,isSigner:!1,isWritable:!1}],programId:this.programId,data:o})}static createAccountWithSeed(e){let t=new of;t.add(oI.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));let{stakePubkey:r,authorized:n,lockup:i}=e;return t.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}static createAccount(e){let t=new of;t.add(oI.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));let{stakePubkey:r,authorized:n,lockup:i}=e;return t.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}static delegate(e){let{stakePubkey:t,authorizedPubkey:r,votePubkey:n}=e,i=ov(ap.Delegate);return new of().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:oh,isSigner:!1,isWritable:!1},{pubkey:og,isSigner:!1,isWritable:!1},{pubkey:ah,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}static authorize(e){let{stakePubkey:t,authorizedPubkey:r,newAuthorizedPubkey:n,stakeAuthorizationType:i,custodianPubkey:o}=e,s=ov(ap.Authorize,{newAuthorized:iJ(n.toBuffer()),stakeAuthorizationType:i.index}),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:oh,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return o&&a.push({pubkey:o,isSigner:!0,isWritable:!1}),new of().add({keys:a,programId:this.programId,data:s})}static authorizeWithSeed(e){let{stakePubkey:t,authorityBase:r,authoritySeed:n,authorityOwner:i,newAuthorizedPubkey:o,stakeAuthorizationType:s,custodianPubkey:a}=e,u=ov(ap.AuthorizeWithSeed,{newAuthorized:iJ(o.toBuffer()),stakeAuthorizationType:s.index,authoritySeed:n,authorityOwner:iJ(i.toBuffer())}),c=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:oh,isSigner:!1,isWritable:!1}];return a&&c.push({pubkey:a,isSigner:!0,isWritable:!1}),new of().add({keys:c,programId:this.programId,data:u})}static splitInstruction(e){let{stakePubkey:t,authorizedPubkey:r,splitStakePubkey:n,lamports:i}=e,o=ov(ap.Split,{lamports:i});return new ol({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static split(e,t){let r=new of;return r.add(oI.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:t,space:this.space,programId:this.programId})),r.add(this.splitInstruction(e))}static splitWithSeed(e,t){let{stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,basePubkey:o,seed:s,lamports:a}=e,u=new of;return u.add(oI.allocate({accountPubkey:i,basePubkey:o,seed:s,space:this.space,programId:this.programId})),t&&t>0&&u.add(oI.transfer({fromPubkey:e.authorizedPubkey,toPubkey:i,lamports:t})),u.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,lamports:a}))}static merge(e){let{stakePubkey:t,sourceStakePubKey:r,authorizedPubkey:n}=e,i=ov(ap.Merge);return new of().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:oh,isSigner:!1,isWritable:!1},{pubkey:og,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}static withdraw(e){let{stakePubkey:t,authorizedPubkey:r,toPubkey:n,lamports:i,custodianPubkey:o}=e,s=ov(ap.Withdraw,{lamports:i}),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:oh,isSigner:!1,isWritable:!1},{pubkey:og,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return o&&a.push({pubkey:o,isSigner:!0,isWritable:!1}),new of().add({keys:a,programId:this.programId,data:s})}static deactivate(e){let{stakePubkey:t,authorizedPubkey:r}=e,n=ov(ap.Deactivate);return new of().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:oh,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}}ag.programId=new i2("Stake11111111111111111111111111111111111111"),ag.space=200;let am=Object.freeze({InitializeAccount:{index:0,layout:rI.struct([rI.u32("instruction"),((e="voteInit")=>rI.struct([i4("nodePubkey"),i4("authorizedVoter"),i4("authorizedWithdrawer"),rI.u8("commission")],e))()])},Authorize:{index:1,layout:rI.struct([rI.u32("instruction"),i4("newAuthorized"),rI.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:rI.struct([rI.u32("instruction"),rI.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:rI.struct([rI.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:rI.struct([rI.u32("instruction"),((e="voteAuthorizeWithSeedArgs")=>rI.struct([rI.u32("voteAuthorizationType"),i4("currentAuthorityDerivedKeyOwnerPubkey"),i9("currentAuthorityDerivedKeySeed"),i4("newAuthorized")],e))()])}});Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class ay{static initializeAccount(e){let{votePubkey:t,nodePubkey:r,voteInit:n}=e,i=ov(am.InitializeAccount,{voteInit:{nodePubkey:iJ(n.nodePubkey.toBuffer()),authorizedVoter:iJ(n.authorizedVoter.toBuffer()),authorizedWithdrawer:iJ(n.authorizedWithdrawer.toBuffer()),commission:n.commission}});return new ol({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:op,isSigner:!1,isWritable:!1},{pubkey:oh,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}static createAccount(e){let t=new of;return t.add(oI.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static authorize(e){let{votePubkey:t,authorizedPubkey:r,newAuthorizedPubkey:n,voteAuthorizationType:i}=e,o=ov(am.Authorize,{newAuthorized:iJ(n.toBuffer()),voteAuthorizationType:i.index});return new of().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:oh,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static authorizeWithSeed(e){let{currentAuthorityDerivedKeyBasePubkey:t,currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:i,voteAuthorizationType:o,votePubkey:s}=e,a=ov(am.AuthorizeWithSeed,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:iJ(r.toBuffer()),currentAuthorityDerivedKeySeed:n,newAuthorized:iJ(i.toBuffer()),voteAuthorizationType:o.index}});return new of().add({keys:[{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:oh,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static withdraw(e){let{votePubkey:t,authorizedWithdrawerPubkey:r,lamports:n,toPubkey:i}=e,o=ov(am.Withdraw,{lamports:n});return new of().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static safeWithdraw(e,t,r){if(e.lamports>t-r)throw Error("Withdraw will leave vote account with insufficient funds.");return ay.withdraw(e)}static updateValidatorIdentity(e){let{votePubkey:t,authorizedWithdrawerPubkey:r,nodePubkey:n}=e,i=ov(am.UpdateValidatorIdentity);return new of().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}}ay.programId=new i2("Vote111111111111111111111111111111111111111"),ay.space=3762,new i2("Va1idator1nfo111111111111111111111111111111"),nk({name:nS(),website:nv(nS()),details:nv(nS()),iconUrl:nv(nS()),keybaseUsername:nv(nS())}),new i2("Vote111111111111111111111111111111111111111"),rI.struct([i4("nodePubkey"),i4("authorizedWithdrawer"),rI.u8("commission"),rI.nu64(),rI.seq(rI.struct([rI.nu64("slot"),rI.u32("confirmationCount")]),rI.offset(rI.u32(),-8),"votes"),rI.u8("rootSlotValid"),rI.nu64("rootSlot"),rI.nu64(),rI.seq(rI.struct([rI.nu64("epoch"),i4("authorizedVoter")]),rI.offset(rI.u32(),-8),"authorizedVoters"),rI.struct([rI.seq(rI.struct([i4("authorizedPubkey"),rI.nu64("epochOfLastAuthorizedSwitch"),rI.nu64("targetEpoch")]),32,"buf"),rI.nu64("idx"),rI.u8("isEmpty")],"priorVoters"),rI.nu64(),rI.seq(rI.struct([rI.nu64("epoch"),rI.nu64("credits"),rI.nu64("prevCredits")]),rI.offset(rI.u32(),-8),"epochCredits"),rI.struct([rI.nu64("slot"),rI.nu64("timestamp")],"lastTimestamp")]);let ab=new i2("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");new i2("TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb");let aw=new i2("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");new i2("So11111111111111111111111111111111111111112"),new i2("9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP");let av=e=>({decode:e.decode.bind(e),encode:e.encode.bind(e)});var ax={},E=B("6ZWSX"),aS=E.Buffer;Object.defineProperty(ax,"__esModule",{value:!0}),ax.toBigIntLE=function(e){{let t=aS.from(e);t.reverse();let r=t.toString("hex");return 0===r.length?BigInt(0):BigInt(`0x${r}`)}},ax.toBigIntBE=function(e){{let t=e.toString("hex");return 0===t.length?BigInt(0):BigInt(`0x${t}`)}},ax.toBufferLE=function(e,t){{let r=e.toString(16),n=aS.from(r.padStart(2*t,"0").slice(0,2*t),"hex");return n.reverse(),n}},ax.toBufferBE=function(e,t){{let r=e.toString(16);return aS.from(r.padStart(2*t,"0").slice(0,2*t),"hex")}};var E=B("6ZWSX"),aB=E.Buffer;let ak=e=>t=>{let r=(0,rI.blob)(e,t),{encode:n,decode:i}=av(r);return r.decode=(e,t)=>{let r=i(e,t);return(0,ax.toBigIntLE)(aB.from(r))},r.encode=(t,r,i)=>n((0,ax.toBufferLE)(t,e),r,i),r},aE=e=>t=>{let r=(0,rI.blob)(e,t),{encode:n,decode:i}=av(r);return r.decode=(e,t)=>{let r=i(e,t);return(0,ax.toBigIntBE)(aB.from(r))},r.encode=(t,r,i)=>n((0,ax.toBufferBE)(t,e),r,i),r},aA=ak(8);aE(8),ak(16),aE(16),ak(24),aE(24),ak(32),aE(32);var aI={};!function(e){var t,r=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,n=Math.ceil,i=Math.floor,o="[BigNumber Error] ",s=o+"Number primitive has more than 15 significant digits: ",a=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13];function u(e){var t=0|e;return e>0||e===t?t:t-1}function c(e){for(var t,r,n=1,i=e.length,o=e[0]+"";n<i;){for(r=14-(t=e[n++]+"").length;r--;t="0"+t);o+=t}for(i=o.length;48===o.charCodeAt(--i););return o.slice(0,i+1||1)}function l(e,t){var r,n,i=e.c,o=t.c,s=e.s,a=t.s,u=e.e,c=t.e;if(!s||!a)return null;if(r=i&&!i[0],n=o&&!o[0],r||n)return r?n?0:-a:s;if(s!=a)return s;if(r=s<0,n=u==c,!i||!o)return n?0:!i^r?1:-1;if(!n)return u>c^r?1:-1;for(s=0,a=(u=i.length)<(c=o.length)?u:c;s<a;s++)if(i[s]!=o[s])return i[s]>o[s]^r?1:-1;return u==c?0:u>c^r?1:-1}function f(e,t,r,n){if(e<t||e>r||e!==i(e))throw Error(o+(n||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function h(e){var t=e.c.length-1;return u(e.e/14)==t&&e.c[t]%2!=0}function d(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function p(e,t,r){var n,i;if(t<0){for(i=r+".";++t;i+=r);e=i+e}else if(n=e.length,++t>n){for(i=r,t-=n;--t;i+=r);e+=i}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}(t=function e(t){var g,m,y,b,w,v,x,S,B,k=z.prototype={constructor:z,toString:null,valueOf:null},E=new z(1),A=20,I=4,_=-7,M=21,T=-1e7,O=1e7,P=!1,L=1,R=0,C={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},U="0123456789abcdefghijklmnopqrstuvwxyz",N=!0;function z(e,t){var n,o,a,u,c,l,h,d,p=this;if(!(p instanceof z))return new z(e,t);if(null==t){if(e&&!0===e._isBigNumber){p.s=e.s,!e.c||e.e>O?p.c=p.e=null:e.e<T?p.c=[p.e=0]:(p.e=e.e,p.c=e.c.slice());return}if((l="number"==typeof e)&&0*e==0){if(p.s=1/e<0?(e=-e,-1):1,e===~~e){for(u=0,c=e;c>=10;c/=10,u++);u>O?p.c=p.e=null:(p.e=u,p.c=[e]);return}d=String(e)}else{if(!r.test(d=String(e)))return B(p,d,l);p.s=45==d.charCodeAt(0)?(d=d.slice(1),-1):1}(u=d.indexOf("."))>-1&&(d=d.replace(".","")),(c=d.search(/e/i))>0?(u<0&&(u=c),u+=+d.slice(c+1),d=d.substring(0,c)):u<0&&(u=d.length)}else{if(f(t,2,U.length,"Base"),10==t&&N)return D(p=new z(e),A+p.e+1,I);if(d=String(e),l="number"==typeof e){if(0*e!=0)return B(p,d,l,t);if(p.s=1/e<0?(d=d.slice(1),-1):1,z.DEBUG&&d.replace(/^0\.0*|\./,"").length>15)throw Error(s+e)}else p.s=45===d.charCodeAt(0)?(d=d.slice(1),-1):1;for(n=U.slice(0,t),u=c=0,h=d.length;c<h;c++)if(0>n.indexOf(o=d.charAt(c))){if("."==o){if(c>u){u=h;continue}}else if(!a&&(d==d.toUpperCase()&&(d=d.toLowerCase())||d==d.toLowerCase()&&(d=d.toUpperCase()))){a=!0,c=-1,u=0;continue}return B(p,String(e),l,t)}l=!1,(u=(d=S(d,t,10,p.s)).indexOf("."))>-1?d=d.replace(".",""):u=d.length}for(c=0;48===d.charCodeAt(c);c++);for(h=d.length;48===d.charCodeAt(--h););if(d=d.slice(c,++h)){if(h-=c,l&&z.DEBUG&&h>15&&(e>0x1fffffffffffff||e!==i(e)))throw Error(s+p.s*e);if((u=u-c-1)>O)p.c=p.e=null;else if(u<T)p.c=[p.e=0];else{if(p.e=u,p.c=[],c=(u+1)%14,u<0&&(c+=14),c<h){for(c&&p.c.push(+d.slice(0,c)),h-=14;c<h;)p.c.push(+d.slice(c,c+=14));c=14-(d=d.slice(c)).length}else c-=h;for(;c--;d+="0");p.c.push(+d)}}else p.c=[p.e=0]}function H(e,t,r,n){var i,o,s,a,u;if(null==r?r=I:f(r,0,8),!e.c)return e.toString();if(i=e.c[0],s=e.e,null==t)u=c(e.c),u=1==n||2==n&&(s<=_||s>=M)?d(u,s):p(u,s,"0");else if(o=(e=D(new z(e),t,r)).e,a=(u=c(e.c)).length,1==n||2==n&&(t<=o||o<=_)){for(;a<t;u+="0",a++);u=d(u,o)}else if(t-=s+(2===n&&o>s),u=p(u,o,"0"),o+1>a){if(--t>0)for(u+=".";t--;u+="0");}else if((t+=o-a)>0)for(o+1==a&&(u+=".");t--;u+="0");return e.s<0&&i?"-"+u:u}function F(e,t){for(var r,n,i=1,o=new z(e[0]);i<e.length;i++)(n=new z(e[i])).s&&(r=l(o,n))!==t&&(0!==r||o.s!==t)||(o=n);return o}function q(e,t,r){for(var n=1,i=t.length;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,n++);return(r=n+14*r-1)>O?e.c=e.e=null:r<T?e.c=[e.e=0]:(e.e=r,e.c=t),e}function D(e,t,r,o){var s,u,c,l,f,h,d,p=e.c;if(p){e:{for(s=1,l=p[0];l>=10;l/=10,s++);if((u=t-s)<0)u+=14,c=t,d=i((f=p[h=0])/a[s-c-1]%10);else if((h=n((u+1)/14))>=p.length)if(o){for(;p.length<=h;p.push(0));f=d=0,s=1,u%=14,c=u-14+1}else break e;else{for(s=1,f=l=p[h];l>=10;l/=10,s++);u%=14,d=(c=u-14+s)<0?0:i(f/a[s-c-1]%10)}if(o=o||t<0||null!=p[h+1]||(c<0?f:f%a[s-c-1]),o=r<4?(d||o)&&(0==r||r==(e.s<0?3:2)):d>5||5==d&&(4==r||o||6==r&&(u>0?c>0?f/a[s-c]:0:p[h-1])%10&1||r==(e.s<0?8:7)),t<1||!p[0])return p.length=0,o?(t-=e.e+1,p[0]=a[(14-t%14)%14],e.e=-t||0):p[0]=e.e=0,e;if(0==u?(p.length=h,l=1,h--):(p.length=h+1,l=a[14-u],p[h]=c>0?i(f/a[s-c]%a[c])*l:0),o)for(;;)if(0==h){for(u=1,c=p[0];c>=10;c/=10,u++);for(c=p[0]+=l,l=1;c>=10;c/=10,l++);u!=l&&(e.e++,1e14==p[0]&&(p[0]=1));break}else{if(p[h]+=l,1e14!=p[h])break;p[h--]=0,l=1}for(u=p.length;0===p[--u];p.pop());}e.e>O?e.c=e.e=null:e.e<T&&(e.c=[e.e=0])}return e}function W(e){var t,r=e.e;return null===r?e.toString():(t=c(e.c),t=r<=_||r>=M?d(t,r):p(t,r,"0"),e.s<0?"-"+t:t)}return z.clone=e,z.ROUND_UP=0,z.ROUND_DOWN=1,z.ROUND_CEIL=2,z.ROUND_FLOOR=3,z.ROUND_HALF_UP=4,z.ROUND_HALF_DOWN=5,z.ROUND_HALF_EVEN=6,z.ROUND_HALF_CEIL=7,z.ROUND_HALF_FLOOR=8,z.EUCLID=9,z.config=z.set=function(e){var t,r;if(null!=e)if("object"==typeof e){if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(f(r=e[t],0,1e9,t),A=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(f(r=e[t],0,8,t),I=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((r=e[t])&&r.pop?(f(r[0],-1e9,0,t),f(r[1],0,1e9,t),_=r[0],M=r[1]):(f(r,-1e9,1e9,t),_=-(M=r<0?-r:r))),e.hasOwnProperty(t="RANGE"))if((r=e[t])&&r.pop)f(r[0],-1e9,-1,t),f(r[1],1,1e9,t),T=r[0],O=r[1];else if(f(r,-1e9,1e9,t),r)T=-(O=r<0?-r:r);else throw Error(o+t+" cannot be zero: "+r);if(e.hasOwnProperty(t="CRYPTO"))if(!!(r=e[t])===r)if(r)if("undefined"!=typeof crypto&&crypto&&(crypto.getRandomValues||crypto.randomBytes))P=r;else throw P=!r,Error(o+"crypto unavailable");else P=r;else throw Error(o+t+" not true or false: "+r);if(e.hasOwnProperty(t="MODULO_MODE")&&(f(r=e[t],0,9,t),L=r),e.hasOwnProperty(t="POW_PRECISION")&&(f(r=e[t],0,1e9,t),R=r),e.hasOwnProperty(t="FORMAT"))if("object"==typeof(r=e[t]))C=r;else throw Error(o+t+" not an object: "+r);if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(r))throw Error(o+t+" invalid: "+r);N="0123456789"==r.slice(0,10),U=r}}else throw Error(o+"Object expected: "+e);return{DECIMAL_PLACES:A,ROUNDING_MODE:I,EXPONENTIAL_AT:[_,M],RANGE:[T,O],CRYPTO:P,MODULO_MODE:L,POW_PRECISION:R,FORMAT:C,ALPHABET:U}},z.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!z.DEBUG)return!0;var t,r,n=e.c,s=e.e,a=e.s;e:if("[object Array]"==({}).toString.call(n)){if((1===a||-1===a)&&s>=-1e9&&s<=1e9&&s===i(s)){if(0===n[0]){if(0===s&&1===n.length)return!0;break e}if((t=(s+1)%14)<1&&(t+=14),String(n[0]).length==t){for(t=0;t<n.length;t++)if((r=n[t])<0||r>=1e14||r!==i(r))break e;if(0!==r)return!0}}}else if(null===n&&null===s&&(null===a||1===a||-1===a))return!0;throw Error(o+"Invalid BigNumber: "+e)},z.maximum=z.max=function(){return F(arguments,-1)},z.minimum=z.min=function(){return F(arguments,1)},g=0x20000000000000*Math.random()&2097151?function(){return i(0x20000000000000*Math.random())}:function(){return(0x40000000*Math.random()|0)*8388608+(8388608*Math.random()|0)},z.random=function(e){var t,r,s,u,c,l=0,h=[],d=new z(E);if(null==e?e=A:f(e,0,1e9),u=n(e/14),P)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(u*=2));l<u;)(c=131072*t[l]+(t[l+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),t[l]=r[0],t[l+1]=r[1]):(h.push(c%1e14),l+=2);l=u/2}else if(crypto.randomBytes){for(t=crypto.randomBytes(u*=7);l<u;)(c=(31&t[l])*0x1000000000000+0x10000000000*t[l+1]+0x100000000*t[l+2]+0x1000000*t[l+3]+(t[l+4]<<16)+(t[l+5]<<8)+t[l+6])>=9e15?crypto.randomBytes(7).copy(t,l):(h.push(c%1e14),l+=7);l=u/7}else throw P=!1,Error(o+"crypto unavailable");if(!P)for(;l<u;)(c=g())<9e15&&(h[l++]=c%1e14);for(u=h[--l],e%=14,u&&e&&(c=a[14-e],h[l]=i(u/c)*c);0===h[l];h.pop(),l--);if(l<0)h=[s=0];else{for(s=-1;0===h[0];h.splice(0,1),s-=14);for(l=1,c=h[0];c>=10;c/=10,l++);l<14&&(s-=14-l)}return d.e=s,d.c=h,d},z.sum=function(){for(var e=1,t=arguments,r=new z(t[0]);e<t.length;)r=r.plus(t[e++]);return r},S=function(){var e="0123456789";function t(e,t,r,n){for(var i,o,s=[0],a=0,u=e.length;a<u;){for(o=s.length;o--;s[o]*=t);for(s[0]+=n.indexOf(e.charAt(a++)),i=0;i<s.length;i++)s[i]>r-1&&(null==s[i+1]&&(s[i+1]=0),s[i+1]+=s[i]/r|0,s[i]%=r)}return s.reverse()}return function(r,n,i,o,s){var a,u,l,f,h,d,g,m,y=r.indexOf("."),b=A,w=I;for(y>=0&&(f=R,R=0,r=r.replace(".",""),d=(m=new z(n)).pow(r.length-y),R=f,m.c=t(p(c(d.c),d.e,"0"),10,i,e),m.e=m.c.length),l=f=(g=t(r,n,i,s?(a=U,e):(a=e,U))).length;0==g[--f];g.pop());if(!g[0])return a.charAt(0);if(y<0?--l:(d.c=g,d.e=l,d.s=o,g=(d=x(d,m,b,w,i)).c,h=d.r,l=d.e),y=g[u=l+b+1],f=i/2,h=h||u<0||null!=g[u+1],h=w<4?(null!=y||h)&&(0==w||w==(d.s<0?3:2)):y>f||y==f&&(4==w||h||6==w&&1&g[u-1]||w==(d.s<0?8:7)),u<1||!g[0])r=h?p(a.charAt(1),-b,a.charAt(0)):a.charAt(0);else{if(g.length=u,h)for(--i;++g[--u]>i;)g[u]=0,u||(++l,g=[1].concat(g));for(f=g.length;!g[--f];);for(y=0,r="";y<=f;r+=a.charAt(g[y++]));r=p(r,l,a.charAt(0))}return r}}(),x=function(){function e(e,t,r){var n,i,o,s,a=0,u=e.length,c=t%1e7,l=t/1e7|0;for(e=e.slice();u--;)n=l*(o=e[u]%1e7)+(s=e[u]/1e7|0)*c,a=((i=c*o+n%1e7*1e7+a)/r|0)+(n/1e7|0)+l*s,e[u]=i%r;return a&&(e=[a].concat(e)),e}function t(e,t,r,n){var i,o;if(r!=n)o=r>n?1:-1;else for(i=o=0;i<r;i++)if(e[i]!=t[i]){o=e[i]>t[i]?1:-1;break}return o}function r(e,t,r,n){for(var i=0;r--;)e[r]-=i,i=+(e[r]<t[r]),e[r]=i*n+e[r]-t[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(n,o,s,a,c){var l,f,h,d,p,g,m,y,b,w,v,x,S,B,k,E,A,I=n.s==o.s?1:-1,_=n.c,M=o.c;if(!_||!_[0]||!M||!M[0])return new z(!n.s||!o.s||(_?M&&_[0]==M[0]:!M)?NaN:_&&0==_[0]||!M?0*I:I/0);for(b=(y=new z(I)).c=[],I=s+(f=n.e-o.e)+1,c||(c=1e14,f=u(n.e/14)-u(o.e/14),I=I/14|0),h=0;M[h]==(_[h]||0);h++);if(M[h]>(_[h]||0)&&f--,I<0)b.push(1),d=!0;else{for(B=_.length,E=M.length,h=0,I+=2,(p=i(c/(M[0]+1)))>1&&(M=e(M,p,c),_=e(_,p,c),E=M.length,B=_.length),S=E,v=(w=_.slice(0,E)).length;v<E;w[v++]=0);A=[0].concat(A=M.slice()),k=M[0],M[1]>=c/2&&k++;do{if(p=0,(l=t(M,w,E,v))<0){if(x=w[0],E!=v&&(x=x*c+(w[1]||0)),(p=i(x/k))>1)for(p>=c&&(p=c-1),m=(g=e(M,p,c)).length,v=w.length;1==t(g,w,m,v);)p--,r(g,E<m?A:M,m,c),m=g.length,l=1;else 0==p&&(l=p=1),m=(g=M.slice()).length;if(m<v&&(g=[0].concat(g)),r(w,g,v,c),v=w.length,-1==l)for(;1>t(M,w,E,v);)p++,r(w,E<v?A:M,v,c),v=w.length}else 0===l&&(p++,w=[0]);b[h++]=p,w[0]?w[v++]=_[S]||0:(w=[_[S]],v=1)}while((S++<B||null!=w[0])&&I--)d=null!=w[0],b[0]||b.splice(0,1)}if(1e14==c){for(h=1,I=b[0];I>=10;I/=10,h++);D(y,s+(y.e=h+14*f-1)+1,a,d)}else y.e=f,y.r=+d;return y}}(),m=/^(-?)0([xbo])(?=\w[\w.]*$)/i,y=/^([^.]+)\.$/,b=/^\.([^.]+)$/,w=/^-?(Infinity|NaN)$/,v=/^\s*\+(?=[\w.])|^\s+|\s+$/g,B=function(e,t,r,n){var i,s=r?t:t.replace(v,"");if(w.test(s))e.s=isNaN(s)?null:s<0?-1:1;else{if(!r&&(s=s.replace(m,function(e,t,r){return i="x"==(r=r.toLowerCase())?16:"b"==r?2:8,n&&n!=i?e:t}),n&&(i=n,s=s.replace(y,"$1").replace(b,"0.$1")),t!=s))return new z(s,i);if(z.DEBUG)throw Error(o+"Not a"+(n?" base "+n:"")+" number: "+t);e.s=null}e.c=e.e=null},k.absoluteValue=k.abs=function(){var e=new z(this);return e.s<0&&(e.s=1),e},k.comparedTo=function(e,t){return l(this,new z(e,t))},k.decimalPlaces=k.dp=function(e,t){var r,n,i;if(null!=e)return f(e,0,1e9),null==t?t=I:f(t,0,8),D(new z(this),e+this.e+1,t);if(!(r=this.c))return null;if(n=((i=r.length-1)-u(this.e/14))*14,i=r[i])for(;i%10==0;i/=10,n--);return n<0&&(n=0),n},k.dividedBy=k.div=function(e,t){return x(this,new z(e,t),A,I)},k.dividedToIntegerBy=k.idiv=function(e,t){return x(this,new z(e,t),0,1)},k.exponentiatedBy=k.pow=function(e,t){var r,s,a,u,c,l,f,d,p,g=this;if((e=new z(e)).c&&!e.isInteger())throw Error(o+"Exponent not an integer: "+W(e));if(null!=t&&(t=new z(t)),l=e.e>14,!g.c||!g.c[0]||1==g.c[0]&&!g.e&&1==g.c.length||!e.c||!e.c[0])return p=new z(Math.pow(+W(g),l?e.s*(2-h(e)):+W(e))),t?p.mod(t):p;if(f=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new z(NaN);(s=!f&&g.isInteger()&&t.isInteger())&&(g=g.mod(t))}else{if(e.e>9&&(g.e>0||g.e<-1||(0==g.e?g.c[0]>1||l&&g.c[1]>=24e7:g.c[0]<8e13||l&&g.c[0]<=9999975e7)))return u=g.s<0&&h(e)?-0:0,g.e>-1&&(u=1/u),new z(f?1/u:u);R&&(u=n(R/14+2))}for(l?(r=new z(.5),f&&(e.s=1),d=h(e)):d=(a=Math.abs(+W(e)))%2,p=new z(E);;){if(d){if(!(p=p.times(g)).c)break;u?p.c.length>u&&(p.c.length=u):s&&(p=p.mod(t))}if(a){if(0===(a=i(a/2)))break;d=a%2}else if(D(e=e.times(r),e.e+1,1),e.e>14)d=h(e);else{if(0==(a=+W(e)))break;d=a%2}g=g.times(g),u?g.c&&g.c.length>u&&(g.c.length=u):s&&(g=g.mod(t))}return s?p:(f&&(p=E.div(p)),t?p.mod(t):u?D(p,R,I,c):p)},k.integerValue=function(e){var t=new z(this);return null==e?e=I:f(e,0,8),D(t,t.e+1,e)},k.isEqualTo=k.eq=function(e,t){return 0===l(this,new z(e,t))},k.isFinite=function(){return!!this.c},k.isGreaterThan=k.gt=function(e,t){return l(this,new z(e,t))>0},k.isGreaterThanOrEqualTo=k.gte=function(e,t){return 1===(t=l(this,new z(e,t)))||0===t},k.isInteger=function(){return!!this.c&&u(this.e/14)>this.c.length-2},k.isLessThan=k.lt=function(e,t){return 0>l(this,new z(e,t))},k.isLessThanOrEqualTo=k.lte=function(e,t){return -1===(t=l(this,new z(e,t)))||0===t},k.isNaN=function(){return!this.s},k.isNegative=function(){return this.s<0},k.isPositive=function(){return this.s>0},k.isZero=function(){return!!this.c&&0==this.c[0]},k.minus=function(e,t){var r,n,i,o,s=this.s;if(t=(e=new z(e,t)).s,!s||!t)return new z(NaN);if(s!=t)return e.s=-t,this.plus(e);var a=this.e/14,c=e.e/14,l=this.c,f=e.c;if(!a||!c){if(!l||!f)return l?(e.s=-t,e):new z(f?this:NaN);if(!l[0]||!f[0])return f[0]?(e.s=-t,e):new z(l[0]?this:3==I?-0:0)}if(a=u(a),c=u(c),l=l.slice(),s=a-c){for((o=s<0)?(s=-s,i=l):(c=a,i=f),i.reverse(),t=s;t--;i.push(0));i.reverse()}else for(n=(o=(s=l.length)<(t=f.length))?s:t,s=t=0;t<n;t++)if(l[t]!=f[t]){o=l[t]<f[t];break}if(o&&(i=l,l=f,f=i,e.s=-e.s),(t=(n=f.length)-(r=l.length))>0)for(;t--;l[r++]=0);for(t=1e14-1;n>s;){if(l[--n]<f[n]){for(r=n;r&&!l[--r];l[r]=t);--l[r],l[n]+=1e14}l[n]-=f[n]}for(;0==l[0];l.splice(0,1),--c);return l[0]?q(e,l,c):(e.s=3==I?-1:1,e.c=[e.e=0],e)},k.modulo=k.mod=function(e,t){var r,n;return(e=new z(e,t),this.c&&e.s&&(!e.c||e.c[0]))?e.c&&(!this.c||this.c[0])?(9==L?(n=e.s,e.s=1,r=x(this,e,0,3),e.s=n,r.s*=n):r=x(this,e,0,L),(e=this.minus(r.times(e))).c[0]||1!=L||(e.s=this.s),e):new z(this):new z(NaN)},k.multipliedBy=k.times=function(e,t){var r,n,i,o,s,a,c,l,f,h,d,p,g,m=this.c,y=(e=new z(e,t)).c;if(!m||!y||!m[0]||!y[0])return this.s&&e.s&&(!m||m[0]||y)&&(!y||y[0]||m)?(e.s*=this.s,m&&y?(e.c=[0],e.e=0):e.c=e.e=null):e.c=e.e=e.s=null,e;for(n=u(this.e/14)+u(e.e/14),e.s*=this.s,(c=m.length)<(h=y.length)&&(g=m,m=y,y=g,i=c,c=h,h=i),i=c+h,g=[];i--;g.push(0));for(i=h;--i>=0;){for(r=0,d=y[i]%1e7,p=y[i]/1e7|0,o=i+(s=c);o>i;)a=p*(l=m[--s]%1e7)+(f=m[s]/1e7|0)*d,r=((l=d*l+a%1e7*1e7+g[o]+r)/1e14|0)+(a/1e7|0)+p*f,g[o--]=l%1e14;g[o]=r}return r?++n:g.splice(0,1),q(e,g,n)},k.negated=function(){var e=new z(this);return e.s=-e.s||null,e},k.plus=function(e,t){var r,n=this.s;if(t=(e=new z(e,t)).s,!n||!t)return new z(NaN);if(n!=t)return e.s=-t,this.minus(e);var i=this.e/14,o=e.e/14,s=this.c,a=e.c;if(!i||!o){if(!s||!a)return new z(n/0);if(!s[0]||!a[0])return a[0]?e:new z(s[0]?this:0*n)}if(i=u(i),o=u(o),s=s.slice(),n=i-o){for(n>0?(o=i,r=a):(n=-n,r=s),r.reverse();n--;r.push(0));r.reverse()}for((n=s.length)-(t=a.length)<0&&(r=a,a=s,s=r,t=n),n=0;t;)n=(s[--t]=s[t]+a[t]+n)/1e14|0,s[t]=1e14===s[t]?0:s[t]%1e14;return n&&(s=[n].concat(s),++o),q(e,s,o)},k.precision=k.sd=function(e,t){var r,n,i;if(null!=e&&!!e!==e)return f(e,1,1e9),null==t?t=I:f(t,0,8),D(new z(this),e,t);if(!(r=this.c))return null;if(n=14*(i=r.length-1)+1,i=r[i]){for(;i%10==0;i/=10,n--);for(i=r[0];i>=10;i/=10,n++);}return e&&this.e+1>n&&(n=this.e+1),n},k.shiftedBy=function(e){return f(e,-0x1fffffffffffff,0x1fffffffffffff),this.times("1e"+e)},k.squareRoot=k.sqrt=function(){var e,t,r,n,i,o=this.c,s=this.s,a=this.e,l=A+4,f=new z("0.5");if(1!==s||!o||!o[0])return new z(!s||s<0&&(!o||o[0])?NaN:o?this:1/0);if(0==(s=Math.sqrt(+W(this)))||s==1/0?(((t=c(o)).length+a)%2==0&&(t+="0"),s=Math.sqrt(+t),a=u((a+1)/2)-(a<0||a%2),r=new z(t=s==1/0?"5e"+a:(t=s.toExponential()).slice(0,t.indexOf("e")+1)+a)):r=new z(s+""),r.c[0]){for((s=(a=r.e)+l)<3&&(s=0);;)if(i=r,r=f.times(i.plus(x(this,i,l,1))),c(i.c).slice(0,s)===(t=c(r.c)).slice(0,s)){if(r.e<a&&--s,"9999"!=(t=t.slice(s-3,s+1))&&(n||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(D(r,r.e+A+2,1),e=!r.times(r).eq(this));break}if(!n&&(D(i,i.e+A+2,0),i.times(i).eq(this))){r=i;break}l+=4,s+=4,n=1}}return D(r,r.e+A+1,I,e)},k.toExponential=function(e,t){return null!=e&&(f(e,0,1e9),e++),H(this,e,t,1)},k.toFixed=function(e,t){return null!=e&&(f(e,0,1e9),e=e+this.e+1),H(this,e,t)},k.toFormat=function(e,t,r){var n;if(null==r)null!=e&&t&&"object"==typeof t?(r=t,t=null):e&&"object"==typeof e?(r=e,e=t=null):r=C;else if("object"!=typeof r)throw Error(o+"Argument not an object: "+r);if(n=this.toFixed(e,t),this.c){var i,s=n.split("."),a=+r.groupSize,u=+r.secondaryGroupSize,c=r.groupSeparator||"",l=s[0],f=s[1],h=this.s<0,d=h?l.slice(1):l,p=d.length;if(u&&(i=a,a=u,u=i,p-=i),a>0&&p>0){for(i=p%a||a,l=d.substr(0,i);i<p;i+=a)l+=c+d.substr(i,a);u>0&&(l+=c+d.slice(i)),h&&(l="-"+l)}n=f?l+(r.decimalSeparator||"")+((u=+r.fractionGroupSize)?f.replace(RegExp("\\d{"+u+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):f):l}return(r.prefix||"")+n+(r.suffix||"")},k.toFraction=function(e){var t,r,n,i,s,u,l,f,h,d,p,g,m=this.c;if(null!=e&&(!(l=new z(e)).isInteger()&&(l.c||1!==l.s)||l.lt(E)))throw Error(o+"Argument "+(l.isInteger()?"out of range: ":"not an integer: ")+W(l));if(!m)return new z(this);for(t=new z(E),h=r=new z(E),n=f=new z(E),g=c(m),s=t.e=g.length-this.e-1,t.c[0]=a[(u=s%14)<0?14+u:u],e=!e||l.comparedTo(t)>0?s>0?t:h:l,u=O,O=1/0,l=new z(g),f.c[0]=0;d=x(l,t,0,1),1!=(i=r.plus(d.times(n))).comparedTo(e);)r=n,n=i,h=f.plus(d.times(i=h)),f=i,t=l.minus(d.times(i=t)),l=i;return i=x(e.minus(r),n,0,1),f=f.plus(i.times(h)),r=r.plus(i.times(n)),f.s=h.s=this.s,s*=2,p=1>x(h,n,s,I).minus(this).abs().comparedTo(x(f,r,s,I).minus(this).abs())?[h,n]:[f,r],O=u,p},k.toNumber=function(){return+W(this)},k.toPrecision=function(e,t){return null!=e&&f(e,1,1e9),H(this,e,t,2)},k.toString=function(e){var t,r=this,n=r.s,i=r.e;return null===i?n?(t="Infinity",n<0&&(t="-"+t)):t="NaN":(null==e?t=i<=_||i>=M?d(c(r.c),i):p(c(r.c),i,"0"):10===e&&N?t=p(c((r=D(new z(r),A+i+1,I)).c),r.e,"0"):(f(e,2,U.length,"Base"),t=S(p(c(r.c),i,"0"),10,e,n,!0)),n<0&&r.c[0]&&(t="-"+t)),t},k.valueOf=k.toJSON=function(){return W(this)},k._isBigNumber=!0,null!=t&&z.set(t),z}()).default=t.BigNumber=t,"function"==typeof define&&define.amd?define(function(){return t}):aI?aI=t:(e||(e="undefined"!=typeof self&&self?self:window),e.BigNumber=t)}(aI),new(i(aI))("1e+18");let a_=e=>{let t=(0,rI.u8)(e),{encode:r,decode:n}=av(t);return t.decode=(e,t)=>!!n(e,t),t.encode=(e,t,n)=>r(Number(e),t,n),t},aM=e=>{let t=(0,rI.blob)(32,e),{encode:r,decode:n}=av(t);return t.decode=(e,t)=>new i2(n(e,t)),t.encode=(e,t,n)=>r(e.toBuffer(),t,n),t};class aT extends Error{constructor(e){super(e)}}class aO extends aT{constructor(){super(...arguments),this.name="TokenAccountNotFoundError"}}class aP extends aT{constructor(){super(...arguments),this.name="TokenInvalidAccountError"}}class aL extends aT{constructor(){super(...arguments),this.name="TokenInvalidAccountOwnerError"}}class aR extends aT{constructor(){super(...arguments),this.name="TokenInvalidAccountSizeError"}}class aC extends aT{constructor(){super(...arguments),this.name="TokenInvalidMintError"}}class aU extends aT{constructor(){super(...arguments),this.name="TokenOwnerOffCurveError"}}(u=m||(m={}))[u.Uninitialized=0]="Uninitialized",u[u.Mint=1]="Mint",u[u.Account=2]="Account";let aN=(0,rI.struct)([(0,rI.u8)("m"),(0,rI.u8)("n"),a_("isInitialized"),aM("signer1"),aM("signer2"),aM("signer3"),aM("signer4"),aM("signer5"),aM("signer6"),aM("signer7"),aM("signer8"),aM("signer9"),aM("signer10"),aM("signer11")]).span;var E=B("6ZWSX"),az=E.Buffer;(c=y||(y={}))[c.Uninitialized=0]="Uninitialized",c[c.Initialized=1]="Initialized",c[c.Frozen=2]="Frozen";let aH=(0,rI.struct)([aM("mint"),aM("owner"),aA("amount"),(0,rI.u32)("delegateOption"),aM("delegate"),(0,rI.u8)("state"),(0,rI.u32)("isNativeOption"),aA("isNative"),aA("delegatedAmount"),(0,rI.u32)("closeAuthorityOption"),aM("closeAuthority")]),aF=aH.span;async function aq(e,t,r,n=ab){let i=await e.getAccountInfo(t,r);return function(e,t,r=ab){if(!t)throw new aO;if(!t.owner.equals(r))throw new aL;if(t.data.length<aF)throw new aR;let n=aH.decode(t.data.slice(0,aF)),i=az.alloc(0);if(t.data.length>aF){if(t.data.length===aN)throw new aR;if(t.data[aF]!=m.Account)throw new aP;i=t.data.slice(aF+1)}return{address:e,mint:n.mint,owner:n.owner,amount:n.amount,delegate:n.delegateOption?n.delegate:null,delegatedAmount:n.delegatedAmount,isInitialized:n.state!==y.Uninitialized,isFrozen:n.state===y.Frozen,isNative:!!n.isNativeOption,rentExemptReserve:n.isNativeOption?n.isNative:null,closeAuthority:n.closeAuthorityOption?n.closeAuthority:null,tlvData:i}}(t,i,n)}function aD([e,t]){return`${e}=${function e(t){return Array.isArray(t)?"%5B"+t.map(e).join("%2C%20")+"%5D":"bigint"==typeof t?`${t}n`:encodeURIComponent(String(null!=t&&null===Object.getPrototypeOf(t)?{...t}:t))}(t)}`}(0,rI.struct)([a_("lockCpi")]).span,(0,rI.struct)([(0,rI.u8)("state")]).span;var aW=class extends Error{cause=this.cause;context;constructor(...[e,t]){let r,n;if(t){let{cause:e,...i}=t;e&&(n={cause:e}),Object.keys(i).length>0&&(r=i)}super(function(e,t={}){{let r=`Solana error #${e}; Decode this error by running \`npx @solana/errors decode -- ${e}`;return Object.keys(t).length&&(r+=` '${btoa(Object.entries(t).map(aD).join("&"))}'`),`${r}\``}}(e,r),n),this.context={__code:e,...r},this.name="SolanaError"}};function aj(e,t){return"fixedSize"in t?t.fixedSize:t.getSizeFromValue(e)}function aK(e){return Object.freeze({...e,encode:t=>{let r=new Uint8Array(aj(t,e));return e.write(t,r,0),r}})}function aV(e){return Object.freeze({...e,decode:(t,r=0)=>e.read(t,r)[0]})}function a$(e){return"fixedSize"in e&&"number"==typeof e.fixedSize}function aZ(e,t){if(a$(e)!==a$(t))throw new aW(8078004);if(a$(e)&&a$(t)&&e.fixedSize!==t.fixedSize)throw new aW(8078005,{decoderFixedSize:t.fixedSize,encoderFixedSize:e.fixedSize});if(!a$(e)&&!a$(t)&&e.maxSize!==t.maxSize)throw new aW(8078006,{decoderMaxSize:t.maxSize,encoderMaxSize:e.maxSize});return{...t,...e,decode:t.decode,encode:e.encode,read:t.read,write:e.write}}function aG(e,t,r,n=0){let i=r.length-n;if(i<t)throw new aW(8078001,{bytesLength:i,codecDescription:e,expected:t})}function aX(e,t){return aZ(aK({fixedSize:t,write:(r,n,i)=>{let o=e.encode(r),s=o.length>t?o.slice(0,t):o;return n.set(s,i),i+t}}),aV({fixedSize:t,read:(r,n)=>{let i,o;aG("fixCodecSize",t,r,n),(n>0||r.length>t)&&(r=r.slice(n,n+t)),a$(e)&&(i=r,o=e.fixedSize,r=((e,t)=>{if(e.length>=t)return e;let r=new Uint8Array(t).fill(0);return r.set(e),r})(i.length<=o?i:i.slice(0,o),o));let[s]=e.read(r,0);return[s,n+t]}}))}var aY=((l=aY||{})[l.Little=0]="Little",l[l.Big=1]="Big",l);function aJ(e){return e?.endian!==1}var aQ=(e={})=>aZ(((e={})=>{var t;return aK({fixedSize:(t={config:e,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,t,r)=>e.setBigUint64(0,BigInt(t),r),size:8}).size,write(e,r,n){t.range&&function(e,t,r,n){if(n<t||n>r)throw new aW(8078011,{codecDescription:e,max:r,min:t,value:n})}(t.name,t.range[0],t.range[1],e);let i=new ArrayBuffer(t.size);return t.set(new DataView(i),e,aJ(t.config)),r.set(new Uint8Array(i),n),n+t.size}})})(e),((e={})=>{var t;return aV({fixedSize:(t={config:e,get:(e,t)=>e.getBigUint64(0,t),name:"u64",size:8}).size,read(e,r=0){var n,i,o;let s,a;!function(e,t,r=0){if(t.length-r<=0)throw new aW(8078e3,{codecDescription:e})}(t.name,e,r),aG(t.name,t.size,e,r);let u=new DataView((n=e,i=r,o=t.size,s=n.byteOffset+(i??0),a=o??n.byteLength,n.buffer.slice(s,s+a)));return[t.get(u,aJ(t.config)),r+t.size]}})})(e));function a0(e){return e.reduce((e,t)=>null===e||null===t?null:e+t,0)}function a1(e){return a$(e)?e.fixedSize:null}function a2(e){return a$(e)?e.fixedSize:e.maxSize??null}function a3(){return aZ(aK({getSizeFromValue:e=>e.length,write:(e,t,r)=>(t.set(e,r),r+e.length)}),aV({read:(e,t)=>{let r=e.slice(t);return[r,t+r.length]}}))}function a6(e){let t,r,n,i,o,s;return aZ((r=a0((t=e.map(([,e])=>e)).map(a1)),n=a0(t.map(a2))??void 0,aK({...null===r?{getSizeFromValue:t=>e.map(([e,r])=>aj(t[e],r)).reduce((e,t)=>e+t,0),maxSize:n}:{fixedSize:r},write:(t,r,n)=>(e.forEach(([e,i])=>{n=i.write(t[e],r,n)}),n)})),(o=a0((i=e.map(([,e])=>e)).map(a1)),s=a0(i.map(a2))??void 0,aV({...null===o?{maxSize:s}:{fixedSize:o},read:(t,r)=>{let n={};return e.forEach(([e,i])=>{let[o,s]=i.read(t,r);r=s,n[e]=o}),[n,r]}})))}a6([["mint",aX(a3(),32)],["group",aX(a3(),32)],["memberNumber",aQ()]]).fixedSize,a6([["updateAuthority",aX(a3(),32)],["mint",aX(a3(),32)],["size",aQ()],["maxSize",aQ()]]).fixedSize,(0,rI.struct)([aM("authority"),aM("memberAddress")]).span,(0,rI.struct)([aM("authority"),aM("groupAddress")]).span,(0,rI.struct)([]).span,(0,rI.struct)([aM("rateAuthority"),(0,rI.ns64)("initializationTimestamp"),(0,rI.s16)("preUpdateAverageRate"),(0,rI.ns64)("lastUpdateTimestamp"),(0,rI.s16)("currentRate")]).span,(0,rI.struct)([a_("requireIncomingTransferMemos")]).span,(0,rI.struct)([aM("authority"),aM("metadataAddress")]).span,(0,rI.struct)([aM("closeAuthority")]).span;let a8=(0,rI.struct)([]);function a5(e){return(0,rI.struct)([aA("epoch"),aA("maximumFee"),(0,rI.u16)("transferFeeBasisPoints")],e)}a8.span,a8.span,(0,rI.struct)([aM("authority"),a_("paused")]).span,(0,rI.struct)([]).span,(0,rI.struct)([aM("delegate")]).span,(0,rI.struct)([aM("authority"),(0,rI.f64)("multiplier"),aA("newMultiplierEffectiveTimestamp"),(0,rI.f64)("newMultiplier")]).span,BigInt(1e4),(0,rI.struct)([aM("transferFeeConfigAuthority"),aM("withdrawWithheldAuthority"),aA("withheldAmount"),a5("olderTransferFee"),a5("newerTransferFee")]).span,(0,rI.struct)([aA("withheldAmount")]).span;var E=B("6ZWSX");E.Buffer;var E=B("6ZWSX");E.Buffer,(0,rI.struct)([aM("authority"),aM("programId")]).span,(0,rI.struct)([a_("transferring")]).span;let a4=(0,rI.struct)([(0,rI.u8)("discriminator"),(0,rI.blob)(32,"addressConfig"),a_("isSigner"),a_("isWritable")]),a9=(0,rI.struct)([(0,rI.u32)("count"),(0,rI.seq)(a4,(0,rI.greedy)(a4.span),"extraAccounts")]);(0,rI.struct)([aA("instructionDiscriminator"),(0,rI.u32)("length"),a9.replicate("extraAccountsList")]),(f=b||(b={}))[f.Uninitialized=0]="Uninitialized",f[f.TransferFeeConfig=1]="TransferFeeConfig",f[f.TransferFeeAmount=2]="TransferFeeAmount",f[f.MintCloseAuthority=3]="MintCloseAuthority",f[f.ConfidentialTransferMint=4]="ConfidentialTransferMint",f[f.ConfidentialTransferAccount=5]="ConfidentialTransferAccount",f[f.DefaultAccountState=6]="DefaultAccountState",f[f.ImmutableOwner=7]="ImmutableOwner",f[f.MemoTransfer=8]="MemoTransfer",f[f.NonTransferable=9]="NonTransferable",f[f.InterestBearingConfig=10]="InterestBearingConfig",f[f.CpiGuard=11]="CpiGuard",f[f.PermanentDelegate=12]="PermanentDelegate",f[f.NonTransferableAccount=13]="NonTransferableAccount",f[f.TransferHook=14]="TransferHook",f[f.TransferHookAccount=15]="TransferHookAccount",f[f.MetadataPointer=18]="MetadataPointer",f[f.TokenMetadata=19]="TokenMetadata",f[f.GroupPointer=20]="GroupPointer",f[f.TokenGroup=21]="TokenGroup",f[f.GroupMemberPointer=22]="GroupMemberPointer",f[f.TokenGroupMember=23]="TokenGroupMember",f[f.ScaledUiAmountConfig=25]="ScaledUiAmountConfig",f[f.PausableConfig=26]="PausableConfig",f[f.PausableAccount=27]="PausableAccount";var E=B("6ZWSX"),a7=E.Buffer;let ue=(0,rI.struct)([(0,rI.u32)("mintAuthorityOption"),aM("mintAuthority"),aA("supply"),(0,rI.u8)("decimals"),a_("isInitialized"),(0,rI.u32)("freezeAuthorityOption"),aM("freezeAuthority")]),ut=ue.span;async function ur(e,t,r,n=ab){let i=await e.getAccountInfo(t,r);return function(e,t,r=ab){if(!t)throw new aO;if(!t.owner.equals(r))throw new aL;if(t.data.length<ut)throw new aR;let n=ue.decode(t.data.slice(0,ut)),i=a7.alloc(0);if(t.data.length>ut){if(t.data.length<=aF||t.data.length===aN)throw new aR;if(t.data[aF]!=m.Mint)throw new aC;i=t.data.slice(aF+1)}return{address:e,mintAuthority:n.mintAuthorityOption?n.mintAuthority:null,supply:n.supply,decimals:n.decimals,isInitialized:n.isInitialized,freezeAuthority:n.freezeAuthorityOption?n.freezeAuthority:null,tlvData:i}}(t,i,n)}async function un(e,t,r=!1,n=ab,i=aw){if(!r&&!i2.isOnCurve(t.toBuffer()))throw new aU;let[o]=await i2.findProgramAddress([t.toBuffer(),n.toBuffer(),e.toBuffer()],i);return o}var E=B("6ZWSX"),ui=E.Buffer;function uo(e,t,r,n,i=ab,o=aw){return function(e,t,r,n,i,o=ab,s=aw){return new ol({keys:[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:oI.programId,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!1,isWritable:!1}],programId:s,data:i})}(e,t,r,n,ui.alloc(0),i,o)}function us(e,t,r){if(r.length)for(let n of(e.push({pubkey:t,isSigner:!1,isWritable:!1}),r))e.push({pubkey:n instanceof i2?n:n.publicKey,isSigner:!0,isWritable:!1});else e.push({pubkey:t,isSigner:!0,isWritable:!1});return e}(h=w||(w={}))[h.InitializeMint=0]="InitializeMint",h[h.InitializeAccount=1]="InitializeAccount",h[h.InitializeMultisig=2]="InitializeMultisig",h[h.Transfer=3]="Transfer",h[h.Approve=4]="Approve",h[h.Revoke=5]="Revoke",h[h.SetAuthority=6]="SetAuthority",h[h.MintTo=7]="MintTo",h[h.Burn=8]="Burn",h[h.CloseAccount=9]="CloseAccount",h[h.FreezeAccount=10]="FreezeAccount",h[h.ThawAccount=11]="ThawAccount",h[h.TransferChecked=12]="TransferChecked",h[h.ApproveChecked=13]="ApproveChecked",h[h.MintToChecked=14]="MintToChecked",h[h.BurnChecked=15]="BurnChecked",h[h.InitializeAccount2=16]="InitializeAccount2",h[h.SyncNative=17]="SyncNative",h[h.InitializeAccount3=18]="InitializeAccount3",h[h.InitializeMultisig2=19]="InitializeMultisig2",h[h.InitializeMint2=20]="InitializeMint2",h[h.GetAccountDataSize=21]="GetAccountDataSize",h[h.InitializeImmutableOwner=22]="InitializeImmutableOwner",h[h.AmountToUiAmount=23]="AmountToUiAmount",h[h.UiAmountToAmount=24]="UiAmountToAmount",h[h.InitializeMintCloseAuthority=25]="InitializeMintCloseAuthority",h[h.TransferFeeExtension=26]="TransferFeeExtension",h[h.ConfidentialTransferExtension=27]="ConfidentialTransferExtension",h[h.DefaultAccountStateExtension=28]="DefaultAccountStateExtension",h[h.Reallocate=29]="Reallocate",h[h.MemoTransferExtension=30]="MemoTransferExtension",h[h.CreateNativeMint=31]="CreateNativeMint",h[h.InitializeNonTransferableMint=32]="InitializeNonTransferableMint",h[h.InterestBearingMintExtension=33]="InterestBearingMintExtension",h[h.CpiGuardExtension=34]="CpiGuardExtension",h[h.InitializePermanentDelegate=35]="InitializePermanentDelegate",h[h.TransferHookExtension=36]="TransferHookExtension",h[h.MetadataPointerExtension=39]="MetadataPointerExtension",h[h.GroupPointerExtension=40]="GroupPointerExtension",h[h.GroupMemberPointerExtension=41]="GroupMemberPointerExtension",h[h.ScaledUiAmountExtension=43]="ScaledUiAmountExtension",h[h.PausableExtension=44]="PausableExtension";var E=B("6ZWSX"),ua=E.Buffer;let uu=(0,rI.struct)([(0,rI.u8)("instruction"),aA("amount")]);class uc extends rI.Layout{constructor(e){super(-1,e),this.publicKeyLayout=aM()}decode(e,t=0){return 0===e[t]?null:this.publicKeyLayout.decode(e,t+1)}encode(e,t,r=0){return null===e?(t[r]=0,1):(t[r]=1,this.publicKeyLayout.encode(e,t,r+1),33)}getSpan(e,t=0){if(e)return 0===e[t]?1:1+this.publicKeyLayout.span;throw RangeError("Buffer must be provided")}}var E=B("6ZWSX"),ul=E.Buffer;let uf=(0,rI.struct)([(0,rI.u8)("instruction"),(0,rI.u8)("decimals"),aM("mintAuthority"),new uc("freezeAuthority")]);var E=B("6ZWSX"),uh=E.Buffer;let ud=(0,rI.struct)([(0,rI.u8)("instruction"),aA("amount")]);var E=B("6ZWSX"),up=E.Buffer;let ug=(0,rI.struct)([(0,rI.u8)("instruction"),aA("amount")]),um=document.getElementById("connectBtn"),uy=document.getElementById("walletInfo"),ub=document.getElementById("createMintBtn"),uw=document.getElementById("decimals"),uv=document.getElementById("mintResult"),ux=document.getElementById("mintResult2"),uS=document.getElementById("createAccountBtn"),uB=document.getElementById("accountResult"),uk=document.getElementById("mintAmount"),uE=document.getElementById("mintBtn");document.getElementById("transferBtn");let uA=document.getElementById("destWallet"),uI=document.getElementById("transferAmount"),u_=document.getElementById("transferResult"),uM=document.getElementById("burnBtn"),uT=document.getElementById("burnAmount"),uO=document.getElementById("burnResult"),uP=document.getElementById("refreshMintBtn"),uL=document.getElementById("mintInfo"),uR=new class{constructor(e,t){var r,n,o,s,a,u,c;let l,f,h,d,p,g,m,y,b,w;this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(m={},async e=>{let{commitment:t,config:r}=oF(e),n=this._buildArgs([],t,void 0,r),i=oM(n);return m[i]=m[i]??(async()=>{try{let e=await this._rpcRequest("getBlockHeight",n),t=nf(e,oj(nw()));if("error"in t)throw new oy(t.error,"failed to get block height information");return t.result}finally{delete m[i]}})(),await m[i]}),t&&"string"==typeof t?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,l=t.wsEndpoint,f=t.httpHeaders,h=t.fetch,d=t.fetchMiddleware,p=t.disableRetryOnRateLimit,g=t.httpAgent),this._rpcEndpoint=function(e){if(!1===/^https?:/.test(e))throw TypeError("Endpoint URL must start with `http:` or `https:`.");return e}(e),this._rpcWsEndpoint=l||function(e){let t=e.match(oU);if(null==t)throw TypeError(`Failed to validate endpoint URL \`${e}\``);let[r,n,i,o]=t,s=e.startsWith("https:")?"wss:":"ws:",a=null==i?null:parseInt(i.slice(1),10),u=null==a?"":`:${a+1}`;return`${s}//${n}${u}${o}`}(e),this._rpcClient=(r=f,n=h,o=d,s=p,a=g,w=n||oP,null!=a&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments."),o&&(b=async(e,t)=>{let r=await new Promise((r,n)=>{try{o(e,t,(e,t)=>r([e,t]))}catch(e){n(e)}});return await w(...r)}),new(i(n_))(async(t,n)=>{let i={method:"POST",body:t,agent:y,headers:Object.assign({"Content-Type":"application/json"},r||{},ao)};try{let t,r=5,o=500;for(;(t=b?await b(e,i):await w(e,i),429===t.status&&!0!==s)&&(r-=1,0!==r);){;console.error(`Server responded with ${t.status} ${t.statusText}.  Retrying after ${o}ms delay...`),await ow(o),o*=2}let a=await t.text();t.ok?n(null,a):n(Error(`${t.status} ${t.statusText}: ${a}`))}catch(e){e instanceof Error&&n(e)}},{})),this._rpcRequest=(u=this._rpcClient,(e,t)=>new Promise((r,n)=>{u.request(e,t,(e,t)=>{e?n(e):r(t)})})),this._rpcBatchRequest=(c=this._rpcClient,e=>new Promise((t,r)=>{0===e.length&&t([]);let n=e.map(e=>c.request(e.methodName,e.args));c.request(n,(e,n)=>{e?r(e):t(n)})})),this._rpcWebSocket=new oL(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){let{commitment:r,config:n}=oF(t),i=this._buildArgs([e.toBase58()],r,void 0,n),o=nf(await this._rpcRequest("getBalance",i),oK(nw()));if("error"in o)throw new oy(o.error,`failed to get balance for ${e.toBase58()}`);return o.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then(e=>e.value).catch(t=>{throw Error("failed to get balance of account "+e.toBase58()+": "+t)})}async getBlockTime(e){let t=nf(await this._rpcRequest("getBlockTime",[e]),oj(nb(nw())));if("error"in t)throw new oy(t.error,`failed to get block time for slot ${e}`);return t.result}async getMinimumLedgerSlot(){let e=nf(await this._rpcRequest("minimumLedgerSlot",[]),oj(nw()));if("error"in e)throw new oy(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){let e=nf(await this._rpcRequest("getFirstAvailableBlock",[]),so);if("error"in e)throw new oy(e.error,"failed to get first available block");return e.result}async getSupply(e){let t={};t="string"==typeof e?{commitment:e}:e?{...e,commitment:e&&e.commitment||this.commitment}:{commitment:this.commitment};let r=nf(await this._rpcRequest("getSupply",[t]),ss);if("error"in r)throw new oy(r.error,"failed to get supply");return r.result}async getTokenSupply(e,t){let r=this._buildArgs([e.toBase58()],t),n=nf(await this._rpcRequest("getTokenSupply",r),oK(sa));if("error"in n)throw new oy(n.error,"failed to get token supply");return n.result}async getTokenAccountBalance(e,t){let r=this._buildArgs([e.toBase58()],t),n=nf(await this._rpcRequest("getTokenAccountBalance",r),oK(sa));if("error"in n)throw new oy(n.error,"failed to get token account balance");return n.result}async getTokenAccountsByOwner(e,t,r){let{commitment:n,config:i}=oF(r),o=[e.toBase58()];"mint"in t?o.push({mint:t.mint.toBase58()}):o.push({programId:t.programId.toBase58()});let s=this._buildArgs(o,n,"base64",i),a=nf(await this._rpcRequest("getTokenAccountsByOwner",s),sc);if("error"in a)throw new oy(a.error,`failed to get token accounts owned by account ${e.toBase58()}`);return a.result}async getParsedTokenAccountsByOwner(e,t,r){let n=[e.toBase58()];"mint"in t?n.push({mint:t.mint.toBase58()}):n.push({programId:t.programId.toBase58()});let i=this._buildArgs(n,r,"jsonParsed"),o=nf(await this._rpcRequest("getTokenAccountsByOwner",i),sf);if("error"in o)throw new oy(o.error,`failed to get token accounts owned by account ${e.toBase58()}`);return o.result}async getLargestAccounts(e){let t={...e,commitment:e&&e.commitment||this.commitment},r=t.filter||t.commitment?[t]:[],n=nf(await this._rpcRequest("getLargestAccounts",r),sh);if("error"in n)throw new oy(n.error,"failed to get largest accounts");return n.result}async getTokenLargestAccounts(e,t){let r=this._buildArgs([e.toBase58()],t),n=nf(await this._rpcRequest("getTokenLargestAccounts",r),su);if("error"in n)throw new oy(n.error,"failed to get token largest accounts");return n.result}async getAccountInfoAndContext(e,t){let{commitment:r,config:n}=oF(t),i=this._buildArgs([e.toBase58()],r,"base64",n),o=nf(await this._rpcRequest("getAccountInfo",i),oK(nb(sd)));if("error"in o)throw new oy(o.error,`failed to get info about account ${e.toBase58()}`);return o.result}async getParsedAccountInfo(e,t){let{commitment:r,config:n}=oF(t),i=this._buildArgs([e.toBase58()],r,"jsonParsed",n),o=nf(await this._rpcRequest("getAccountInfo",i),oK(nb(sm)));if("error"in o)throw new oy(o.error,`failed to get info about account ${e.toBase58()}`);return o.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(t){throw Error("failed to get info about account "+e.toBase58()+": "+t)}}async getMultipleParsedAccounts(e,t){let{commitment:r,config:n}=oF(t),i=e.map(e=>e.toBase58()),o=this._buildArgs([i],r,"jsonParsed",n),s=nf(await this._rpcRequest("getMultipleAccounts",o),oK(np(nb(sm))));if("error"in s)throw new oy(s.error,`failed to get info for accounts ${i}`);return s.result}async getMultipleAccountsInfoAndContext(e,t){let{commitment:r,config:n}=oF(t),i=e.map(e=>e.toBase58()),o=this._buildArgs([i],r,"base64",n),s=nf(await this._rpcRequest("getMultipleAccounts",o),oK(np(nb(sd))));if("error"in s)throw new oy(s.error,`failed to get info for accounts ${i}`);return s.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,r){let{commitment:n,config:i}=oF(t),o=this._buildArgs([e.toBase58()],n,void 0,{...i,epoch:null!=r?r:i?.epoch}),s=nf(await this._rpcRequest("getStakeActivation",o),oj(sb));if("error"in s)throw new oy(s.error,`failed to get Stake Activation ${e.toBase58()}`);return s.result}async getProgramAccounts(e,t){let{commitment:r,config:n}=oF(t),{encoding:i,...o}=n||{},s=this._buildArgs([e.toBase58()],r,i||"base64",{...o,...o.filters?{filters:oq(o.filters)}:null}),a=await this._rpcRequest("getProgramAccounts",s),u=np(sp),c=!0===o.withContext?nf(a,oK(u)):nf(a,oj(u));if("error"in c)throw new oy(c.error,`failed to get accounts owned by program ${e.toBase58()}`);return c.result}async getParsedProgramAccounts(e,t){let{commitment:r,config:n}=oF(t),i=this._buildArgs([e.toBase58()],r,"jsonParsed",n),o=nf(await this._rpcRequest("getProgramAccounts",i),oj(np(sy)));if("error"in o)throw new oy(o.error,`failed to get accounts owned by program ${e.toBase58()}`);return o.result}async confirmTransaction(e,t){let r,n;if("string"==typeof e)r=e;else{if(e.abortSignal?.aborted)return Promise.reject(e.abortSignal.reason);r=e.signature}try{n=i(ro).decode(r)}catch(e){throw Error("signature must be base58 encoded: "+r)}return(ot(64===n.length,"signature has invalid length"),"string"==typeof e)?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:r}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((t,r)=>{null!=e&&(e.aborted?r(e.reason):e.addEventListener("abort",()=>{r(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:t}){let r,n,i=!1;return{abortConfirmation:()=>{n&&(n(),n=void 0),null!=r&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:new Promise((o,s)=>{try{r=this.onSignature(t,(e,t)=>{r=void 0,o({__type:ou.PROCESSED,response:{context:t,value:e}})},e);let a=new Promise(e=>{null==r?e():n=this._onSubscriptionStateChange(r,t=>{"subscribed"===t&&e()})});(async()=>{if(await a,i)return;let r=await this.getSignatureStatus(t);if(i||null==r)return;let{context:n,value:u}=r;if(null!=u)if(u?.err)s(u.err);else{switch(e){case"confirmed":case"single":case"singleGossip":if("processed"===u.confirmationStatus)return;break;case"finalized":case"max":case"root":if("processed"===u.confirmationStatus||"confirmed"===u.confirmationStatus)return}i=!0,o({__type:ou.PROCESSED,response:{context:n,value:u}})}})()}catch(e){s(e)}})}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:r,signature:n}}){let i,o=!1,s=new Promise(t=>{let n=async()=>{try{return await this.getBlockHeight(e)}catch(e){return -1}};(async()=>{let e=await n();if(!o){for(;e<=r;)if(await ow(1e3),o||(e=await n(),o))return;t({__type:ou.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:e,signature:n}),c=this.getCancellationPromise(t);try{let e=await Promise.race([c,u,s]);if(e.__type===ou.PROCESSED)i=e.response;else throw new i3(n)}finally{o=!0,a()}return i}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:t,minContextSlot:r,nonceAccountPubkey:n,nonceValue:i,signature:o}}){let s,a=!1,u=new Promise(t=>{let o=i,s=null,u=async()=>{try{let{context:t,value:i}=await this.getNonceAndContext(n,{commitment:e,minContextSlot:r});return s=t.slot,i?.nonce}catch(e){return o}};(async()=>{if(o=await u(),!a)for(;;){if(i!==o)return void t({__type:ou.NONCE_INVALID,slotInWhichNonceDidAdvance:s});if(await ow(2e3),a||(o=await u(),a))return}})()}),{abortConfirmation:c,confirmationPromise:l}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),f=this.getCancellationPromise(t);try{let t=await Promise.race([f,l,u]);if(t.__type===ou.PROCESSED)s=t.response;else{let n;for(;;){let e=await this.getSignatureStatus(o);if(null==e)break;if(e.context.slot<(t.slotInWhichNonceDidAdvance??r)){await ow(400);continue}n=e;break}if(n?.value){let t=e||"finalized",{confirmationStatus:r}=n.value;switch(t){case"processed":case"recent":if("processed"!==r&&"confirmed"!==r&&"finalized"!==r)throw new i8(o);break;case"confirmed":case"single":case"singleGossip":if("confirmed"!==r&&"finalized"!==r)throw new i8(o);break;case"finalized":case"max":case"root":if("finalized"!==r)throw new i8(o)}s={context:n.context,value:{err:n.value.err}}}else throw new i8(o)}}finally{a=!0,c()}return s}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:t}){let r,n,i=new Promise(t=>{let n=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":n=this._confirmTransactionInitialTimeout||3e4}r=setTimeout(()=>t({__type:ou.TIMED_OUT,timeoutMs:n}),n)}),{abortConfirmation:o,confirmationPromise:s}=this.getTransactionConfirmationPromise({commitment:e,signature:t});try{let e=await Promise.race([s,i]);if(e.__type===ou.PROCESSED)n=e.response;else throw new i6(t,e.timeoutMs/1e3)}finally{clearTimeout(r),o()}return n}async getClusterNodes(){let e=nf(await this._rpcRequest("getClusterNodes",[]),oj(np(sT)));if("error"in e)throw new oy(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(e){let t=this._buildArgs([],e),r=nf(await this._rpcRequest("getVoteAccounts",t),sP);if("error"in r)throw new oy(r.error,"failed to get vote accounts");return r.result}async getSlot(e){let{commitment:t,config:r}=oF(e),n=this._buildArgs([],t,void 0,r),i=nf(await this._rpcRequest("getSlot",n),oj(nw()));if("error"in i)throw new oy(i.error,"failed to get slot");return i.result}async getSlotLeader(e){let{commitment:t,config:r}=oF(e),n=this._buildArgs([],t,void 0,r),i=nf(await this._rpcRequest("getSlotLeader",n),oj(nS()));if("error"in i)throw new oy(i.error,"failed to get slot leader");return i.result}async getSlotLeaders(e,t){let r=nf(await this._rpcRequest("getSlotLeaders",[e,t]),oj(np(oN)));if("error"in r)throw new oy(r.error,"failed to get slot leaders");return r.result}async getSignatureStatus(e,t){let{context:r,value:n}=await this.getSignatureStatuses([e],t);return ot(1===n.length),{context:r,value:n[0]}}async getSignatureStatuses(e,t){let r=[e];t&&r.push(t);let n=nf(await this._rpcRequest("getSignatureStatuses",r),sC);if("error"in n)throw new oy(n.error,"failed to get signature status");return n.result}async getTransactionCount(e){let{commitment:t,config:r}=oF(e),n=this._buildArgs([],t,void 0,r),i=nf(await this._rpcRequest("getTransactionCount",n),oj(nw()));if("error"in i)throw new oy(i.error,"failed to get transaction count");return i.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){let t=this._buildArgs([],e),r=nf(await this._rpcRequest("getInflationGovernor",t),o7);if("error"in r)throw new oy(r.error,"failed to get inflation");return r.result}async getInflationReward(e,t,r){let{commitment:n,config:i}=oF(r),o=this._buildArgs([e.map(e=>e.toBase58())],n,void 0,{...i,epoch:null!=t?t:i?.epoch}),s=nf(await this._rpcRequest("getInflationReward",o),oG);if("error"in s)throw new oy(s.error,"failed to get inflation reward");return s.result}async getInflationRate(){let e=nf(await this._rpcRequest("getInflationRate",[]),se);if("error"in e)throw new oy(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(e){let{commitment:t,config:r}=oF(e),n=this._buildArgs([],t,void 0,r),i=nf(await this._rpcRequest("getEpochInfo",n),sr);if("error"in i)throw new oy(i.error,"failed to get epoch info");return i.result}async getEpochSchedule(){let e=nf(await this._rpcRequest("getEpochSchedule",[]),sn);if("error"in e)throw new oy(e.error,"failed to get epoch schedule");let t=e.result;return new oO(t.slotsPerEpoch,t.leaderScheduleSlotOffset,t.warmup,t.firstNormalEpoch,t.firstNormalSlot)}async getLeaderSchedule(){let e=nf(await this._rpcRequest("getLeaderSchedule",[]),si);if("error"in e)throw new oy(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(e,t){let r=this._buildArgs([e],t),n=nf(await this._rpcRequest("getMinimumBalanceForRentExemption",r),sU);return"error"in n?(console.warn("Unable to fetch minimum balance for rent exemption"),0):n.result}async getRecentBlockhashAndContext(e){let{context:t,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(e);return{context:t,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON:()=>({})}}}}async getRecentPerformanceSamples(e){let t=nf(await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),s7);if("error"in t)throw new oy(t.error,"failed to get recent performance samples");return t.result}async getFeeCalculatorForBlockhash(e,t){let r=this._buildArgs([e],t),n=nf(await this._rpcRequest("getFeeCalculatorForBlockhash",r),ae);if("error"in n)throw new oy(n.error,"failed to get fee calculator");let{context:i,value:o}=n.result;return{context:i,value:null!==o?o.feeCalculator:null}}async getFeeForMessage(e,t){let r=iJ(e.serialize()).toString("base64"),n=this._buildArgs([r],t),i=nf(await this._rpcRequest("getFeeForMessage",n),oK(nb(nw())));if("error"in i)throw new oy(i.error,"failed to get fee for message");if(null===i.result)throw Error("invalid blockhash");return i.result}async getRecentPrioritizationFees(e){let t=e?.lockedWritableAccounts?.map(e=>e.toBase58()),r=t?.length?[t]:[],n=nf(await this._rpcRequest("getRecentPrioritizationFees",r),st);if("error"in n)throw new oy(n.error,"failed to get recent prioritization fees");return n.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(e){throw Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(e){throw Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(e){let{commitment:t,config:r}=oF(e),n=this._buildArgs([],t,void 0,r),i=nf(await this._rpcRequest("getLatestBlockhash",n),s4);if("error"in i)throw new oy(i.error,"failed to get latest blockhash");return i.result}async isBlockhashValid(e,t){let{commitment:r,config:n}=oF(t),i=this._buildArgs([e],r,void 0,n),o=nf(await this._rpcRequest("isBlockhashValid",i),s9);if("error"in o)throw new oy(o.error,"failed to determine if the blockhash `"+e+"`is valid");return o.result}async getVersion(){let e=nf(await this._rpcRequest("getVersion",[]),oj(o6));if("error"in e)throw new oy(e.error,"failed to get version");return e.result}async getGenesisHash(){let e=nf(await this._rpcRequest("getGenesisHash",[]),oj(nS()));if("error"in e)throw new oy(e.error,"failed to get genesis hash");return e.result}async getBlock(e,t){let{commitment:r,config:n}=oF(t),i=this._buildArgsAtLeastConfirmed([e],r,void 0,n),o=await this._rpcRequest("getBlock",i);try{switch(n?.transactionDetails){case"accounts":{let e=nf(o,sQ);if("error"in e)throw e.error;return e.result}case"none":{let e=nf(o,sJ);if("error"in e)throw e.error;return e.result}default:{let e=nf(o,sY);if("error"in e)throw e.error;let{result:t}=e;return t?{...t,transactions:t.transactions.map(({transaction:e,meta:t,version:r})=>({meta:t,transaction:{...e,message:o$(r,e.message)},version:r}))}:null}}}catch(e){throw new oy(e,"failed to get confirmed block")}}async getParsedBlock(e,t){let{commitment:r,config:n}=oF(t),i=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",n),o=await this._rpcRequest("getBlock",i);try{switch(n?.transactionDetails){case"accounts":{let e=nf(o,s1);if("error"in e)throw e.error;return e.result}case"none":{let e=nf(o,s2);if("error"in e)throw e.error;return e.result}default:{let e=nf(o,s0);if("error"in e)throw e.error;return e.result}}}catch(e){throw new oy(e,"failed to get block")}}async getBlockProduction(e){let t,r;if("string"==typeof e)r=e;else if(e){let{commitment:n,...i}=e;r=n,t=i}let n=this._buildArgs([],r,"base64",t),i=nf(await this._rpcRequest("getBlockProduction",n),o9);if("error"in i)throw new oy(i.error,"failed to get block production information");return i.result}async getTransaction(e,t){let{commitment:r,config:n}=oF(t),i=this._buildArgsAtLeastConfirmed([e],r,void 0,n),o=nf(await this._rpcRequest("getTransaction",i),s8);if("error"in o)throw new oy(o.error,"failed to get transaction");let s=o.result;return s?{...s,transaction:{...s.transaction,message:o$(s.version,s.transaction.message)}}:s}async getParsedTransaction(e,t){let{commitment:r,config:n}=oF(t),i=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",n),o=nf(await this._rpcRequest("getTransaction",i),s5);if("error"in o)throw new oy(o.error,"failed to get transaction");return o.result}async getParsedTransactions(e,t){let{commitment:r,config:n}=oF(t),i=e.map(e=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",n)}));return(await this._rpcBatchRequest(i)).map(e=>{let t=nf(e,s5);if("error"in t)throw new oy(t.error,"failed to get transactions");return t.result})}async getTransactions(e,t){let{commitment:r,config:n}=oF(t),i=e.map(e=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([e],r,void 0,n)}));return(await this._rpcBatchRequest(i)).map(e=>{let t=nf(e,s8);if("error"in t)throw new oy(t.error,"failed to get transactions");let r=t.result;return r?{...r,transaction:{...r.transaction,message:o$(r.version,r.transaction.message)}}:r})}async getConfirmedBlock(e,t){let r=this._buildArgsAtLeastConfirmed([e],t),n=nf(await this._rpcRequest("getBlock",r),s3);if("error"in n)throw new oy(n.error,"failed to get confirmed block");let i=n.result;if(!i)throw Error("Confirmed block "+e+" not found");let o={...i,transactions:i.transactions.map(({transaction:e,meta:t})=>{let r=new os(e.message);return{meta:t,transaction:{...e,message:r}}})};return{...o,transactions:o.transactions.map(({transaction:e,meta:t})=>({meta:t,transaction:of.populate(e.message,e.signatures)}))}}async getBlocks(e,t,r){let n=this._buildArgsAtLeastConfirmed(void 0!==t?[e,t]:[e],r),i=nf(await this._rpcRequest("getBlocks",n),oj(np(nw())));if("error"in i)throw new oy(i.error,"failed to get blocks");return i.result}async getBlockSignatures(e,t){let r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),n=nf(await this._rpcRequest("getBlock",r),s6);if("error"in n)throw new oy(n.error,"failed to get block");let i=n.result;if(!i)throw Error("Block "+e+" not found");return i}async getConfirmedBlockSignatures(e,t){let r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),n=nf(await this._rpcRequest("getBlock",r),s6);if("error"in n)throw new oy(n.error,"failed to get confirmed block");let i=n.result;if(!i)throw Error("Confirmed block "+e+" not found");return i}async getConfirmedTransaction(e,t){let r=this._buildArgsAtLeastConfirmed([e],t),n=nf(await this._rpcRequest("getTransaction",r),s8);if("error"in n)throw new oy(n.error,"failed to get transaction");let i=n.result;if(!i)return i;let o=new os(i.transaction.message),s=i.transaction.signatures;return{...i,transaction:of.populate(o,s)}}async getParsedConfirmedTransaction(e,t){let r=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),n=nf(await this._rpcRequest("getTransaction",r),s5);if("error"in n)throw new oy(n.error,"failed to get confirmed transaction");return n.result}async getParsedConfirmedTransactions(e,t){let r=e.map(e=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([e],t,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(e=>{let t=nf(e,s5);if("error"in t)throw new oy(t.error,"failed to get confirmed transactions");return t.result})}async getConfirmedSignaturesForAddress(e,t,r){let n={},i=await this.getFirstAvailableBlock();for(;!("until"in n)&&!(--t<=0)&&!(t<i);)try{let e=await this.getConfirmedBlockSignatures(t,"finalized");e.signatures.length>0&&(n.until=e.signatures[e.signatures.length-1].toString())}catch(e){if(e instanceof Error&&e.message.includes("skipped"))continue;throw e}let o=await this.getSlot("finalized");for(;!("before"in n)&&!(++r>o);)try{let e=await this.getConfirmedBlockSignatures(r);e.signatures.length>0&&(n.before=e.signatures[e.signatures.length-1].toString())}catch(e){if(e instanceof Error&&e.message.includes("skipped"))continue;throw e}return(await this.getConfirmedSignaturesForAddress2(e,n)).map(e=>e.signature)}async getConfirmedSignaturesForAddress2(e,t,r){let n=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),i=nf(await this._rpcRequest("getConfirmedSignaturesForAddress2",n),sw);if("error"in i)throw new oy(i.error,"failed to get confirmed signatures for address");return i.result}async getSignaturesForAddress(e,t,r){let n=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),i=nf(await this._rpcRequest("getSignaturesForAddress",n),sv);if("error"in i)throw new oy(i.error,"failed to get signatures for address");return i.result}async getAddressLookupTable(e,t){let{context:r,value:n}=await this.getAccountInfoAndContext(e,t),i=null;return null!==n&&(i=new oR({key:e,state:oR.deserialize(n.data)})),{context:r,value:i}}async getNonceAndContext(e,t){let{context:r,value:n}=await this.getAccountInfoAndContext(e,t),i=null;return null!==n&&(i=ok.fromAccountData(n.data)),{context:r,value:i}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then(e=>e.value).catch(t=>{throw Error("failed to get nonce for account "+e.toBase58()+": "+t)})}async requestAirdrop(e,t){let r=nf(await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),at);if("error"in r)throw new oy(r.error,`airdrop to ${e.toBase58()} failed`);return r.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await ow(100);let e=Date.now()-this._blockhashInfo.lastFetch;if(null!==this._blockhashInfo.latestBlockhash&&!(e>=3e4))return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{let e=Date.now(),t=this._blockhashInfo.latestBlockhash,r=t?t.blockhash:null;for(let e=0;e<50;e++){let e=await this.getLatestBlockhash("finalized");if(r!==e.blockhash)return this._blockhashInfo={latestBlockhash:e,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},e;await ow(200)}throw Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){let{commitment:t,config:r}=oF(e),n=this._buildArgs([],t,"base64",r),i=nf(await this._rpcRequest("getStakeMinimumDelegation",n),oK(nw()));if("error"in i)throw new oy(i.error,"failed to get stake minimum delegation");return i.result}async simulateTransaction(e,t,r){let n;if("message"in e){let n=e.serialize(),i=E.Buffer.from(n).toString("base64");if(Array.isArray(t)||void 0!==r)throw Error("Invalid arguments");let o=t||{};o.encoding="base64","commitment"in o||(o.commitment=this.commitment),t&&"object"==typeof t&&"innerInstructions"in t&&(o.innerInstructions=t.innerInstructions);let s=[i,o],a=nf(await this._rpcRequest("simulateTransaction",s),o4);if("error"in a)throw Error("failed to simulate transaction: "+a.error.message);return a.result}if(e instanceof of?((n=new of).feePayer=e.feePayer,n.instructions=e.instructions,n.nonceInfo=e.nonceInfo,n.signatures=e.signatures):(n=of.populate(e))._message=n._json=void 0,void 0!==t&&!Array.isArray(t))throw Error("Invalid arguments");if(n.nonceInfo&&t)n.sign(...t);else{let e=this._disableBlockhashCaching;for(;;){let r=await this._blockhashWithExpiryBlockHeight(e);if(n.lastValidBlockHeight=r.lastValidBlockHeight,n.recentBlockhash=r.blockhash,!t)break;if(n.sign(...t),!n.signature)throw Error("!signature");let i=n.signature.toString("base64");if(this._blockhashInfo.simulatedSignatures.includes(i)||this._blockhashInfo.transactionSignatures.includes(i))e=!0;else{this._blockhashInfo.simulatedSignatures.push(i);break}}}let i=n._compile(),o=i.serialize(),s=n._serialize(o).toString("base64"),a={encoding:"base64",commitment:this.commitment};r&&(a.accounts={encoding:"base64",addresses:(Array.isArray(r)?r:i.nonProgramIds()).map(e=>e.toBase58())}),t&&(a.sigVerify=!0),t&&"object"==typeof t&&"innerInstructions"in t&&(a.innerInstructions=t.innerInstructions);let u=[s,a],c=nf(await this._rpcRequest("simulateTransaction",u),o4);if("error"in c){let e;if("data"in c.error&&(e=c.error.data.logs)&&Array.isArray(e)){let t="\n    ",r=t+e.join(t);console.error(c.error.message,r)}throw new om({action:"simulate",signature:"",transactionMessage:c.error.message,logs:e})}return c.result}async sendTransaction(e,t,r){if("version"in e){if(t&&Array.isArray(t))throw Error("Invalid arguments");let r=e.serialize();return await this.sendRawTransaction(r,t)}if(void 0===t||!Array.isArray(t))throw Error("Invalid arguments");if(e.nonceInfo)e.sign(...t);else{let r=this._disableBlockhashCaching;for(;;){let n=await this._blockhashWithExpiryBlockHeight(r);if(e.lastValidBlockHeight=n.lastValidBlockHeight,e.recentBlockhash=n.blockhash,e.sign(...t),!e.signature)throw Error("!signature");let i=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(i))r=!0;else{this._blockhashInfo.transactionSignatures.push(i);break}}}let n=e.serialize();return await this.sendRawTransaction(n,r)}async sendRawTransaction(e,t){let r=iJ(e).toString("base64");return await this.sendEncodedTransaction(r,t)}async sendEncodedTransaction(e,t){let r={encoding:"base64"},n=t&&t.skipPreflight,i=!0===n?"processed":t&&t.preflightCommitment||this.commitment;t&&null!=t.maxRetries&&(r.maxRetries=t.maxRetries),t&&null!=t.minContextSlot&&(r.minContextSlot=t.minContextSlot),n&&(r.skipPreflight=n),i&&(r.preflightCommitment=i);let o=[e,r],s=nf(await this._rpcRequest("sendTransaction",o),ar);if("error"in s){let e;throw"data"in s.error&&(e=s.error.data.logs),new om({action:n?"send":"simulate",signature:"",transactionMessage:s.error.message,logs:e})}return s.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),1e3===e)?this._updateSubscriptions():(this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,t])=>{this._setSubscription(e,{...t,state:"pending"})}))}_setSubscription(e,t){let r=this._subscriptionsByHash[e]?.state;if(this._subscriptionsByHash[e]=t,r!==t.state){let r=this._subscriptionStateChangeCallbacksByHash[e];r&&r.forEach(e=>{try{e(t.state)}catch{}})}}_onSubscriptionStateChange(e,t){let r=this._subscriptionHashByClientSubscriptionId[e];if(null==r)return()=>{};let n=this._subscriptionStateChangeCallbacksByHash[r]||=new Set;return n.add(t),()=>{n.delete(t),0===n.size&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(0===Object.keys(this._subscriptionsByHash).length){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(e){e instanceof Error&&console.log(`Error when closing socket connection: ${e.message}`)}},500));return}if(null!==this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected)return void this._rpcWebSocket.connect();let e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async e=>{let r=this._subscriptionsByHash[e];if(void 0!==r)switch(r.state){case"pending":case"unsubscribed":if(0===r.callbacks.size){delete this._subscriptionsByHash[e],"unsubscribed"===r.state&&delete this._subscriptionCallbacksByServerSubscriptionId[r.serverSubscriptionId],await this._updateSubscriptions();return}await (async()=>{let{args:n,method:i}=r;try{this._setSubscription(e,{...r,state:"subscribing"});let t=await this._rpcWebSocket.call(i,n);this._setSubscription(e,{...r,serverSubscriptionId:t,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[t]=r.callbacks,await this._updateSubscriptions()}catch(o){if(console.error(`Received ${o instanceof Error?"":"JSON-RPC "}error calling \`${i}\``,{args:n,error:o}),!t())return;this._setSubscription(e,{...r,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":0===r.callbacks.size&&await (async()=>{let{serverSubscriptionId:n,unsubscribeMethod:i}=r;if(this._subscriptionsAutoDisposedByRpc.has(n))this._subscriptionsAutoDisposedByRpc.delete(n);else{this._setSubscription(e,{...r,state:"unsubscribing"}),this._setSubscription(e,{...r,state:"unsubscribing"});try{await this._rpcWebSocket.call(i,[n])}catch(n){if(n instanceof Error&&console.error(`${i} error:`,n.message),!t())return;this._setSubscription(e,{...r,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(e,{...r,state:"unsubscribed"}),await this._updateSubscriptions()})()}}))}_handleServerNotification(e,t){let r=this._subscriptionCallbacksByServerSubscriptionId[e];void 0!==r&&r.forEach(e=>{try{e(...t)}catch(e){console.error(e)}})}_wsOnAccountNotification(e){let{result:t,subscription:r}=nf(e,sx);this._handleServerNotification(r,[t.value,t.context])}_makeSubscription(e,t){let r=this._nextClientSubscriptionId++,n=oM([e.method,t]),i=this._subscriptionsByHash[n];return void 0===i?this._subscriptionsByHash[n]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:i.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[r]=n,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];let t=this._subscriptionsByHash[n];ot(void 0!==t,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),t.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(e,t,r){let{commitment:n,config:i}=oF(r),o=this._buildArgs([e.toBase58()],n||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){let{result:t,subscription:r}=nf(e,sB);this._handleServerNotification(r,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,r,n){let{commitment:i,config:o}=oF(r),s=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",o||(n?{filters:oq(n)}:void 0));return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},s)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,r){let n=this._buildArgs(["object"==typeof e?{mentions:[e.toString()]}:e],r||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},n)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){let{result:t,subscription:r}=nf(e,ai);this._handleServerNotification(r,[t.value,t.context])}_wsOnSlotNotification(e){let{result:t,subscription:r}=nf(e,sE);this._handleServerNotification(r,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){let{result:t,subscription:r}=nf(e,sI);this._handleServerNotification(r,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){let r=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,r,n){let i=t||this._commitment;if(i||r||n){let t={};r&&(t.encoding=r),i&&(t.commitment=i),n&&(t=Object.assign(t,n)),e.push(t)}return e}_buildArgsAtLeastConfirmed(e,t,r,n){let i=t||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,r,n)}_wsOnSignatureNotification(e){let{result:t,subscription:r}=nf(e,s_);"receivedSignature"!==t.value&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,"receivedSignature"===t.value?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,r){let n=this._buildArgs([e],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(e,r)=>{if("status"===e.type){t(e.result,r);try{this.removeSignatureListener(i)}catch(e){}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},n);return i}onSignatureWithOptions(e,t,r){let{commitment:n,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},o=this._buildArgs([e],n,void 0,i),s=this._makeSubscription({callback:(e,r)=>{t(e,r);try{this.removeSignatureListener(s)}catch(e){}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return s}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){let{result:t,subscription:r}=nf(e,sM);this._handleServerNotification(r,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}("http://127.0.0.1:8899","confirmed"),uC=null,uU=null,uN=null,uz=null,uH=6;async function uF(e,t=2){if(await uR.getBalance(e)<1e9*t){console.log(`Airdropping ${t} SOL to ${e.toString()}...`);let r=await uR.requestAirdrop(e,1e9*t);await uR.confirmTransaction(r,"confirmed"),console.log("Airdrop complete!")}else console.log("Wallet has enough SOL, no airdrop needed.")}async function uq(){if(!(uC="solana"in window&&window.solana.isPhantom?window.solana:null)){uy.innerText="Phantom not found. Install Phantom extension.";return}try{uU=(await uC.connect()).publicKey,uy.innerHTML=`Wallet: <code>${uU.toString()}</code>`,console.log("Connected:",uU.toString()),await uF(uU,2),console.log("Wallet ready with SOL!")}catch(e){console.error("Wallet connect error:",e),uy.innerText=`Wallet connect error: ${e.message||e}`}}async function uD(){if(!uN){uL.innerText="No mint created yet.";return}try{let e=await ur(uR,uN);uL.innerText=`Mint: ${uN.toString()}
Decimals: ${e.decimals}
Supply (raw): ${e.supply.toString()}
Mint Authority: ${e.mintAuthority?.toString()||"null"}
Freeze Authority: ${e.freezeAuthority?.toString()||"null"}`}catch(e){console.error(e),uL.innerText="Failed to fetch mint info: "+(e.message||e)}}um.addEventListener("click",uq),ub.addEventListener("click",async()=>{if(!uU){uv.innerText="Connect Phantom first.";return}let e=Number(uw.value||6);uv.innerText="Creating mint...";try{let t=as.generate(),r=await uR.getMinimumBalanceForRentExemption(ut),n=new of().add(oI.createAccount({fromPubkey:uU,newAccountPubkey:t.publicKey,space:ut,lamports:r,programId:ab}),function(e,t,r,n,i=ab){let o=ul.alloc(67);return uf.encode({instruction:w.InitializeMint,decimals:t,mintAuthority:r,freezeAuthority:null},o),new ol({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:op,isSigner:!1,isWritable:!1}],programId:i,data:o.subarray(0,uf.getSpan(o))})}(t.publicKey,e,uU,0));n.feePayer=uU;let{blockhash:i}=await uR.getLatestBlockhash("confirmed");n.recentBlockhash=i,n.partialSign(t);let o=await uC.signTransaction(n),s=await uR.sendRawTransaction(o.serialize());await uR.confirmTransaction(s,"confirmed"),uN=t.publicKey,uH=e,uv.innerHTML=`Created mint: <code>${uN.toString()}</code>`,await uD()}catch(e){console.error(e),uv.innerText="Failed to create mint: "+(e.message||e)}}),uS.addEventListener("click",async()=>{if(!uU||!uN){uB.innerText="Connect wallet and create a mint first.";return}try{let e=await un(uN,uU,!1),t=await uR.getAccountInfo(e);if(null!==t){uz=e,uB.innerText=`ATA already exists: ${e.toString()}`;return}let r=uo(uU,e,uU,uN),n=new of().add(r);n.feePayer=uU;let{blockhash:i}=await uR.getLatestBlockhash("confirmed");n.recentBlockhash=i;let o=await uC.signTransaction(n),s=await uR.sendRawTransaction(o.serialize());await uR.confirmTransaction(s,"confirmed"),uz=e,uB.innerText=`ATA created: ${e.toString()}`}catch(e){console.error(e),uB.innerText="Failed to create ATA: "+(e.message||e)}}),uE.addEventListener("click",async()=>{if(!uN||!uz){ux.innerText="Create mint and ATA first.";return}let e=Number(uk.value||0);if(e<=0){ux.innerText="Enter a valid amount.";return}ux.innerText="Minting...";try{let t=BigInt(e)*BigInt(10)**BigInt(uH),r=function(e,t,r,n,i=[],o=ab){let s=us([{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}],r,i),a=uh.alloc(ud.span);return ud.encode({instruction:w.MintTo,amount:BigInt(n)},a),new ol({keys:s,programId:o,data:a})}(uN,uz,uU,t),n=new of().add(r);n.feePayer=uU;let{blockhash:i}=await uR.getLatestBlockhash("confirmed");n.recentBlockhash=i;let o=await uC.signTransaction(n),s=await uR.sendRawTransaction(o.serialize());await uR.confirmTransaction(s,"confirmed");let a=await aq(uR,uz),u=Number(a.amount)/10**uH;ux.innerHTML=`Minted <strong>${e}</strong> tokens.<br>New balance: <strong>${u}</strong> (tx: <code>${s}</code>)`}catch(e){console.error(e),ux.innerText="Mint failed: "+(e.message||e)}}),document.getElementById("transferBtn").onclick=async()=>{try{let e;if(!uN||!uU){u_.innerText="Create mint and connect wallet first.";return}let t=uA.value.trim();if(!t)throw Error("Destination wallet cannot be empty");try{e=new i2(t)}catch(e){throw Error("Invalid destination wallet address")}let r=Number(uI.value);if(!r||r<=0)throw Error("Invalid amount");let n=uN,i=await un(n,uU,!1),o=await un(n,e,!1),s=[];await uR.getAccountInfo(o)||s.push(uo(uU,o,e,n));let a=BigInt(r)*10n**BigInt(uH);s.push(function(e,t,r,n,i=[],o=ab){let s=us([{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}],r,i),a=up.alloc(ug.span);return ug.encode({instruction:w.Transfer,amount:BigInt(n)},a),new ol({keys:s,programId:o,data:a})}(i,o,uU,a));let u=new of().add(...s);u.feePayer=uU,u.recentBlockhash=(await uR.getLatestBlockhash()).blockhash;let c=await uC.signTransaction(u),l=await uR.sendRawTransaction(c.serialize());u_.innerHTML=`Transfer successful<br>Tx: <code>${l}</code>`}catch(e){console.error(e),u_.innerText="Transfer failed: "+e.message}},uM.addEventListener("click",async()=>{if(!uN||!uz){uO.innerText="Create mint and ATA first.";return}let e=Number(uT.value||0);if(e<=0){uO.innerText="Enter a valid amount.";return}uO.innerText="Burning...";try{let t=BigInt(e)*BigInt(10)**BigInt(uH),r=function(e,t,r,n,i=[],o=ab){let s=us([{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}],r,i),a=ua.alloc(uu.span);return uu.encode({instruction:w.Burn,amount:BigInt(n)},a),new ol({keys:s,programId:o,data:a})}(uz,uN,uU,t),n=new of().add(r);n.feePayer=uU,n.recentBlockhash=(await uR.getLatestBlockhash("confirmed")).blockhash;let i=await uC.signTransaction(n),o=await uR.sendRawTransaction(i.serialize());await uR.confirmTransaction(o,"confirmed");let s=await aq(uR,uz);uO.innerHTML=`Burned ${e} tokens.<br> New balance: ${s.amount.toString()} (tx: <code>${o}</code>)`}catch(e){console.error(e),uO.innerText="Burn failed: "+(e.message||e)}}),uP.addEventListener("click",uD);
//# sourceMappingURL=solana-token-dashboard.8189e1c0.js.map
